<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0014)about:internet -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Adobe RoboHelp 8" />
<title>Configuring Data Feeders</title>
<link rel="StyleSheet" href="../../Bookshelf.css" type="text/css" />
<script type="text/javascript" language="JavaScript">
//<![CDATA[
function ehlp_showtip(current,e,text)
{
  if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == 'Netscape'))
  {
    document.tooltip.document.write("<layer bgColor='yellow' style='border:1px solid black;font-size:12px;'>"+ text + "<\/layer>");
    document.tooltip.document.close();
    document.tooltip.left=e.pageX+5;
    document.tooltip.top=e.pageY+5;
    document.tooltip.visibility="show";
  }
}
function ehlp_hidetip()
{
  document.tooltip.visibility="hidden";
}
//]]>
</script>
<script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
        origWidth = innerWidth;
        origHeight = innerHeight;
        onresize = reDo;
}
onerror = null; 
//]]>
</script>
<style type="text/css">
/*<![CDATA[*/
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
-->
/*]]>*/
</style>

<script type="text/javascript" language="javascript1.2" src="../../whmsg.js">
</script>
<script type="text/javascript" language="javascript" src="../../whver.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../../whproxy.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../../whutils.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../../whlang.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../../whtopic.js">
</script>
</head>
<body>
<script type="text/javascript" language="javascript1.2">
//<![CDATA[
<!--
if (window.gbWhTopic)
{
        var strUrl = document.location.href;
        var bc = 0;
        var n = strUrl.toLowerCase().indexOf("bc-");
        if(n != -1)
        {
                document.location.href = strUrl.substring(0, n);
                bc = strUrl.substring(n+3);
        }

        if (window.addTocInfo)
        {
        addTocInfo("DEVELOPER REFERENCE\nFoundation\nConfiguring Data Feeders");
addButton("show",BTN_TEXT,"Show Table of Contents","","","","",0,0,"","","");

        }
        if (window.writeBtnStyle)
                writeBtnStyle();

        if (window.writeIntopicBar)
                writeIntopicBar(1);

        
        

        if (window.setRelStartPage)
        {
        setRelStartPage("../../Bookshelf.htm");

                autoSync(0);
                sendSyncInfo();
                sendAveInfoOut();
        }
}
else
        if (window.gbIE4)
                document.location.reload();

//-->
//]]>
</script><script type="text/javascript" language="javascript">
//<![CDATA[
document.write("<p  style=\"text-align:right;color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;\">");
AddMasterBreadcrumbs("../../Bookshelf.htm", "color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;", "&gt;", "Home", "../../Welcome_to_GroundWork_Monitor/index.htm");
document.write("<a style=\"color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;\" href=\"../developer_aboutdeveloperreference.htm\">DEVELOPER REFERENCE<\/a> &gt; <a style=\"color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;\" href=\"developer_foundationoverview.htm\">Foundation<\/a> &gt; Configuring Data Feeders<\/p>");
//]]>
</script>
<p>&#160;</p>
<h1><img src="../../Shared_Images/square.gif" alt="square.gif" style="border: none;" width="15" height="15" border="0" /> GroundWork Foundation</h1>
<h3 align="right"><a href="../developer_aboutdeveloperreference.htm" title="Topic Home" onmouseover="if ((parseInt(navigator.appVersion) == 4) &amp;&amp; (navigator.appName == 'Netscape')) ehlp_showtip(this,event,'Topic Home');" onmouseout="if ((parseInt(navigator.appVersion) == 4) &amp;&amp; (navigator.appName == 'Netscape')) ehlp_hidetip();"><img src="../../Shared_Images/homeicon.gif" alt="homeicon.gif" style="border: none;" width="33" height="27" border="0" /></a> <img src="../../Shared_Images/printicon.gif" onclick="window.print()" alt="Print Page" title="Print Page" style="border: none;" width="31" height="27" border="0" /> <a href="mailto:support@groundworkopensource.com?subject=Configuring Data Feeders" title="Send Comments"><img src="../../Shared_Images/commentsicon.gif" alt="Send Comments" title="Send Comments" style="border: none;" width="33" height="27" border="0" /></a></h3>
<h2>Configuring Data Feeders</h2>
<p>The following section describes configuring the system for custom data integration and the steps necessary to setup and configure data feeds into GroundWork Monitor for status and event monitoring.</p>
<h3>Scenario</h3>
<p>An application, let's call it TemperatureWatcher, monitors 10 temperature sensors in different rooms of a building. At startup and shutdown the TemperatureWatcher applications sends events. In normal operations every 30 seconds the temperature of each sensor is sent to GroundWork Monitor.</p>
<p>Additionally, the TemperatureWatcher checks &#160;the status of the sensors. If the status is different from an OK status and the sensors do not respond an event is sent to GroundWork Monitor.</p>
<p>The Events generated by TemperatureWatcher should be visible in the Event Console while the temperature of each sensor should be visible in the Status application.</p>
<h3>Setup and Configuration</h3>
<p>Given the above specifications the following meta data needs to be generated in Foundation:</p>
<ul style="list-style: url('../../Shared_Images/bullet01.gif');">
<li class="p-Bullet1">
<p class="Bullet1"><span style="font-weight: bold;"><b>ApplicationType</b></span>: TempWatcher</p>
</li>
<li class="p-Bullet1">
<p class="Bullet1"><span style="font-weight: bold;"><b>Custom Property for Status information</b></span>: Temperature of type Double - This is the field where the temperature measurements are stored.</p>
</li>
<li class="p-Bullet1">
<p class="Bullet1"><span style="font-weight: bold;"><b>Host Group</b></span>: TemperatureWatcherApps - The HostGroup needs to be created so that the TemperatureWatcher applications are visible in Status.</p>
</li>
</ul>
<h3>Insert Metadata</h3>
<p>The easiest way to insert the metadata into Foundation is to stop Foundation, update SQL and restart Foundation.</p>
<ol>
<li class="p-Numbering">
<p class="Numbering">Stop Foundation from the command line logged in as <span class="CodeInline">root</span>:</p>
</li>
</ol>
<p class="GroupCode2">/usr/local/groundwork/ctlscript.sh stop gwservices</p>
<ol start="2" type="1">
<li class="p-Numbering">
<p class="Numbering">Update SQL data into the database:</p>
</li>
</ol>
<p class="GroupCode2"># psql -U postgres gwcollagedb</p>
<p class="GroupCode2">gwcollagedb=# INSERT INTO ApplicationType(ApplicationTypeID, Name, Description, StateTransitionCriteria) VALUES (200,"TEMPWATCHER", "System monitored by TemperatureWatcher", "Device;Host;ServiceDescription");</p>
<p class="GroupCode2">gwcollagedb=#I INSERT INTO PropertyType(Name, Description, isDouble) &#160;VALUES ("Temperature", "", 1);</p>
<ol start="3" type="1">
<li class="p-Numbering">
<p class="Numbering">Restart Foundation:</p>
</li>
</ol>
<p class="GroupCode2">/usr/local/groundwork/ctlscript.sh start gwservices</p>
<p>Configuration Data for the Application, Checks and Hostgroup are XML feeds to the TCP port 4913 using the SystemAdmin adapter for Data Normalization. The following Feed creates the necessary entries so that the system can accept monitoring data from the TemperatureWatcher application:</p>
<p><span class="CodeInline">&lt;Adapter Session="1" AdapterType="SystemAdmin"&gt;</span></p>
<p class="CodeGroup">&lt;Command Action='ADD' ApplicationType='TEMPWATCHER'&gt;</p>
<p class="GroupCode3">&lt;Host Host='Temp-Watcher-1' Description='TemperatureWatcher'</p>
<p class="GroupCode3">Device='TemperatureWatcher' DisplayName='TemperatureWatcher' /&gt;</p>
<p class="CodeGroup">&lt;/Command&gt;</p>
<p class="CodeGroup"><span class="CodeInline">&lt;Command Action='ADD' ApplicationType='TEMPWATCHER'&gt;</span></p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_1'</p>
<p class="GroupCode3">CheckType='PASSIVE' StateType='SOFT' MonitorStatus='PENDING'</p>
<p class="GroupCode3">LastHardState='PENDING' /&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_2'</p>
<p class="GroupCode3">CheckType='PASSIVE' StateType='SOFT' MonitorStatus='PENDING'</p>
<p class="GroupCode3">LastHardState='PENDING' /&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_3'</p>
<p class="GroupCode3">CheckType='PASSIVE' StateType='SOFT' MonitorStatus='PENDING'</p>
<p class="GroupCode3">LastHardState='PENDING' /&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_4'</p>
<p class="GroupCode3">CheckType='PASSIVE' StateType='SOFT' MonitorStatus='PENDING'</p>
<p class="GroupCode3">LastHardState='PENDING' /&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_5'</p>
<p class="GroupCode3">CheckType='PASSIVE' StateType='SOFT' MonitorStatus='PENDING'</p>
<p class="GroupCode3">LastHardState='PENDING' /&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_6'</p>
<p class="GroupCode3">CheckType='PASSIVE' StateType='SOFT' MonitorStatus='PENDING'</p>
<p class="GroupCode3">LastHardState='PENDING' /&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_7'</p>
<p class="GroupCode3">CheckType='PASSIVE' StateType='SOFT' MonitorStatus='PENDING'</p>
<p class="GroupCode3">LastHardState='PENDING' /&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_8'</p>
<p class="GroupCode3">CheckType='PASSIVE' StateType='SOFT' MonitorStatus='PENDING'</p>
<p class="GroupCode3">LastHardState='PENDING' /&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_9'</p>
<p class="GroupCode3">CheckType='PASSIVE' StateType='SOFT' MonitorStatus='PENDING'</p>
<p class="GroupCode3">LastHardState='PENDING' /&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_10'</p>
<p class="GroupCode3">CheckType='PASSIVE' StateType='SOFT' MonitorStatus='PENDING'</p>
<p class="GroupCode3">LastHardState='PENDING' /&gt;</p>
<p class="CodeGroup"><span class="CodeInline">&lt;/Command&gt;</span></p>
<p class="CodeGroup"><span class="CodeInline">&lt;Command Action='ADD' ApplicationType='TEMPWATCHER'&gt;</span></p>
<p class="GroupCode2">&lt;HostGroup HostGroup='TemperatureWatcherApps' /&gt;</p>
<p class="CodeGroup"><span class="CodeInline">&lt;/Command&gt;</span></p>
<p class="CodeGroup"><span class="CodeInline">&lt;Command Action='MODIFY' ApplicationType='TEMPWATCHER'&gt;</span></p>
<p class="GroupCode2">&lt;HostGroup HostGroup='TemperatureWatcherApps' &gt;</p>
<p class="GroupCode3">&lt;Host Host='Temp-Watcher-1' /&gt;</p>
<p class="GroupCode2">&lt;/HostGroup&gt;</p>
<p class="CodeGroup"><span class="CodeInline">&lt;/Command&gt;</span></p>
<p><span class="CodeInline">&lt;/Adapter&gt;</span></p>
<h3>Feeding Data</h3>
<p>Any data (Status and Events) will be sent to the SystemAdmin adapter since the data normalization is done by the feeder application.</p>
<p>Sending an event will use the following XML feed send to the TCP port 4913. The example reports a FATAL error on the sensor_1 check:</p>
<p><span class="CodeInline">&lt;Adapter Session='8' AdapterType='SystemAdmin'&gt;</span></p>
<p class="CodeGroup">&lt;Command Action='ADD' ApplicationType='TEMPWATCHER'&gt;</p>
<p class="GroupCode2">&lt;LogMessage MonitorServerName='localhost'</p>
<p class="GroupCode3">Device='TemperatureWatcher' TextMessage='Sensor is not responding – failed to get temperature'</p>
<p class="GroupCode3">ReportDate='2008-01-23 01:45:26' Severity='FATAL' MonitorStatus='FAILED'/&gt;</p>
<p class="GroupCode2">&lt;/Command&gt;</p>
<p><span class="CodeInline">&lt;/Adapter&gt;</span></p>
<p>For best performance the status of all the 10 sensors should be sent as one message to Foundation:</p>
<p><span class="CodeInline">&lt;Adapter Session="1" AdapterType="SystemAdmin"&gt;</span></p>
<p class="CodeGroup">&lt;Command Action='MODIFY' ApplicationType='TEMPWATCHER'&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_1'</p>
<p class="GroupCode3">MonitorStatus='OK' Temperature='76.3' /&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_2'</p>
<p class="GroupCode3">MonitorStatus='WARNING' Temperature='88' /&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_3'</p>
<p class="GroupCode3">MonitorStatus='OK' Temperature='43' /&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_4'</p>
<p class="GroupCode3">MonitorStatus='OK' Temperature='67' /&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_5'</p>
<p class="GroupCode3">MonitorStatus='OK' Temperature='76.3' /&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_6'</p>
<p class="GroupCode3">MonitorStatus='OK' Temperature='66' /&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_7'</p>
<p class="GroupCode3">MonitorStatus='OK' Temperature='52.3' /&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_8'</p>
<p class="GroupCode3">MonitorStatus='OK' Temperature='50' /&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_9'</p>
<p class="GroupCode3">MonitorStatus='WARNING' Temperature='93' /&gt;</p>
<p class="GroupCode2">&lt;Service Host='Temp-Watcher-1' ServiceDescription='Sensor_10'</p>
<p class="GroupCode3">MonitorStatus='OK' Temperature='66.3' /&gt;</p>
<p class="CodeGroup">&lt;/Command&gt;</p>
<p><span class="CodeInline">&lt;/Adapter&gt;</span></p>
<p>With this configuration Status Data is visible in Status under the HostGroup TempWatcherApp and all Events are visible in the Event Console.</p>
<div style="width: 100%; position: relative;" id="footer">
<p class="Footer" style="font-size: 7pt; line-height: Normal; margin-top: 6pt; margin-bottom: 4pt;">GroundWork, Inc. ©2011</p>
</div>
<script type="text/javascript" language="JavaScript">
//<![CDATA[
 if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == 'Netscape'))
  document.write("<div id='tooltip' class='WebHelpPopupMenu'><\/div>");
//]]>
</script><script type="text/javascript" language="javascript1.2">
//<![CDATA[
<!--
if (window.writeIntopicBar)
        writeIntopicBar(0);


highlightSearch();
//-->
//]]>
</script>
</body>
</html>
