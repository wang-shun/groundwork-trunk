<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0014)about:internet -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="search-keywords" content="event console, actions" />
<meta http-equiv="Content-Language" content="en-US" />
<meta name="generator" content="Adobe RoboHelp 8" />
<title>Configuring Actions</title>
<link rel="StyleSheet" href="../Bookshelf.css" type="text/css" />
<script type="text/javascript" language="JavaScript">
//<![CDATA[
function ehlp_showtip(current,e,text)
{
  if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == 'Netscape'))
  {
    document.tooltip.document.write("<layer bgColor='yellow' style='border:1px solid black;font-size:12px;'>"+ text + "<\/layer>");
    document.tooltip.document.close();
    document.tooltip.left=e.pageX+5;
    document.tooltip.top=e.pageY+5;
    document.tooltip.visibility="show";
  }
}
function ehlp_hidetip()
{
  document.tooltip.visibility="hidden";
}
//]]>
</script>
<script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
        origWidth = innerWidth;
        origHeight = innerHeight;
        onresize = reDo;
}
onerror = null; 
//]]>
</script>
<style type="text/css">
/*<![CDATA[*/
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
-->
/*]]>*/
</style>

<script type="text/javascript" language="javascript1.2" src="../whmsg.js">
</script>
<script type="text/javascript" language="javascript" src="../whver.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whproxy.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whutils.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whlang.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whtopic.js">
</script>
</head>
<body>
<script type="text/javascript" language="javascript1.2">
//<![CDATA[
<!--
if (window.gbWhTopic)
{
        var strUrl = document.location.href;
        var bc = 0;
        var n = strUrl.toLowerCase().indexOf("bc-");
        if(n != -1)
        {
                document.location.href = strUrl.substring(0, n);
                bc = strUrl.substring(n+3);
        }

        if (window.addTocInfo)
        {
        addTocInfo("DEVELOPER REFERENCE\nConfiguring Event Console\nConfiguring Actions");
addButton("show",BTN_TEXT,"Show Table of Contents","","","","",0,0,"","","");

        }
        if (window.writeBtnStyle)
                writeBtnStyle();

        if (window.writeIntopicBar)
                writeIntopicBar(1);

        
        

        if (window.setRelStartPage)
        {
        setRelStartPage("../Bookshelf.htm");

                autoSync(0);
                sendSyncInfo();
                sendAveInfoOut();
        }
}
else
        if (window.gbIE4)
                document.location.reload();

//-->
//]]>
</script><script type="text/javascript" language="javascript">
//<![CDATA[
document.write("<p  style=\"text-align:right;color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;\">");
AddMasterBreadcrumbs("../Bookshelf.htm", "color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;", "&gt;", "Home", "../Welcome_to_GroundWork_Monitor/index.htm");
document.write("<a style=\"color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;\" href=\"developer_aboutdeveloperreference.htm\">DEVELOPER REFERENCE<\/a> &gt; <a style=\"color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;\" href=\"developer_consoleconfiguringaudiblealarms.htm\">Configuring Event Console<\/a> &gt; Configuring Actions<\/p>");
//]]>
</script>
<p>&#160;</p>
<h1><img src="../Shared_Images/square.gif" alt="square.gif" style="border: none;" width="15" height="15" border="0" /> Developer Reference</h1>
<h3 align="right"><a href="developer_aboutdeveloperreference.htm" title="Topic Home" onmouseover="if ((parseInt(navigator.appVersion) == 4) &amp;&amp; (navigator.appName == 'Netscape')) ehlp_showtip(this,event,'Topic Home');" onmouseout="if ((parseInt(navigator.appVersion) == 4) &amp;&amp; (navigator.appName == 'Netscape')) ehlp_hidetip();"><img src="../Shared_Images/homeicon.gif" alt="homeicon.gif" style="border: none;" width="33" height="27" border="0" /></a> <img src="../Shared_Images/printicon.gif" onclick="window.print()" alt="Print Page" title="Print Page" style="border: none;" width="31" height="27" border="0" /> <a href="mailto:support@groundworkopensource.com?subject=Developer Reference: Event Console - Configuring Actions" title="Send Comments"><img src="../Shared_Images/commentsicon.gif" alt="commentsicon.gif" style="border: none;" width="33" height="27" border="0" /></a></h3>
<h2>Configuring Event Console</h2>
<h3>Configuring Actions</h3>
<p>The <span style="font-style: italic;"><i>Event Console</i></span> enables users to select messages and apply various actions such as <span style="font-style: italic;"><i>Open Log Message</i></span>, <span style="font-style: italic;"><i>Close Log Message</i></span>, <span style="font-style: italic;"><i>Accept Log Message</i></span>, and other application type specific actions for selected message(s).</p>
<p>The list of actions is driven by the message(s) that are selected. There are two sets of action types:</p>
<ol>
<li>
<p class="Numbering">Standard System Actions - <b style="font-weight: normal;">OPEN, CLOSED, NOTIFIED, ACCEPTED</b></p>
</li>
<li>
<p class="Numbering">Application Actions - Nagios Acknowledge and Submit Passive Check</p>
</li>
</ol>
<p>If the message(s) selected belong to a <span style="text-decoration: underline;"><u>single application type</u></span>, the action list will consist of <span style="font-style: italic;"><i>Standard System Actions</i></span> plus the specific <span style="font-style: italic;"><i>Application Actions</i></span>. If the message(s) selected belong to <span style="text-decoration: underline;"><u>multiple application types</u></span> then only <span style="font-style: italic;"><i>Standard System Actions</i></span> will be listed. Other than <span style="font-style: italic;"><i>System</i></span> and <span style="font-style: italic;"><i>Nagios</i></span> actions (except <span style="font-style: italic;"><i>Nagios Acknowledge</i></span>) all actions will have user input dialog for entering comments.</p>
<p>Developers can configure <span style="font-style: italic;"><i>Event Console</i></span> actions for a specific application type. These actions can submit data via 3 modes:</p>
<ol>
<li class="p-Numbering">
<p class="Numbering">Invoke a server side script</p>
</li>
<li class="p-Numbering">
<p class="Numbering">Post to a URL</p>
</li>
<li class="p-Numbering">
<p class="Numbering">Java API</p>
</li>
</ol>
<p><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>Note:</b></font></span> You will need to restart <span style="font-style: italic;"><i>gwservices</i></span> after configuring actions: <span class="CodeInline">/usr/local/groundwork/ctlscript.sh restart gwservices</span></p>
<h4>Valid Action Parameters</h4>
<p class="Caption">Table: Valid Action Parameters</p>
<table cellspacing="0" width="700">
<col style="width: 5%;" />
<col style="width: 20%;" />
<col style="width: 50%;" />
<col style="width: 25%;" />
<tr style="vertical-align: top;">
<td style="border: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#1B3A83">
<p class="NormalTableBold">ID</p>
</td>
<td style="border-top: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#1B3A83">
<p class="NormalTableBold">Parameter Name</p>
</td>
<td style="border-top: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#1B3A83">
<p class="NormalTableBold">Description</p>
</td>
<td style="border-top: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#1B3A83">
<p class="NormalTableBold">Example</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">0</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">LogMessageIds</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">Comma separated list of selected Log Messages.</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">3,4,5,6,7</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">1</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">UserName</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">User name logged in to GroundWork Monitor portal.</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">admin</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">2</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">SendNotification</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">Parameter used by action to ensure notification is sent for acknowledgement. Hard coded.</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">nagios_send_notification</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">3</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">PersistentComment</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">Parameter used by action to ensure comment is persistent for acknowledgement. Hard coded.</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">nagios_persistent_comment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">4</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">Comment</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">Comment used for action to acknowledge Nagios alert. Hard coded but includes the data and time ant the end.</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">Acknowledged from console at 09/21/2010 12:34:31 PM</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">5</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">nsca_host</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">Default address of the NSCA host. Hard coded.</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">localhost</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">6</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">user</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">Same as UserName parameter.</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">admin</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">7</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">comment</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">Comment used for the script to submit a passive result. Hard coded but includes the user parameter at the end.</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">Manual_reset_by_admin</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">8</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">host</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">Command separated list of Device Identification values for the selected Log Messages.</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">192.168.0.11, 192.168.0.12</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">9</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">service</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">Name of service for selected event. This is currently hard coded to be snmptraps_last if the application type is SNMPTRAP or otherwise it will be syslog_last. Since this Parameter is only used for an action that is available for either the SNMPTRAP or SYSLOG application types this seems reasonable, if limited.</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">syslog_last</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">10</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">state</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">StateID used for action script to submit a passive service check. Hard coded.</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="NormalTable">0</p>
</td>
</tr>
</table>
<h4>Custom Action Parameters</h4>
<p>At present there is no capability to define custom <span style="font-style: italic;"><i>Action Parameter</i></span> that are supplied to <span style="font-style: italic;"><i>Actions</i></span> from the <span style="font-style: italic;"><i>Event Console</i></span> code. Customers are encouraged to use the available APIs in <span style="font-style: italic;"><i>GroundWork Monitor</i></span> to retrieve additional details about <span style="font-style: italic;"><i>Log Messages</i></span>. These APIs are documented in the Bookshelf is list below. Please contact Support if you require additional information about these APIs. We also offer <span style="font-style: italic;"><i>Professional Services</i></span> to those customers interested in extending <span style="font-style: italic;"><i>GroundWork Monitor</i></span> with actions but who do not feel comfortable performing the work themselves.</p>
<p><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>Note:</b></font></span> For script based actions,order of the arguments passed depends on order in the <span style="font-style: italic;"><i>ActionParameter</i></span> table for that action.</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1"><span style="font-style: italic;"><i>Web Services</i></span> - <a href="developer_webservicesapi.htm">DEVELOPER REFERENCE&gt;API Documentation&gt;Web Services API</a></p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><span style="font-style: italic;"><i>Configuration</i></span> - <a href="developer_perlapimonarch.htm">DEVELOPER REFERENCE&gt;API Documentation&gt;Perl API Monarch</a></p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><span style="font-style: italic;"><i>Foundation Perl</i></span> - <a href="developer_perlapi.htm">DEVELOPER REFERENCE&gt;API Documentation&gt;Perl API</a></p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><span style="font-style: italic;"><i>Foundation PHP</i></span> - <a href="developer_foundationphpapi.htm">DEVELOPER REFERENCE&gt;API Documentation&gt;Foundation PHP API</a></p>
</li>
</ul>
<h4>Configuring Script Based Actions in the Event Console</h4>
<p><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>Note:</b></font></span> Starting with <span style="font-style: italic;"><i>GroundWork Monitor</i></span> 6.5 all custom application types should include two dynamic properties <span class="Code">UpdatedBy</span> and <span class="Code">Comments</span> to store the user comments. Below is a table of valid action parameters.</p>
<p><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>Note:</b></font></span> Any script errors will be shown in the <span style="font-style: italic;"><i>Event Console</i></span> as a popup message, when the user clicks on a script based action from the action menu.</p>
<h5>Step 1 - Login and Define an Action Menu Name</h5>
<p>Login to the <span style="font-style: italic;"><i>GWCollageDB</i></span> schema in the database. Apply the following action table script. The <span style="font-style: italic;"><i>Name</i></span> field will be displayed in the <span style="font-weight: bold; font-style: italic;"><i><b>Action</b></i></span> menu in the <span style="font-style: italic;"><i>Event Console</i></span>. This field can contain any text and should describe the action.</p>
<p class="CodeGroup">INSERT INTO Action (ActionTypeID,Name,Description) values((SELECT ActionTypeID FROM ActionType WHERE Name = "SCRIPT_ACTION"),"Invoke my script","Invoke a script for the selected message");</p>
<h5>Step 2 - Configuring the Action Property</h5>
<p>Apply the following script on the <span style="font-style: italic;"><i>actionPropert</i></span>y table. <span style="font-style: italic;"><i>Name</i></span> is a constant ”Script” for serverside script. <span style="font-style: italic;"><i>Value</i></span> is the path of the shellscript.</p>
<p class="CodeGroup">INSERT INTO ActionProperty ( ActionID, Name, Value)</p>
<p class="CodeGroup">VALUES( (SELECT ActionID FROM Action WHERE Name = "Invoke my script"), "Script", "/usr/local/groundwork/foundation/scripts/ my_script.sh");</p>
<p><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>Note:</b></font></span> Make sure the shell script has the execute privilege for the <span style="font-style: italic;"><i>nagios</i></span> user.</p>
<h5>Step 3 - Map the Action to the Application Type</h5>
<p>Apply the following script on the <span style="font-style: italic;"><i>ApplicationAction</i></span>.</p>
<p class="CodeGroup">INSERT INTO ApplicationAction ( ApplicationTypeID, ActionID)</p>
<p class="CodeGroup">VALUES ((SELECT ApplicationTypeID FROM ApplicationType WHERE Name = "NAGIOS"), (SELECT ActionID FROM Action WHERE Name = "Invoke my script"));</p>
<h5>Step 4 - Configure Action Parameters</h5>
<p>These are the command line arguments. Apply the following script on the <span style="font-style: italic;"><i>ActionParameter</i></span> table. <span style="font-style: italic;"><i>Name</i></span> and <span style="font-style: italic;"><i>value</i></span> are the same. Parameters available from the console include:</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">LogMessageIds - LogMessageIds in comma separated text</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">UserName - Login user name</p>
</li>
</ul>
<h5>Script for Action Parameters</h5>
<p class="CodeGroup">INSERT INTO ActionParameter ( ActionID, Name, Value) VALUES ((SELECT ActionID FROM Action WHERE Name = "Invoke my script") &#160;,"LogMessageIds","LogMessageIds");</p>
<p class="CodeGroup">INSERT INTO ActionParameter (ActionID, Name, Value) VALUES ((SELECT ActionID FROM Action WHERE Name = "Invoke my script"),"UserName","UserName");</p>
<p>If multiple messages are selected, the <span style="font-style: italic;"><i>value</i></span> for <span style="font-style: italic;"><i>LogMessageIds</i></span> will be delimited with comma. To get other parameters from the log message, developers can use web service call by passing the <span style="font-style: italic;"><i>LogMessageId</i></span>.</p>
<h4>Configuring HTTP Request Actions in the Event Console</h4>
<h5>Step 1 - Login and Define An Action Menu Name</h5>
<p>Login to <span style="font-style: italic;"><i>GWCollageDB</i></span> schema in the database. Apply the following action table script. The <span style="font-style: italic;"><i>Name</i></span> field will be displayed in the <span style="font-style: italic;"><i>Action</i></span> menu in the <span style="font-style: italic;"><i>Event Console</i></span>. This field can contain any text and should describe the action.</p>
<p class="CodeGroup">INSERT INTO Action (ActionTypeID,Name,Description) values((SELECT ActionTypeID FROM ActionType WHERE Name = "HTTP_REQUEST_ACTION"),"HTTP Post Test","HTTP Post Test");</p>
<h5>Step 2 - Configuring the Action Property</h5>
<p>Apply the following script on the <span style="font-style: italic;"><i>actionProperty</i></span> table. <span style="font-style: italic;"><i>Name</i></span> is a constant <span style="font-style: italic;"><i>URL</i></span> for serverside <span style="font-style: italic;"><i>HTTP Request</i></span>. <span style="font-style: italic;"><i>Value</i></span> is the URL.</p>
<p class="CodeGroup">INSERT INTO ActionProperty (ActionID, Name, Value)</p>
<p class="CodeGroup">VALUES( (SELECT ActionID FROM Action WHERE Name = "HTTP Post Test"), "URL", "http://172.28.113.102:8081/TestHTTPPost/TestServlet");</p>
<p>Set the <span style="font-style: italic;"><i>ReadTimeout</i></span> in secs. <span style="font-style: italic;"><i>ReadTimeout</i></span> sets the number of seconds before a time-out occurs when a read operation does not finish.</p>
<p class="CodeGroup">INSERT INTO ActionProperty (ActionID, Name, Value)</p>
<p class="CodeGroup">VALUES( (SELECT ActionID FROM Action WHERE Name = "HTTP Post Test"), "ReadTimeout", "20");</p>
<p>Set the <span style="font-style: italic;"><i>ConnectionTimeout</i></span> in secs. <span style="font-style: italic;"><i>ConnectionTimeout</i></span> sets the number of seconds before a connection time-out occurs .</p>
<p class="CodeGroup">INSERT INTO ActionProperty (ActionID, Name, Value)</p>
<p class="CodeGroup">VALUES( (SELECT ActionID FROM Action WHERE Name = "HTTP Post Test"), "ConnectionTimeout", "20");</p>
<h5>Step 3 - Map the Action to the Application Type</h5>
<p>Apply the following script on the <span style="font-style: italic;"><i>ApplicationAction</i></span>.</p>
<p class="CodeGroup">INSERT INTO ApplicationAction ( ApplicationTypeID, ActionID)</p>
<p class="CodeGroup">VALUES ((SELECT ApplicationTypeID FROM ApplicationType WHERE Name = "NAGIOS"), (SELECT ActionID FROM Action WHERE Name = "HTTP Post Test"));</p>
<h5>Step 4 - Configure Action Parameters</h5>
<p>These are the request parameters. Apply the following script on the <span style="font-style: italic;"><i>ActionParameter</i></span> table.</p>
<p class="CodeGroup">INSERT INTO ActionParameter (ActionID, Name, Value) VALUES ((SELECT ActionID FROM Action WHERE Name = "HTTP Post Test"),"UserName","UserName");</p>
<p class="CodeGroup">INSERT INTO ActionParameter (ActionID, Name, Value) VALUES ((SELECT ActionID FROM Action WHERE Name = "HTTP Post Test") ,"LogMessageIds","LogMessageIds");</p>
<p>If multiple messages are selected, <span style="font-style: italic;"><i>value</i></span> for <span style="font-style: italic;"><i>LogMessageIds</i></span> will be delimited with comma. To get other parameters from log message, developers can use web service call by passing the <span style="font-style: italic;"><i>LogMessageId</i></span>.</p>
<h4>Configuring Java based API Action in the Event Console</h4>
<p>To implement actions using <span style="font-style: italic;"><i>Java API</i></span>, please refer to <span style="font-style: italic;"><i>NagiosAcknowledgeAction</i></span> (Java class)</p>
<p class="CodeGroup">org.goundwork.foundation.bs.actionNagiosAcknowledgeAction</p>
<div style="width: 100%; position: relative;" id="footer">
<p class="Footer" style="font-size: 7pt; line-height: Normal; margin-top: 6pt; margin-bottom: 4pt;">GroundWork, Inc. ©2011</p>
</div>
<script type="text/javascript" language="JavaScript">
//<![CDATA[
 if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == 'Netscape'))
  document.write("<div id='tooltip' class='WebHelpPopupMenu'><\/div>");
//]]>
</script><script type="text/javascript" language="javascript1.2">
//<![CDATA[
<!--
if (window.writeIntopicBar)
        writeIntopicBar(0);


highlightSearch();
//-->
//]]>
</script>
</body>
</html>
