<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0014)about:internet -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="en-US" />
<meta name="generator" content="Adobe RoboHelp 8" />
<title>GDMA Advanced Features</title>
<link rel="StyleSheet" href="../Bookshelf.css" type="text/css" />
<style type="text/css">
/*<![CDATA[*/
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
-->
/*]]>*/
</style>

<script type="text/javascript" language="JavaScript">
//<![CDATA[
function ehlp_showtip(current,e,text)
{
  if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == 'Netscape'))
  {
    document.tooltip.document.write("<layer bgColor='yellow' style='border:1px solid black;font-size:12px;'>"+ text + "<\/layer>");
    document.tooltip.document.close();
    document.tooltip.left=e.pageX+5;
    document.tooltip.top=e.pageY+5;
    document.tooltip.visibility="show";
  }
}
function ehlp_hidetip()
{
  document.tooltip.visibility="hidden";
}
//]]>
</script>
<script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
        origWidth = innerWidth;
        origHeight = innerHeight;
        onresize = reDo;
}
onerror = null; 
//]]>
</script>
<script type="text/javascript" language="javascript1.2" src="../whmsg_nc.js">
</script>
<script type="text/javascript" language="javascript" src="../whver_nc.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whproxy_nc.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whutils_nc.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whlang_nc.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whtopic_nc.js">
</script>
<script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
        origWidth = innerWidth;
        origHeight = innerHeight;
        onresize = reDo;
}
onerror = null; 
//]]>
</script>
<style type="text/css">
/*<![CDATA[*/
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
-->
/*]]>*/
</style>

<script type="text/javascript" language="javascript1.2" src="../whmsg.js">
</script>
<script type="text/javascript" language="javascript" src="../whver.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whproxy.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whutils.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whlang.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whtopic.js">
</script>
</head>
<body>
<script type="text/javascript" language="javascript1.2">
//<![CDATA[
<!--
if (window.gbWhTopic)
{
        var strUrl = document.location.href;
        var bc = 0;
        var n = strUrl.toLowerCase().indexOf("bc-");
        if(n != -1)
        {
                document.location.href = strUrl.substring(0, n);
                bc = strUrl.substring(n+3);
        }

        if (window.addTocInfo)
        {
        addTocInfo("GROUNDWORK GDMA\nGDMA Advanced Features");
addButton("show",BTN_TEXT,"Show Table of Contents","","","","",0,0,"","","");

        }
        if (window.writeBtnStyle)
                writeBtnStyle();

        if (window.writeIntopicBar)
                writeIntopicBar(1);

        
        

        if (window.setRelStartPage)
        {
        setRelStartPage("../Bookshelf.htm");

                autoSync(0);
                sendSyncInfo();
                sendAveInfoOut();
        }
}
else
        if (window.gbIE4)
                document.location.reload();

//-->
//]]>
</script><script type="text/javascript" language="JavaScript1.2" src="../ehlpdhtm.js">
</script><script type="text/javascript" language="javascript">
//<![CDATA[
document.write("<p  style=\"text-align:right;color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;\">");
AddMasterBreadcrumbs("../Bookshelf.htm", "color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;", "&gt;", "Home", "../Welcome_to_GroundWork_Monitor/index.htm");
document.write("<a style=\"color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;\" href=\"gdma_welcomegdma.htm\">GROUNDWORK GDMA<\/a> &gt; GDMA Advanced Features<\/p>");
//]]>
</script>
<p>&#160;</p>
<h1><a name="MiniTOCBookMark1" id="MiniTOCBookMark1"></a><img src="../Shared_Images/square.gif" alt="square.gif" style="border: none;" width="15" height="15" border="0" /> GroundWork Distributed Monitoring Agent (GDMA)</h1>
<h3 align="right"><a href="../Welcome_to_GroundWork_Monitor/index.htm" title="Topic Home" onmouseover="if ((parseInt(navigator.appVersion) == 4) &amp;&amp; (navigator.appName == 'Netscape')) ehlp_showtip(this,event,'Topic Home')" onmouseout="if ((parseInt(navigator.appVersion) == 4) &amp;&amp; (navigator.appName == 'Netscape')) ehlp_hidetip()"><img src="../Shared_Images/homeicon.gif" alt="Topic Home" title="Topic Home" style="border: none;" width="33" height="27" border="0" /></a> <img src="../Shared_Images/printicon.gif" onclick="window.print()" alt="Print Page" title="Print Page" style="border: none;" width="33" height="27" border="0" /> <a href="mailto:support@groundworkopensource.com?subject=GDMA Advanced Features" title="Send Comments"><img src="../Shared_Images/commentsicon.gif" alt="Send Comments" title="Send Comments" style="border: none;" width="33" height="27" border="0" /></a></h3>
<span class="PageTitle">GDMA Advanced Features</span>
<p align="left">Table&#160;of&#160;Contents:&#160;<a class="dropspot" href="javascript:TextPopup(this)" id="MTHotSpot6802" name="MTHotSpot6802"><span class="MTText">Show</span><span class="MTText" style="display: none;">Hide</span></a></p>
<script type="text/javascript" language="JavaScript1.2">
//<![CDATA[
TextPopupInit('MTHotSpot6802', 'MTPOPUP6802');
//]]>
</script>
<div align="left" class="droptext" id="MTPOPUP6802" style="display: none;">
<ul style="text-align:left; list-style-type: circle;">
<li><a href="#MiniTOCBookMark2">Detailed Installation and Setup</a>
<ul style="list-style-type: circle;">
<li><a href="#MiniTOCBookMark3">Controlling Poller and Spooler Status Messages</a></li>
<li><a href="#MiniTOCBookMark4">Using Fully Qualified Host Names</a></li>
<li><a href="#MiniTOCBookMark5">Checking Multiple Hosts from a Single Linux GDMA Host</a></li>
</ul>
</li>
<li><a href="#MiniTOCBookMark6">Downloading new plugins automatically</a>
<ul style="list-style-type: circle;">
<li><a href="#MiniTOCBookMark7">Enable the Plugin Download Feature</a></li>
<li><a href="#MiniTOCBookMark8">Upload the New Plugin Files</a></li>
<li><a href="#MiniTOCBookMark9">Tell GDMA to Download the plugins:</a></li>
<li><a href="#MiniTOCBookMark10">Plugin Dependencies (UNIX versions)</a></li>
</ul>
</li>
<li><a href="#MiniTOCBookMark11">Working with Powershell</a>
<ul style="list-style-type: circle;">
<li><a href="#MiniTOCBookMark12">Installing Powershell</a></li>
<li><a href="#MiniTOCBookMark13">Loading Example Profile</a></li>
</ul>
</li>
<li><a href="#MiniTOCBookMark14">'Command='line Tricks</a></li>
<li><a href="#MiniTOCBookMark15">Troubleshooting</a>
<ul style="list-style-type: circle;">
<li><a href="#MiniTOCBookMark16">Common Issues</a></li>
<li><a href="#MiniTOCBookMark19">Generating Logs</a></li>
<li><a href="#MiniTOCBookMark20">Running by Hand</a></li>
</ul>
</li>
</ul>
</div>
<h2><a name="MiniTOCBookMark2" id="MiniTOCBookMark2"></a>Detailed Installation and Setup</h2>
<p>If you have used <span style="font-style: italic;"><i>GDMA</i></span> previously, and have it already set up and working, and would like to know how to use the advanced features of the new version, start here.</p>
<h3><a name="MiniTOCBookMark3" id="MiniTOCBookMark3"></a>Controlling Poller and Spooler Status Messages</h3>
<p>The <span style="font-style: italic;"><i>GDMA</i></span> profiles contain services called <span class="Code">gdma_poller</span> and <span class="Code">gdma_spooler</span>. By default, these services will receive status messages from the poller and spooler processes. These messages tell you about how much time the poller is using to perform the checks, and whether that time is excessive. The spooler reports transmission failures, and statistics about how many messages it sent, and if any messages were purged, etc. The state of the services will change, as well, based on whether there is an error to report.</p>
<p>These messages are useful, but can be excessive, especially in large configurations. They should be left on in initial deployments, but after calibration is done, you may wish to curtail their use. or even remove the services. <span style="font-style: italic;"><i>GDMA</i></span> adds some parameters to allow you better control over these messages:</p>
<p style="font-weight: bold; margin-left: 40px;">Poller_Service="gdma_poller"</p>
<p style="margin-left: 40px;">This parameter controls the name of the service to send poller messages under, defaulting to <span class="Code">gdma_poller</span>. You can change this to another service, possibly combining it with the service for <span style="font-style: italic;"><i>Spooler</i></span> messages (<span style="font-style: italic;"><i>Spooler_Service</i></span>) to direct all <span style="font-style: italic;"><i>GDMA</i></span> messages to one service instead of two.</p>
<p style="font-weight: bold; margin-left: 40px;">Poller_Status=On/Off</p>
<p style="margin-left: 40px;">This controls whether the poller generates the status messages at all. If you turn it off, that host will not generate these messages. You should remove the <span class="Code">gdma_poller</span> service from the host in this case.</p>
<p style="font-weight: bold; margin-left: 40px;">Spooler_Service=On/Off/Updates</p>
<p style="margin-left: 40px;">This controls whether the spooler sends status messages, and, if so, when. If it's off, no spooler messages will be sent. If it is on, you will get a message each time the spooler runs, which is every 30 seconds by default. If you set it to Updates, it will send you a message only if there has been an error, or something has changed (such as a recovery from an error). <span style="font-style: italic;"><i>GDMA</i></span> sets this to <span style="font-style: italic;"><i>Updates</i></span> by default.</p>
<p style="font-weight: bold; margin-left: 40px;">Warning_Threshold, Critical_Threshold=(integer percent)</p>
<p style="margin-left: 40px;">Applied to the poller, these control when you will get notified that there is a problem with the poller chewing up more than the indicated percentage of its cycle time to perform a single check. That situation is something you probably want to know about, since it means you may be trying to check too frequently, or to check too many services. Remember, <span style="font-style: italic;"><i>GDMA</i></span> is designed to use very little CPU resources, so it has some built-in waits, and (except in multi-host mode), it actually does not perform checks in parallel. If you are getting close to the limit and you can manage it, you can change these thresholds from their defaults (60 and 80 percent) to cut down on false positives for these services.</p>
<h3><a name="MiniTOCBookMark4" id="MiniTOCBookMark4"></a>Using Fully Qualified Host Names</h3>
<p>If you manage multiple data centers, or if you have domains of systems that you want to use <span style="font-style: italic;"><i>GDMA</i></span> on, and want those systems to report all to the same <span style="font-style: italic;"><i>GroundWork</i></span> server, you may run into a situation where the same short host name is used for more than one host. <span style="font-style: italic;"><i>GroundWork Monitor</i></span> uses <span style="font-style: italic;"><i>Nagios</i></span>, which requires that host names be unique. For <span style="font-style: italic;"><i>GDMA</i></span>, this presents a problem, as the host name is automatically determined on the <span style="font-style: italic;"><i>GDMA</i></span> system, so it is possible to have two systems reporting status, and the <span style="font-style: italic;"><i>GroundWork</i></span> <span>server</span> will only represent them as one.</p>
<p>As long as the domain names differ, however, this can be accommodated by setting up the <span style="font-style: italic;"><i>GDMA</i></span> hosts in <span style="font-style: italic;"><i>GroundWork Monitor</i></span> using fully qualified names. Thus a host like <span class="Code">server1.foo.com</span> can be distinguished from <span class="Code">server1.bar.com</span>, and <span style="font-style: italic;"><i>GroundWork Monitor</i></span> will be able to tell them apart.</p>
<p>To enable this feature, use the parameter <span class="Code">Use_Long_Hostname</span>. Set this parameter to <span class="Code">On</span> in the host external, and change the host name in <span style="font-style: italic;"><i>GroundWork Monitor</i></span> Configuration to be the fully qualified name. This will change the way <span style="font-style: italic;"><i>GDMA</i></span> reports its results for services, and though the first run with the new settings will generate a single spooler messages under the old (short) hostname, subsequent cycles will have the long fully-qualified name used for poller and spooler messages as well.</p>
<h3><a name="MiniTOCBookMark5" id="MiniTOCBookMark5"></a>Checking Multiple Hosts from a Single Linux GDMA Host</h3>
<p>This is an advanced feature that is useful when checking clustered hosts, or simply setting up some lightweight monitoring of nearby hosts from a single <span style="font-style: italic;"><i>Linux</i></span> <span style="font-style: italic;"><i>GDMA</i></span>.</p>
<p>The <span style="font-style: italic;"><i>Linux</i></span> <span style="font-style: italic;"><i>GDMA</i></span> must be installed using the command-line option <span style="font-style: italic;"><i>--multihost 1</i></span></p>
<p>You need to set up a configuration group for all hosts that will be checked in this way, with a specific build directory for the config files</p>
<p>You need to create that build directory, and set permissions.</p>
<h2><a name="MiniTOCBookMark6" id="MiniTOCBookMark6"></a>Downloading new plugins automatically</h2>
<p><span style="font-style: italic;"><i>GDMA</i></span> (2.2.1 and later) with <span style="font-style: italic;"><i>GroundWork Monitor</i></span> (6.4 and later) allows you to download new plugins (or new versions of old plugins) automatically to specific versions of the <span style="font-style: italic;"><i>GDMA</i></span>. The following instructions illustrate how to enable this feature.</p>
<p><span style="font-weight: bold; color: #ff0000;"><font color="red"><b>Note:</b></font></span> This feature is disabled by default.</p>
<h3><a name="MiniTOCBookMark7" id="MiniTOCBookMark7"></a>Enable the Plugin Download Feature</h3>
<ol>
<li>
<p class="Numbering">Edit the file: <span class="CodeInline">/usr/local/groundwork/config/foundation.properties</span></p>
</li>
</ol>
<p style="margin-left: 40px;">change:</p>
<p class="GroupCode2">gdma.plugin.upload.enable=false</p>
<p style="margin-left: 40px;">to:</p>
<p class="GroupCode2">gdma.plugin.upload.enable=true</p>
<p style="margin-left: 40px;">and save the file.</p>
<ol start="2" type="1">
<li class="P-Numbering">
<p class="Numbering">Edit the file: <span class="CodeInline">/usr/local/groundwork/apache2/conf/httpd.conf</span></p>
</li>
</ol>
<p style="margin-left: 40px;">change:</p>
<p class="GroupCode2">#Alias /plugin_download "/usr/local/groundwork/apache2/htdocs/agents/plugin_download"</p>
<p style="margin-left: 40px;">to:</p>
<p class="GroupCode2">Alias /plugin_download "/usr/local/groundwork/apache2/htdocs/agents/plugin_download"</p>
<p style="margin-left: 40px;">and save the file.</p>
<ol start="3">
<li class="P-Numbering">
<p class="Numbering">Restart <span style="font-style: italic;"><i>gwservices</i></span>:</p>
</li>
</ol>
<p style="margin-left: 40px; font-weight: normal;">Run as <span style="font-style: italic;"><i>root</i></span></p>
<p class="GroupCode2">/etc/init.d/groundwork restart gwservices</p>
<ol start="4">
<li class="P-Numbering">
<p class="Numbering">Restart apache:</p>
</li>
</ol>
<p style="margin-left: 40px; font-weight: normal;">Run as <span style="font-style: italic;"><i>root</i></span></p>
<p class="GroupCode2">/etc/init.d/groundwork restart apache</p>
<p style="margin-left: 40px;"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>Note:</b></font></span> This will log off all users.</p>
<h3><a name="MiniTOCBookMark8" id="MiniTOCBookMark8"></a>Upload the New Plugin Files</h3>
<ol>
<li class="P-Numbering">
<p class="Numbering">Go to <span style="font-weight: bold;"><b>Administration</b></span>&gt;<span style="font-weight: bold;"><b>Foundation</b></span>, then select the link <span style="font-weight: bold;"><b>Manage Plugins</b></span>.</p>
</li>
</ol>
<p class="Figure" style="margin-left: 41px;"><img src="Assets/gdma_manageplugins1.png" alt="gdma_manageplugins1.png" style="border: none;" width="721" height="524" border="0" /></p>
<ol start="2">
<li class="P-Numbering">
<p class="Numbering">Click on the <span style="font-weight: bold;"><b>Add</b></span> button in the upload screen:</p>
</li>
</ol>
<p class="Figure" style="margin-left: 41px;"><img src="Assets/gdma_manageplugins2.png" alt="gdma_manageplugins2.png" style="border: none;" width="477" height="312" border="0" /></p>
<ol start="3" type="1">
<li class="P-Numbering">
<p class="Numbering">Choose the platform and architecture that the plugin you are uploading will be used on from the drop-down. If your plugin will work on all the platforms on which you run <span style="font-style: italic;"><i>GDMA</i></span>, choose one of the <span style="font-style: italic;"><i>Multiplatform</i></span> options. If you want to run the plugin on both 32-bit and 64-bit platforms, you will need to upload it twice, once for <span style="font-style: italic;"><i>Multiplatform 32 bit</i></span> and once for <span style="font-style: italic;"><i>Multiplatform 64 bit</i></span>. Generally, however, you will have to upload a different version of a plugin for each platform you want to use it on.</p>
</li>
</ol>
<p class="Numbering" style="margin-left: 40px;">The names of the plugins for different operating systems or bit widths can be the same, though you will need to keep them in separate, well-defined places on your source machine to keep track of which copy is for which platform. The uploaded plugins will be stored in separate directories on the server, so there will be no confusion there. For instance, a plugin written as a shell script might work on just <span style="font-style: italic;"><i>Linux</i></span> but for both 32 bit and 64 bit versions of that OS, so you would upload it once for <span style="font-style: italic;"><i>Linux Intel 32 bit</i></span> and once for <span style="font-style: italic;"><i>Linux Intel 64 bit</i></span>.</p>
<ol start="4" type="1">
<li class="P-Numbering">
<p class="Numbering">Click <span style="font-weight: bold;"><b>Upload</b></span>.</p>
</li>
<li class="P-Numbering">
<p class="Numbering">To check if your plugins are present, click the <span style="font-weight: bold;"><b>Home</b></span> icon in the lower-left corner of the <span style="font-style: italic;"><i>Add Plugin</i></span> box. Or click <span style="font-weight: bold;"><b>Foundation</b></span> in the menu, and then click the <span style="font-weight: bold;"><b>Manage Plugins</b></span> link again. You should see a list of uploaded plugins:</p>
</li>
</ol>
<p class="Figure" style="margin-left: 41px;"><img src="Assets/gdma_pluglist.png" alt="gdma_pluglist.png" style="border: none;" width="869" height="186" border="0" /></p>
<ol start="6" type="1">
<li class="P-Numbering">
<p class="Numbering">In <span style="font-style: italic;"><i>GroundWork Monitor</i></span> 6.5, if you need to update a plugin (keeping the same name, but changing its content), you will need to delete and re-add it on each platform. The extra step involved in a delete/add as opposed to just re-uploading will be addressed in a future release.</p>
</li>
</ol>
<h3><a name="MiniTOCBookMark9" id="MiniTOCBookMark9"></a>Tell GDMA to Download the plugins:</h3>
<ol>
<li class="P-Numbering">
<p class="Numbering">Go to <span style="font-weight: bold;"><b>Configuration</b></span>&gt;<span style="font-weight: bold;"><b>Hosts</b></span>, and expand the <span style="font-weight: bold;"><b>Host Externals</b></span> section to modify a host external for the hosts that will be downloading plugins. Alternatively you can enable this for individual hosts by opening the host external for the specific host you want, but changing the host external for all like hosts will make it the downloads apply to many hosts at once. You may wish to try this on one host, and make sure you have it right before rolling out to all hosts of a given type.</p>
</li>
</ol>
<p class="Numbering" style="margin-left: 40px;"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>Note:</b></font></span> Only modify host externals for hosts running <span style="font-style: italic;"><i>GDMA</i></span> (2.2.1 or later). Older versions will error out if these parameters are placed in the host externals.</p>
<ol start="2">
<li class="P-Numbering">
<p class="Numbering">Add the following lines to the selected host external:</p>
</li>
</ol>
<p class="GroupCode2">Enable_Poller_Plugins_Upgrade = "On"</p>
<p class="GroupCode2">Poller_Plugins_Upgrade_URL="http://&lt;Server Name&gt;/foundation-webapp/restwebservices/pluginUpdates/findUpdates"</p>
<p class="Numbering" style="margin-left: 40px;">where <span style="font-style: italic;"><i>&lt;Server Name&gt;</i></span> is the resolvable name of the <span style="font-style: italic;"><i>GroundWork</i></span> server from the point of view of the <span style="font-style: italic;"><i>GDMA</i></span>.</p>
<p class="Numbering" style="margin-left: 40px;"><span style="font-weight: bold; color: #ff0000;"><font color="red"><b>Note:</b></font></span> You may also use an https URL if you have configured <span style="font-style: italic;"><i>GroundWork Monitor</i></span> to use <span style="font-style: italic;"><i>HTTPS</i></span>, e.g:</p>
<p class="Numbering" style="margin-left: 40px;"><span class="CodeInline">Poller_Plugins_Upgrade_URL="https://&lt;Server Name&gt;/foundation-webapp/restwebservices/pluginUpdates/findUpdates"</span></p>
<ol start="3" type="1">
<li class="P-Numbering">
<p class="Numbering">Save the host external and choose <span style="font-style: italic;"><i>Replace existing externals</i></span> or <span style="font-style: italic;"><i>Merge with existing externals</i></span> as appropriate.</p>
</li>
<li class="P-Numbering">
<p class="Numbering">Go to <span style="font-weight: bold;"><b>Configuration</b></span>&gt;<span style="font-weight: bold;"><b>Control</b></span>, and select <span style="font-weight: bold;"><b>Build Externals</b></span>.</p>
</li>
</ol>
<p>Plugins will now be downloaded to the <span style="font-style: italic;"><i>GDMA</i></span> <span style="font-style: italic;"><i>libexec</i></span> directory, and will be flagged executable by the user running the <span style="font-style: italic;"><i>GDMA</i></span> process ("gdma" by default). Existing plugins with the same file name will be replaced.</p>
<h3><a name="MiniTOCBookMark10" id="MiniTOCBookMark10"></a>Plugin Dependencies (UNIX versions)</h3>
<p>You may want to use a plugin that depends on a library that <span style="font-style: italic;"><i>GroundWork Monitor</i></span> does not supply with the <span style="font-style: italic;"><i>GDMA</i></span>. For <span style="font-style: italic;"><i>Windows</i></span> systems, this is not usually the case, since though one could characterize a .dll file as a dependency, most <span style="font-style: italic;"><i>Windows</i></span> plugins are either vbscript (executed by <span class="Code">cscript.exe</span>), powershell (executed by <span class="Code">powershell.exe</span>) or <span style="font-style: italic;"><i>Windows</i></span> <span class="Code">.bat</span> batch files, executed by <span class="Code">cmd.exe</span>. If you need to download a <span class="Code">.dll</span> file to <span style="font-style: italic;"><i>Windows</i></span>, you should simply add it as you would a plugin, and it will be copied to the <span style="font-style: italic;"><i>libexec</i></span> subdirectory of the <span style="font-style: italic;"><i>GDMA</i></span>, where it will be available for the plugin.</p>
<p>If you are using the <span style="font-style: italic;"><i>UNIX</i></span> <span style="font-style: italic;"><i>GDMA</i></span> (<span style="font-style: italic;"><i>Linux</i></span>, <span style="font-style: italic;"><i>Solaris</i></span> or <span style="font-style: italic;"><i>AIX</i></span>), you may have access to the library you need. If you have this library (typically, one or more <span style="font-style: italic;"><i>.so</i></span> files) available, you can transfer it to the <span style="font-style: italic;"><i>GDMA</i></span> host into the <span style="font-style: italic;"><i>groundwork/common/lib</i></span> directory. Simply perform the above procedure, uploading the dependency files first, choosing platform and architecture as you would for the plugin. Then, when you have the library (or libraries) uploaded, upload the plugin, selecting the libraries in the dependency screen:</p>
<p class="Figure"><img src="Assets/gdma_depsupload.png" alt="gdma_depsupload.png" style="border: none;" width="788" height="310" border="0" /></p>
<p>In this example, the <span style="font-style: italic;"><i>test001.so</i></span> library is needed by the new <span class="Code">check_my_app</span> plugin. Selecting the dependency when the plugin is loaded identifies <span style="font-style: italic;"><i>test001.so</i></span> as a dependency, which goes to the <span style="font-style: italic;"><i>groundwork/common/lib</i></span> directory, and <span class="Code">check_my_app</span> as a plugin, which gets placed in the <span style="font-style: italic;"><i>groundwork/nagios/libexec</i></span> directory.</p>
<p>If you update an existing plugin, the new version will simply overwrite the old. No special action will be taken to preserve the original plugin.</p>
<p>Plugins are downloaded only as needed. The system will check to see if the plugins are new, and have a different ND5 sum prior to downloading, so there is no downside to keeping a large number of plugins and dependencies on the <span style="font-style: italic;"><i>GroundWork</i></span> server.</p>
<p>You may remove a plugin or dependency (or several at once) at any time from the <span style="font-style: italic;"><i>Manage Plugins</i></span> screen, by selecting the files to be removed and clicking the <span style="font-style: italic;"><i>X</i></span> button.</p>
<h2><a name="MiniTOCBookMark11" id="MiniTOCBookMark11"></a>Working with Powershell</h2>
<p>The <span style="font-style: italic;"><i>GDMA</i></span> for <span style="font-style: italic;"><i>Windows</i></span> can be used to run <span style="font-style: italic;"><i>Windows</i></span> <span style="font-style: italic;"><i>Powershell</i></span> <span style="font-style: italic;"><i>Commandlets</i></span>, or small powershell programs that you write or modify to return results that can be interpreted as status and performance data by <span style="font-style: italic;"><i>GroundWork Monitor</i></span>. Especially in 64-bit environments, this is quite a powerful way to monitor your Windows systems.</p>
<p><span style="font-style: italic;"><i>GroundWork Monitor</i></span> (6.4 and later) and <span style="font-style: italic;"><i>GDMA</i></span> (2.2.1 and later) come with some sample <span style="font-style: italic;"><i>Powershell</i></span> scripts that leverage <span style="font-style: italic;"><i>commandlets</i></span> to check some otherwise difficult-to-access data about 64-bit <span style="font-style: italic;"><i>Windows</i></span> systems. This section will take you through getting <span style="font-style: italic;"><i>GDMA</i></span> set up to run these examples.</p>
<h3><a name="MiniTOCBookMark12" id="MiniTOCBookMark12"></a>Installing Powershell</h3>
<p>Before you can run the <span style="font-style: italic;"><i>Powershell</i></span> plugins, you must have <span style="font-style: italic;"><i>Powershell</i></span> installed and working on your <span style="font-style: italic;"><i>Windows</i></span> system. Please see <span class="CodeInline">http://technet.microsoft.com/en-us/library/ee692944.aspx</span> for information on getting <span style="font-style: italic;"><i>Powershell</i></span> running.</p>
<p>In particular you MUST enable <span style="font-style: italic;"><i>Powesershell</i></span> to run scripts. To do this, launch each version of the <span style="font-style: italic;"><i>Powershell</i></span> interpreter on your system (both the 64 bit <span style="font-style: italic;"><i>Windows Powershell</i></span> and the 32-bit <span style="font-style: italic;"><i>Windows Powershell (x86)</i></span>), and type:</p>
<p class="CodeGroup">Set-ExecutionPolicy RemoteSigned</p>
<h3><a name="MiniTOCBookMark13" id="MiniTOCBookMark13"></a>Loading Example Profile</h3>
<p>You will notice a new <span style="font-style: italic;"><i>GDMA</i></span> profile; the host profile <span class="Code">gdma-22-windows-host.xml</span> contains the service profile <span class="Code">gdma-22-powershell</span>, which in turn contains three services:</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1"><span class="Code">gdma_22_powershell_getcluster</span>: A plugin to get the status of a <span style="font-style: italic;"><i>Microsoft</i></span> cluster server, if it is installed</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><span class="Code">gdma_22_powershell_getcounter</span>: A generic plugin that gets any perf counter, but must be modified before it will be useful</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><span class="Code">gdma_22_powershell_getwmi</span>: An example of calling a <span style="font-style: italic;"><i>WMI</i></span> counter (CPU in this case) from a <span style="font-style: italic;"><i>Powershell</i></span> script</p>
</li>
</ul>
<p>The modification of these example scripts in to more useful or specific uses is ongoing at <span style="font-style: italic;"><i>GroundWork</i></span>, and will doubtless be the source for many more profiles. For the moment, however, these are a starting point.</p>
<p>To get these examples loaded:</p>
<ol>
<li class="P-Numbering">
<p class="Numbering">Go to <span style="font-weight: bold;"><b>Configuration</b></span>&gt;<span style="font-weight: bold;"><b>Profiles</b></span>.</p>
</li>
<li class="P-Numbering">
<p class="Numbering">Click on <span style="font-weight: bold;"><b>Profile Importer</b></span>.</p>
</li>
<li class="P-Numbering">
<p class="Numbering">Select <span class="Code">gdma-22-windows-host.xml</span> from the list.</p>
</li>
<li class="P-Numbering">
<p class="Numbering">Select <span style="font-weight: bold;"><b>Import</b></span>.</p>
</li>
</ol>
<p>This will result in a host profile, which you can them apply to a host. Make this the host on which you have installed and enabled <span style="font-style: italic;"><i>Powershell</i></span> previously. Once you commit, and build it's externals these services will be active.</p>
<p class="Figure"><img src="Assets/gdma_pwrshlsnippet.png" alt="gdma_pwrshlsnippet.png" style="border: none;" width="223" height="112" border="0" /></p>
<p>Of course, it's normal not to have <span style="font-style: italic;"><i>OK</i></span> status on an unconfigured service, so <span class="Code">gdma_22_powershell_getcounter</span> will be in warning until you modify the plugin and give it something to monitor. Also, unless you have <span style="font-style: italic;"><i>Microsoft Cluster Server</i></span> loaded on the host, you will not get logical output from <span class="Code">gdma_22_powershell_getcluster</span>.</p>
<p><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>Note:</b></font></span>The service externals are not generic, and may need to be modified to work with your system.</p>
<p>The service externals assume the default location of <span style="font-style: italic;"><i>Powershell</i></span> and <span style="font-style: italic;"><i>GDMA</i></span>, for example:</p>
<p class="CodeGroup">Check_gdma_powershell_getcounter[1]_Command="c:\windows\system32\WindowsPowerShell\v1.0\powershell.exe 'C:\Progra~2\groundwork\gdma\libexec\v3\getCounter.ps1'"</p>
<p>explicitly calls <span class="Code">powershell.exe</span> in the default location, and passes it the full, no-spaces version of the path to the <span style="font-style: italic;"><i>Powershell</i></span> script to run. The quoting used is standard, and can be used in most cases. See <span style="font-weight: bold;"><b>'Command='Line Tricks</b></span> below.</p>
<p>If you instal <span style="font-style: italic;"><i>GDMA</i></span> in a different directory, you will need to modify this path. The short form <span style="font-style: italic;"><i>Progra~2</i></span> expands out to <span style="font-style: italic;"><i>Program Files (x86)</i></span>, which is where <span style="font-style: italic;"><i>GDMA</i></span>, a 32-bit program, is installed in 64-bit <span style="font-style: italic;"><i>Windows</i></span> by default.</p>
<h2><a name="MiniTOCBookMark14" id="MiniTOCBookMark14"></a>'Command='line Tricks</h2>
<p>In some cases you may want to execute a check command that does not fall under the usual formatting rules. In particular if you want to make your own plugins, or integrate a plugin that you download off of the Internet, you may need to adjust the format of the command line in the <span style="font-style: italic;"><i>Service External</i></span> you use to control the plugin execution.</p>
<p>The normal way <span style="font-style: italic;"><i>GDMA</i></span> plugins are executed is something like this:</p>
<p class="Figure"><img src="Assets/gdma_commandline.png" alt="gdma_commandline.png" style="border: none;" width="1131" height="95" border="0" /></p>
<p>The entire command line is enclosed in double quotes. Within this enclosure, there are two main sections. The first is the executing program (<span class="Code">cscript.exe</span>, in this case, but in the <span style="font-style: italic;"><i>Powershell</i></span> example in the previous section, it was <span class="Code">powershell.exe</span>). Any arguments to the executing program come next. If you are using <span style="font-style: italic;"><i>UNIX</i></span>, the executing program is implicit: the command shell. In that case you can stop there, for example:</p>
<p class="CodeGroup">Check_gdma_linux_mem[1]_Command="check_mem.pl -F -w 20 -c 10"</p>
<p>In <span style="font-style: italic;"><i>Windows</i></span>, as well, you can run compiled programs as plugins in this way without any further specifications. Just be sure to include the enclosing double quotes.</p>
<p>The second main part is the interpreted plugin, with its full path, encased in single quotes. You can usually use the <span class="Code">$Plugin_Directory$</span> macro, and this will be replaced with the location of the plugins in your <span style="font-style: italic;"><i>GDMA</i></span> installation. Note that you can have subdirectories off of this mail location, for example many of the <span style="font-style: italic;"><i>vbscript</i></span> plugins we supply are stored in the <span style="font-style: italic;"><i>v2</i></span> subdirectory. <span style="font-style: italic;"><i>Powershell</i></span> plugins are stored in <span style="font-style: italic;"><i>v3</i></span> by convention.</p>
<p>After the single-quoted full path to the interpreted plugin, and before the terminating double quote mark, you can supply any arguments to the interpreted plugin. The <span style="font-style: italic;"><i>GDMA</i></span> will understand bare arguments, arguments specified with a dash "-", or with a slash "/"</p>
<h2><a name="MiniTOCBookMark15" id="MiniTOCBookMark15"></a>Troubleshooting</h2>
<h3><a name="MiniTOCBookMark16" id="MiniTOCBookMark16"></a>Common Issues</h3>
<h4><a name="MiniTOCBookMark17" id="MiniTOCBookMark17"></a>Time sync</h4>
<p>Many installations do not properly synchronize time with <span style="font-style: italic;"><i>NTP</i></span>. This is particularly an issue with Virtual environments, where time slicing may introduce latency and drift to otherwise stable time signatures. For this reason, <span style="font-style: italic;"><i>GDMA</i></span> has been made <span style="font-style: italic;"><i>tolerant</i></span> of time drift. In the setup instructions, the file <span class="Code">/usr/local/groundwork/config/bronx.cfg</span> was modified to allow up to 900 seconds latency and 90 seconds <span style="font-style: italic;"><i>imminence</i></span>, or future timestamps, on incoming messages.</p>
<p>If the time synchronization is sufficiently off to be outside this 16.5 minute envelope, the <span style="font-style: italic;"><i>GroundWork</i></span> server will reject the incoming message. To correct this situation, you must either:</p>
<ol>
<li class="P-Numbering">
<p class="Numbering">Synchronize the time on all monitored systems and the <span style="font-style: italic;"><i>GroundWork</i></span> server, or</p>
</li>
<li class="P-Numbering">
<p class="Numbering">Widen the envelope by changing the parameters in <span class="Code">bronx.cfg</span></p>
</li>
</ol>
<p style="margin-left: 40px;">It is highly recommended that the time be synchronized.</p>
<p style="margin-left: 40px;"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>Note:</b></font></span> The <span style="font-style: italic;"><i>GroundWork Monitor</i></span> version of <span class="Code">send_nsca</span> supplied with <span style="font-style: italic;"><i>GDMA</i></span> allows for the sending of <span style="font-style: italic;"><i>old</i></span> time stamps, which are the time stamps associated with when the check was run, not when the spooler has sent the data, which is potentially much later. This allows the system to accurately process performance data for checks that have been spooled, potentially for long periods.</p>
<h4><a name="MiniTOCBookMark18" id="MiniTOCBookMark18"></a>Encryption mismatch</h4>
<p>A common security requirement that <span style="font-style: italic;"><i>GroundWork Monitor</i></span> supports is the encryption of data sent over the <span style="font-style: italic;"><i>NSCA</i></span> channel. By default, however, <span style="font-style: italic;"><i>GDMA</i></span> is installed with encryption turned off, which is also the default on the <span style="font-style: italic;"><i>GroundWork</i></span> server. Thus it is possible to have an encryption mismatch, for example, if you enable encryption on the <span style="font-style: italic;"><i>GroundWork</i></span> server (in <span class="Code">bronx.cfg</span>), and fail to enable it on the <span style="font-style: italic;"><i>GDMA</i></span> in <span class="Code">send_nsca.cfg</span>. Always make sure these files are consistent between <span style="font-style: italic;"><i>GDMA</i></span> (<span class="Code">send_nsca.cfg</span>) and <span style="font-style: italic;"><i>GroundWork</i></span> (<span class="Code">bronx.cfg</span>).</p>
<p style="margin-left: 40px;"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>Tip:</b></font></span> One way to manage this situation is to set up <span style="font-style: italic;"><i>GDMA</i></span> to use an alternate <span class="Code">send_nsca.cfg</span> file. This file can be downloaded to the <span style="font-style: italic;"><i>GDMA</i></span> as if it were a plugin, and specified for use via the host external using the <span style="font-style: italic;"><i>GDMA</i></span> parameter called <span class="Code">Spooler_NSCA_Config</span>. For example, if you create a file called <span class="Code">send_nsca_gdma_encrypted.cfg</span>, and you se it up for download as a plugin for <span style="font-style: italic;"><i>Linux</i></span>, it will be placed on the <span style="font-style: italic;"><i>Linux</i></span> <span style="font-style: italic;"><i>GDMA</i></span> in <span class="Code">/usr/local/groundwork/gdma/tmp/send_nsca_gdma_encrypted.cfg</span>. That means you could set up the <span style="font-style: italic;"><i>GDMA</i></span> to start using this file at the same time you switch the <span style="font-style: italic;"><i>GroundWork</i></span> server to use encryption, just by changing <span style="font-style: italic;"><i>Spooler_NSCA_Config="</i></span><span class="Code">/usr/local/groundwork/gdma/tmp/send_nsca_gdma_encrypted.cfg</span>".</p>
<h3><a name="MiniTOCBookMark19" id="MiniTOCBookMark19"></a>Generating Logs</h3>
<p>In general, <span style="font-style: italic;"><i>GDMA</i></span> will not output much in the way of log information unless you specify that it should do so. If you want logs, you can use the <span class="Code">Enable_Local_Logging</span> parameter to output log data to the file specified in the <span class="Code">Logdir</span> parameter, which is the log subdirectory by default. You should not leave this enabled permanently, as there is no facility to remove old logs.</p>
<h3><a name="MiniTOCBookMark20" id="MiniTOCBookMark20"></a>Running by Hand</h3>
<p>You can also generate useful output (the same as what gets placed in the log) by running the <span style="font-style: italic;"><i>GDMA</i></span> Poller and/or Spooler by hand.</p>
<p>In <span style="font-style: italic;"><i>Windows</i></span>, open a command shell, and type:</p>
<p class="CodeGroup">cd \Program Files\groundwork\gdma\bin</p>
<p class="CodeGroup">gdma_poll.exe -i -d2 -x</p>
<p>As the <span style="font-style: italic;"><i>Windows</i></span> <span style="font-style: italic;"><i>GDMA</i></span> can be installed in alternate locations, you may need to enter a different path. For example in 64-bit <span style="font-style: italic;"><i>Windows</i></span>, <span style="font-style: italic;"><i>GDMA</i></span> is installed in <span class="Code">\Program Files (x86)\groundwork\gdma</span> by default.</p>
<p>This will give you output similar to the following:</p>
<p class="CodeGroup">C:\Users\Administrator&gt;cd "\Program Files (x86)\groundwork\gdma"\bin</p>
<p class="CodeGroup">&#160;</p>
<p class="CodeGroup">C:\Program Files (x86)\groundwork\gdma\bin&gt;gdma_poll.exe -i -d2 -x</p>
<p class="CodeGroup">Getting http://gdma-autohost/gdma/gwmon_wingdma64-qa-2.cfg to C:\Program Files (x86)\groundwork\gdma\config\gwmon_wingdma64-qa-2.cfg(timeout 10)</p>
<p class="CodeGroup">Attempting to get http://gdma-autohost/gdma/gwmon_wingdma64-qa-2.cfg to C:\Program Files (x86)\groundwork\gdma\config\gwmon_wingdma64-qa-2.cfg (timeout is set to 10)</p>
<p class="CodeGroup">get_gdma_cfg_file_using_http: config file modified</p>
<p class="CodeGroup">&#160;</p>
<p class="CodeGroup">Retrieved content for http://gdma-autohost/gdma/gwmon_wingdma64-qa-2.cfg</p>
<p class="CodeGroup">&#160;</p>
<p class="CodeGroup">Checking autoconfig file for a change.</p>
<p class="CodeGroup">Reloading config file</p>
<p class="CodeGroup">Sucessfully read host config file</p>
<p class="CodeGroup">Host config file syntax is ok.</p>
<p class="CodeGroup">Spooling poller startup message</p>
<p class="CodeGroup">spool_startup_info: Poller 2.2.2 started at Wednesday January 12 11:34:25 2011</p>
<p class="CodeGroup">Pushed result into the buffer: 0 &#160;&#160;&#160;&#160;&#160;&#160;&#160;0 &#160;&#160;&#160;&#160;&#160;&#160;1294860865 &#160;&#160;&#160;&#160;&#160;wingdma64-qa-2 &#160;gdma_poller &#160;&#160;&#160;&#160;0 &#160;&#160;Poller 2.2.2 started at Wednesday January 12 11:34:25 2011</p>
<p class="CodeGroup">Executing poller normal mode.</p>
<p class="CodeGroup">ConfigFile_Pull_Cycle = 1</p>
<p class="CodeGroup">ConfigPull_Timeout = 10</p>
<p class="CodeGroup">Enable_Auto = On</p>
<p class="CodeGroup">Enable_Local_Logging = on</p>
<p class="CodeGroup">GDMAConfigDir = gdma</p>
<p class="CodeGroup">GDMA_Auto_Host = gdma-autohost</p>
<p class="CodeGroup">GDMA_Auto_Service = gdma_auto</p>
<p class="CodeGroup">GDMA_Multihost = off</p>
<p class="CodeGroup">HostSequenceNumber = 10</p>
<p class="CodeGroup">Logdir = C:\Program Files (x86)\groundwork\gdma\log\</p>
<p class="CodeGroup">Max_Concurrent_Hosts = 1</p>
<p class="CodeGroup">NumHostsInInstallation = 11</p>
<p class="CodeGroup">Poller_Plugin_Directory = C:\Program Files (x86)\groundwork\gdma\libexec\</p>
<p class="CodeGroup">Poller_Plugin_Timeout = 45</p>
<p class="CodeGroup">Poller_Proc_Interval = 600</p>
<p class="CodeGroup">Poller_Pull_Failure_Interval = 86400</p>
<p class="CodeGroup">Poller_Service = gdma_poller</p>
<p class="CodeGroup">Poller_Status = Off</p>
<p class="CodeGroup">Spooler_Batch_Size = 20</p>
<p class="CodeGroup">Spooler_Max_Retries = 10</p>
<p class="CodeGroup">Spooler_NSCA_Config = C:\Program Files (x86)\groundwork\gdma\config\send_nsca.cfg</p>
<p class="CodeGroup">Spooler_NSCA_Port = 5667</p>
<p class="CodeGroup">Spooler_NSCA_Program = C:\Program Files (x86)\groundwork\gdma\bin\send_nsca.exe</p>
<p class="CodeGroup">Spooler_NSCA_Timeout = 5</p>
<p class="CodeGroup">Spooler_Proc_Interval = 30</p>
<p class="CodeGroup">Spooler_Retention_Time = 900</p>
<p class="CodeGroup">Spooler_Service = gdma_spooler</p>
<p class="CodeGroup">Spooler_Status = Updates</p>
<p class="CodeGroup">Target_Server = http://gdma-autohost</p>
<p class="CodeGroup">wingdma64-qa-2_Check_gdma_powershell_getcluster[1]_Command = c:\windows\system32\WindowsPowerShell\v1.0\powershell.exe C:\Progra~2\groundwork\gdma\libexec\v3\getCluster.ps1</p>
<p class="CodeGroup">&#160;...</p>
<p>There are several diagnostic steps that <span style="font-style: italic;"><i>GDMA</i></span> goes through each time it runs. Errors in the retrieval of the config file, or with a syntax error in that file, will be presented near the top of this output. Any problems running the checks will appear in the last sections.</p>
<p>If all of that is working ok, then you might try running the spooler:</p>
<p class="CodeGroup">C:\Program Files (x86)\groundwork\gdma\bin&gt;gdma_spool_processor.exe -i -d2 -x</p>
<p class="CodeGroup">Checking config file:C:\Program Files (x86)\groundwork\gdma\config\gwmon_wingdma64-qa-2.cfg for a change.</p>
<p class="CodeGroup">Checking config file:C:\Program Files (x86)\groundwork\gdma\config\gdma_auto.conf for a change.</p>
<p class="CodeGroup">Reloading config files.</p>
<p class="CodeGroup">Sucessfully read host config file</p>
<p class="CodeGroup">Host config file syntax is ok.</p>
<p class="CodeGroup">The configuration file contains:</p>
<p class="CodeGroup">ConfigFile_Pull_Cycle = 1</p>
<p class="CodeGroup">ConfigPull_Timeout = 10</p>
<p class="CodeGroup">Enable_Auto = off</p>
<p class="CodeGroup">Enable_Local_Logging = on</p>
<p class="CodeGroup">GDMAConfigDir = gdma</p>
<p class="CodeGroup">GDMA_Auto_Host = gdma-autohost</p>
<p class="CodeGroup">GDMA_Auto_Service = gdma_auto</p>
<p class="CodeGroup">GDMA_Multihost = off</p>
<p class="CodeGroup">HostSequenceNumber = 10</p>
<p class="CodeGroup">Logdir = C:\Program Files (x86)\groundwork\gdma\log\</p>
<p class="CodeGroup">Max_Concurrent_Hosts = 1</p>
<p class="CodeGroup">NumHostsInInstallation = 11</p>
<p class="CodeGroup">Poller_Plugin_Directory = C:\Program Files (x86)\groundwork\gdma\libexec\</p>
<p class="CodeGroup">Poller_Plugin_Timeout = 45</p>
<p class="CodeGroup">Poller_Proc_Interval = 600</p>
<p class="CodeGroup">Poller_Pull_Failure_Interval = 86400</p>
<p class="CodeGroup">Poller_Service = gdma_poller</p>
<p class="CodeGroup">Poller_Status = Off</p>
<p class="CodeGroup">Spooler_Batch_Size = 20</p>
<p class="CodeGroup">Spooler_Max_Retries = 10</p>
<p class="CodeGroup">Spooler_NSCA_Config = C:\Program Files (x86)\groundwork\gdma\config\send_nsca.cfg</p>
<p class="CodeGroup">Spooler_NSCA_Port = 5667</p>
<p class="CodeGroup">Spooler_NSCA_Program = C:\Program Files (x86)\groundwork\gdma\bin\send_nsca.exe</p>
<p class="CodeGroup">Spooler_NSCA_Timeout = 5</p>
<p class="CodeGroup">Spooler_Proc_Interval = 30</p>
<p class="CodeGroup">Spooler_Retention_Time = 900</p>
<p class="CodeGroup">Spooler_Service = gdma_spooler</p>
<p class="CodeGroup">Spooler_Status = Updates</p>
<p class="CodeGroup">Target_Server = http://gdma-autohost</p>
<p class="CodeGroup">wingdma64-qa-2_Check_gdma_powershell_getcluster[1]_Command = c:\windows\system32\WindowsPowerShell\v1.0\powershell.exe C:\Progra~2\groundwork\gdma\libexec\v3\getCluster.ps1</p>
<p class="CodeGroup">wingdma64-qa-2_Check_gdma_powershell_getcluster[1]_Enable = ON</p>
<p class="CodeGroup">wingdma64-qa-2_Check_gdma_powershell_getcluster[1]_Check_Interval = 1</p>
<p class="CodeGroup">wingdma64-qa-2_Check_gdma_powershell_getcluster[1]_Service = gdma_22_powershell_getcluster</p>
<p class="CodeGroup">wingdma64-qa-2_Check_gdma_powershell_getcounter[1]_Command = c:\windows\system32\WindowsPowerShell\v1.0\powershell.exe C:\Progra~2\groundwork\gdma\libexec\v3\getCounter.ps1</p>
<p class="CodeGroup">wingdma64-qa-2_Check_gdma_powershell_getcounter[1]_Enable = ON</p>
<p class="CodeGroup">wingdma64-qa-2_Check_gdma_powershell_getcounter[1]_Check_Interval = 1</p>
<p class="CodeGroup">wingdma64-qa-2_Check_gdma_powershell_getcounter[1]_Service = gdma_22_powershell_getcounter</p>
<p class="CodeGroup">wingdma64-qa-2_Check_gdma_powershell_getwmi[1]_Command = c:\windows\system32\WindowsPowerShell\v1.0\powershell.exe C:\Progra~2\groundwork\gdma\libexec\v3\getWMI.ps1</p>
<p class="CodeGroup">wingdma64-qa-2_Check_gdma_powershell_getwmi[1]_Enable = ON</p>
<p class="CodeGroup">wingdma64-qa-2_Check_gdma_powershell_getwmi[1]_Check_Interval = 1</p>
<p class="CodeGroup">wingdma64-qa-2_Check_gdma_powershell_getwmi[1]_Service = gdma_22_powershell_getwmi</p>
<p class="CodeGroup">Spooling spool processor startup message</p>
<p class="CodeGroup">spool_startup_info: Spool processor 2.2.2 started at Wednesday January 12 11:38:52 2011</p>
<p class="CodeGroup">Pushed result into the buffer: 0 &#160;&#160;&#160;&#160;&#160;&#160;&#160;0 &#160;&#160;&#160;&#160;&#160;&#160;1294861132 &#160;&#160;&#160;&#160;&#160;wingdma64-qa-2 &#160;gdma_spooler &#160;&#160;&#160;0 &#160;&#160;Spool processor 2.2.2 started at Wednesday January 12 11:38:</p>
<p class="CodeGroup">52 2011</p>
<p class="CodeGroup">Spool processor running in normal mode.</p>
<p class="CodeGroup">Processing live targets.</p>
<p class="CodeGroup">Processing for target gdma-autohost</p>
<p class="CodeGroup">Spooling heart beat message</p>
<p class="CodeGroup">Spooler heart beat message: Spooler transmitted 2 results in 0.308 secs | RESULTS=2;;;;TIME=0.308sec;;;;</p>
<p class="CodeGroup">Pushed result into the buffer: 0 &#160;&#160;&#160;&#160;&#160;&#160;&#160;0 &#160;&#160;&#160;&#160;&#160;&#160;1294861132 &#160;&#160;&#160;&#160;&#160;wingdma64-qa-2 &#160;gdma_spooler &#160;&#160;&#160;0 &#160;&#160;Spooler transmitted 2 results in 0.308 secs | RESULTS=2;;;;T</p>
<p class="CodeGroup">IME=0.308sec;;;;</p>
<p class="CodeGroup">Loop count=0. Last loop exec time = 0.313 seconds.</p>
<p>The spooler merely takes output from the checks that have been run and sends it to the <span style="font-style: italic;"><i>Target</i></span> server or servers. Of interest here is if it succeeded in contacting the <span style="font-style: italic;"><i>Target</i></span>, which will be indicated as <span style="font-style: italic;"><i>Processing live targets</i></span>. Dead targets are <span style="font-style: italic;"><i>Target</i></span> servers that can't be reached for some reason, and indicate a down primary or standby system, or network issues in contacting the <span style="font-style: italic;"><i>Target</i></span>. The spooler will keep trying until it reaches a dead target, or times out according to the <span class="Code">Spooler_Retention_Time</span> and <span class="Code">Spooler_Max_Retries</span> parameters.</p>
<p>For <span style="font-style: italic;"><i>UNIX</i></span>, the command is similar, but you must run as the <span style="font-style: italic;"><i>gdma</i></span> user, with the full execution environment of that user, and specify the <span style="font-style: italic;"><i>GroundWork</i></span>-supplied <span style="font-style: italic;"><i>perl</i></span> interpreter.</p>
<p style="margin-left: 40px;"><b style="font-weight: bold;">On Linux and AIX</b></p>
<p class="GroupCode2"><b style="font-weight: bold;">s</b>u - gdma</p>
<p class="GroupCode2">cd /usr/local/groundwork/gdma/bin</p>
<p class="GroupCode2">/usr/local/groundwork/perl/bin/perl gdma_poll.pl -i -d2 -x</p>
<p style="margin-left: 40px;"><b style="font-weight: bold;">On Solaris</b></p>
<p class="GroupCode2"><b style="font-weight: bold;">s</b>u - gdma</p>
<p class="GroupCode2">cd /opt/groundwork/gdma/bin</p>
<p class="GroupCode2">/opt/groundwork/perl/bin/perl gdma_poll.pl -i -d2 -x</p>
<p>The output is essentially the same for UNIX as for Windows.</p>
<div style="width: 100%; position: relative;" id="footer">
<p class="Footer" style="font-size: 7pt; line-height: Normal; margin-top: 6pt; margin-bottom: 4pt;">GroundWork, Inc. ©2011</p>
</div>
<script type="text/javascript" language="javascript1.2">
//<![CDATA[
<!--
if (window.writeIntopicBar)
        writeIntopicBar(0);


highlightSearch();
//-->
//]]>
</script>
</body>
</html>
