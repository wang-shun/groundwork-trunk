<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0014)about:internet -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="en-UK" />
<meta name="generator" content="Adobe RoboHelp 8" />
<title>GDMA Quick Start Guide</title>
<link rel="StyleSheet" href="../Bookshelf.css" type="text/css" />
<style type="text/css">
/*<![CDATA[*/
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
-->
/*]]>*/
</style>

<script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
        origWidth = innerWidth;
        origHeight = innerHeight;
        onresize = reDo;
}
onerror = null; 
//]]>
</script>
<script type="text/javascript" language="javascript1.2" src="../whmsg_nc.js">
</script>
<script type="text/javascript" language="javascript" src="../whver_nc.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whproxy_nc.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whutils_nc.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whlang_nc.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whtopic_nc.js">
</script>
<script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
        origWidth = innerWidth;
        origHeight = innerHeight;
        onresize = reDo;
}
onerror = null; 
//]]>
</script>
<style type="text/css">
/*<![CDATA[*/
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
-->
/*]]>*/
</style>

<script type="text/javascript" language="javascript1.2" src="../whmsg.js">
</script>
<script type="text/javascript" language="javascript" src="../whver.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whproxy.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whutils.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whlang.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../whtopic.js">
</script>
</head>
<body>
<script type="text/javascript" language="javascript1.2">
//<![CDATA[
<!--
if (window.gbWhTopic)
{
        var strUrl = document.location.href;
        var bc = 0;
        var n = strUrl.toLowerCase().indexOf("bc-");
        if(n != -1)
        {
                document.location.href = strUrl.substring(0, n);
                bc = strUrl.substring(n+3);
        }

        if (window.addTocInfo)
        {
        addTocInfo("GROUNDWORK GDMA\nGDMA Quick Start Guide");
addButton("show",BTN_TEXT,"Show Table of Contents","","","","",0,0,"","","");

        }
        if (window.writeBtnStyle)
                writeBtnStyle();

        if (window.writeIntopicBar)
                writeIntopicBar(1);

        
        

        if (window.setRelStartPage)
        {
        setRelStartPage("../Bookshelf.htm");

                autoSync(0);
                sendSyncInfo();
                sendAveInfoOut();
        }
}
else
        if (window.gbIE4)
                document.location.reload();

//-->
//]]>
</script><script type="text/javascript" language="javascript">
//<![CDATA[
document.write("<p  style=\"text-align:right;color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;\">");
AddMasterBreadcrumbs("../Bookshelf.htm", "color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;", "&gt;", "Home", "../Welcome_to_GroundWork_Monitor/index.htm");
document.write("<a style=\"color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;\" href=\"gdma_welcomegdma.htm\">GROUNDWORK GDMA<\/a> &gt; GDMA Quick Start Guide<\/p>");
//]]>
</script>
<p>&#160;</p>
<script src="../ehlpdhtm.js" type="text/javascript" language="JavaScript1.2">
</script>
<h1><a name="MiniTOCBookMark1" id="MiniTOCBookMark1"></a><img src="../Shared_Images/square.gif" alt="square.gif" style="border: none;" width="15" height="15" border="0" /> GroundWork Distributed Monitoring Agent (GDMA)</h1>
<h3 align="right"><img src="../Shared_Images/homeicon.gif" alt="Topic Home" title="Topic Home" style="border: none;" width="33" height="27" border="0" /> <img src="../Shared_Images/printicon.gif" onclick="window.print()" alt="Print Page" title="Print Page" style="border: none;" width="33" height="27" border="0" /> <a href="mailto:support@groundworkopensource.com?subject=GDMA Quick Start Guide" title="Send Comments"><img src="../Shared_Images/commentsicon.gif" alt="Send Comments" title="Send Comments" style="border: none;" width="33" height="27" border="0" /></a></h3>
<span class="PageTitle">GDMA Quick Start Guide</span>
<p align="left">Table&#160;of&#160;Contents:&#160;<a class="dropspot" href="javascript:TextPopup(this)" id="MTHotSpot58070" name="MTHotSpot58070"><span class="MTText">Show</span><span class="MTText" style="display: none;">Hide</span></a></p>
<script type="text/javascript" language="JavaScript1.2">
//<![CDATA[
TextPopupInit('MTHotSpot58070', 'MTPOPUP58070');
//]]>
</script>
<div align="left" class="droptext" id="MTPOPUP58070" style="display: none;">
<ul style="text-align:left; list-style-type: circle;">
<li><a href="#MiniTOCBookMark2">Target GroundWork Monitor Server: New Installation</a>
<ul style="list-style-type: circle;">
<li><a href="#MiniTOCBookMark3">Prerequisites</a></li>
<li><a href="#MiniTOCBookMark4">NSCA Communication Setup</a></li>
<li><a href="#MiniTOCBookMark5">Enable Externals</a></li>
</ul>
</li>
<li><a href="#MiniTOCBookMark6">Target GroundWork Monitor Server: Upgrade</a>
<ul style="list-style-type: circle;">
<li><a href="#MiniTOCBookMark7">Prerequisites</a></li>
<li><a href="#MiniTOCBookMark8">NSCA Communication Setup</a></li>
<li><a href="#MiniTOCBookMark9">Create GDMA Build Directory</a></li>
</ul>
</li>
<li><a href="#MiniTOCBookMark10">Auto Configuration Setup</a>
<ul style="list-style-type: circle;">
<li><a href="#MiniTOCBookMark11">Theory of Operations</a></li>
<li><a href="#MiniTOCBookMark12">Auto Configuration Operations</a></li>
</ul>
</li>
<li><a href="#MiniTOCBookMark18">Windows GDMA Setup: New Installation</a>
<ul style="list-style-type: circle;">
<li><a href="#MiniTOCBookMark19">Prerequisites</a></li>
<li><a href="#MiniTOCBookMark20">GroundWork Monitor Target Server Setup</a></li>
</ul>
</li>
<li><a href="#MiniTOCBookMark29">Linux GDMA Setup</a>
<ul style="list-style-type: circle;">
<li><a href="#MiniTOCBookMark30">Prerequisites</a></li>
<li><a href="#MiniTOCBookMark31">GroundWork Monitor Setup</a></li>
</ul>
</li>
</ul>
</div>
<p>This guide is designed to get you started monitoring hosts with <span style="font-style: italic;"><i>GDMA</i></span> quickly. If you are new to <span style="font-style: italic;"><i>GDMA</i></span> and just need to set it up and run it with default values to see how it works, start here.</p>
<h2><a name="MiniTOCBookMark2" id="MiniTOCBookMark2"></a>Target GroundWork Monitor Server: New Installation</h2>
<p>This section describes the steps necessary to configure a <span style="font-style: italic;"><i>GroundWork Monitor</i></span> server to be a <span style="font-style: italic;"><i>Target</i></span> server for <span style="font-style: italic;"><i>GDMA</i></span> results, and a source for <span style="font-style: italic;"><i>GDMA</i></span> configuration data. This section describes setting up for a new installation of <span style="font-style: italic;"><i>GDMA</i></span>. If upgrading, see <span style="font-weight: bold;"><b>Target GroundWork Monitor Server: Upgrade</b></span> below.</p>
<h3><a name="MiniTOCBookMark3" id="MiniTOCBookMark3"></a>Prerequisites</h3>
<p class="Bullet1">The following prerequisites exist for configuration of a <span style="font-style: italic;"><i>GDMA</i></span> <span style="font-style: italic;"><i>Target</i></span> server:</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1"><span style="font-style: italic;"><i>GroundWork Monitor</i></span> 6.1 or higher correctly installed.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">Communication allowed from <span style="font-style: italic;"><i>GDMA</i></span> targets on ports 80 (HTTP) or 443(HTTPS)</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">Communication allowed from <span style="font-style: italic;"><i>GDMA</i></span> targets on port 5667 (NSCA)</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><span><i style="font-style: italic;">Target</i></span> server and <span style="font-style: italic;"><i>GDMA</i></span> monitored hosts clock synchronization. <span style="font-weight: bold;"><b><font color="#FF0000"><b>Note:</b></font></b></span> <span style="font-style: italic;"><i>GDMA</i></span> operation requires a unified time base for <span style="font-style: italic;"><i>Target</i></span> servers and the monitored systems. This is normally accomplished using an external clock source such as <span style="font-style: italic;"><i>NTP</i></span> (Network Time Protocol) for all systems. Messages from systems with out of sync clocks may be dropped silently by the <span style="font-style: italic;"><i>Bronx</i></span> event broker.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">Administrative access and familiarity with <span style="font-style: italic;"><i>GroundWork Monitor</i></span> and <span style="font-style: italic;"><i>Linux</i></span>.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">Taking a backup of the monarch database is highly recommended before beginning this operation See Bookshelf <a href="../System_Maintenance/systemmaintenance_backupandrestore.htm">System Maintenance&gt;Backup and Restore</a> for details.</p>
</li>
</ul>
<h3><a name="MiniTOCBookMark4" id="MiniTOCBookMark4"></a>NSCA Communication Setup</h3>
<p><span><font color="#FF0000"><b style="font-weight: bold;">Note:</b></font></span> It is important to have target systems and the <span style="font-style: italic;"><i>GroundWork</i></span> server in sync with respect to time when setting up <span style="font-style: italic;"><i>GDMA</i></span>. If servers are not in sync, then <span style="font-style: italic;"><i>NSCA</i></span> messages submitted from the <span style="font-style: italic;"><i>GDMA</i></span> agents to the <span style="font-style: italic;"><i>GroundWork</i></span> server will be dropped by the <span style="font-style: italic;"><i>Bronx</i></span> event broker. In default logging levels for <span style="font-style: italic;"><i>Bronx</i></span> these drops are not recorded.</p>
<p><span style="font-style: italic;"><i>GroundWork Monitor</i></span> 6.0 and later use a <span style="font-style: italic;"><i>Nagios Event Broker</i></span> (<span style="font-style: italic;"><i>NEB</i></span>) to process passive check results. The <span style="font-style: italic;"><i>NEB</i></span> is called <span style="font-style: italic;"><i>Bronx</i></span>. <span style="font-style: italic;"><i>GDMA</i></span> supports a feature called spooling which will handle network interruptions between <span style="font-style: italic;"><i>GDMA</i></span> hosts and the <span style="font-style: italic;"><i>GroundWork</i></span> server.</p>
<p>When that interruption ceases, results are sent back with correct timestamps. To support these timestamps, the <span style="font-style: italic;"><i>Bronx</i></span> configuration file, <span class="Code">/usr/local/groundwork/config/bronx.cfg, listener_max_packet_age</span> parameter needs to be updated. Set this value to 900 seconds to allow for 15 minutes of <span style="font-style: italic;"><i>GDMA</i></span> spooling. Longer durations are possible, but may result in transient overload conditions on the <span style="font-style: italic;"><i>GroundWork</i></span> server while large data volumes are processed.</p>
<p>Similarly, packets will be dropped by <span style="font-style: italic;"><i>Bronx</i></span> if they contain a future timestamp. This can be an issue in environments where perfect time synchronization is not possible. Setting the <span class="Code">listener_max_packet_imminence</span> parameter will compensate for a small amount of <span style="font-style: italic;"><i>future</i></span> time variance between the monitored node and the <span style="font-style: italic;"><i>Target</i></span> server. We suggest leaving the default of 1 second unless this is determined to be a problem in the environment.</p>
<p>Finally, the <span class="Code">use_client_timestamp</span> parameter should be left at the default of 1, to allow the timestamp from the monitored node to be used. This is useful in collecting the performance data and graphing it in time series graphs in the interface. If this parameter is set to 0, the server timestamp will be used, and graphing may not be accurate.</p>
<p>The following settings are from the <span style="font-style: italic;"><i>Bronx</i></span> configuration file: <span class="CodeInline">/usr/local/groundwork/config/bronx.cfg</span></p>
<p class="CodeGroup"># LISTENER MAX PACKET AGE</p>
<p class="CodeGroup"># The max allowed age, in seconds, of the passive check result received.</p>
<p class="CodeGroup"># Any older results are dropped to the floor.</p>
<p class="CodeGroup"># The maximum allowed value is "900" seconds.</p>
<p class="CodeGroup"># Set the value to "0" to accept passive checks with older timestamps.</p>
<p class="CodeGroup"># If not specified, the value will be "30" seconds.</p>
<p class="CodeGroup">listener_max_packet_age=900</p>
<p class="CodeGroup">&#160;</p>
<p class="CodeGroup"># LISTENER MAX PACKET IMMINENCE</p>
<p class="CodeGroup"># The max allowed "future age", in seconds, of the passive check result received.</p>
<p class="CodeGroup"># Any newer results are dropped to the floor.</p>
<p class="CodeGroup"># The maximum allowed value is "900" seconds.</p>
<p class="CodeGroup"># Set the value to "0" to disallow passive checks with newer timestamps.</p>
<p class="CodeGroup"># If not specified, the value will be "1" second, which should be just</p>
<p class="CodeGroup"># enough to allow for possible slight discrepancies which can arise even</p>
<p class="CodeGroup"># between time-synchronized client and server machines. &#160;In general, we</p>
<p class="CodeGroup"># highly recommend that the site use NTP or similar time-synchronization</p>
<p class="CodeGroup"># software to tie together the software clocks on disparate machines to</p>
<p class="CodeGroup"># high accuracy, to prevent misunderstandings about when events actually</p>
<p class="CodeGroup"># occur. &#160;Note that time synchronization for a VM guest machine can be</p>
<p class="CodeGroup"># problematic; see your vendor's documentation on this topic.</p>
<p class="CodeGroup">#listener_max_packet_imminence=1</p>
<p class="CodeGroup">&#160;</p>
<p class="CodeGroup"># USE CLIENT TIMESTAMP</p>
<p class="CodeGroup"># This parameter, if set to a positive value, configures the listener thread</p>
<p class="CodeGroup"># to use the timestamp in the passive check result received for processing,</p>
<p class="CodeGroup"># rather than the time on the server when the check result is processed.</p>
<p class="CodeGroup"># To prevent confusion in handling data from clients which are not</p>
<p class="CodeGroup"># time-synchronized to the server, such a check result timestamp will be</p>
<p class="CodeGroup"># automatically overridden and replaced with the server timestamp if the</p>
<p class="CodeGroup"># passive check result timestamp is found by the server to be in the future.</p>
<p class="CodeGroup"># If not specified, the value will be "1".</p>
<p class="CodeGroup">#use_client_timestamp=0</p>
<p>If any changes to the <span class="CodeInline">bronx.cfg</span> file are needed, <span style="font-style: italic;"><i>Nagios</i></span> must be restarted to put them into effect:</p>
<p class="CodeGroup">/etc/init.d/groundwork restart nagios</p>
<h3 class="Bullet1"><a name="MiniTOCBookMark5" id="MiniTOCBookMark5"></a>Enable Externals</h3>
<p style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a5" style="font-size: 8pt;" name="a5"><img src="../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" />Show/Hide</a></p>
<div class="droptext" id="POPUP403610077" style="display: none;">
<p><img src="../Using_Applications/Configuration/Configuration_Scenarios/Externals/Assets/configuration_enableexternals.gif" alt="configuration_enableexternals.gif" style="border: none;" width="600" height="245" border="0" /></p>
</div>
<p>To enable externals within <span style="font-style: italic;"><i>GroundWork</i></span>, select <b>Control</b> from the <span style="font-style: italic;"><i>Configuration</i></span> tab, then <b>Setup</b> and click the <b>Enable Externals</b> box, and <b>Save</b>. You are then able to define, add, and execute externals using the <span style="font-style: italic;"><i>Services</i></span>, <span style="font-style: italic;"><i>Profiles</i></span>, and <span style="font-style: italic;"><i>Hosts</i></span> configuration tabs. The system is now configured for general <span style="font-style: italic;"><i>GDMA</i></span> operation. To configure the monitored nodes, see the relevant section (<span style="font-style: italic;"><i>Windows GDMA Setup</i></span>, <span style="font-style: italic;"><i>Linux GDMA Setup</i></span>). It is likely that you will wish to take advantage of the auto-configuration functions as well, so be sure to review the section on <span style="font-style: italic;"><i>Auto-configuration Setup</i></span>.</p>
<h2><a name="MiniTOCBookMark6" id="MiniTOCBookMark6"></a>Target GroundWork Monitor Server: Upgrade</h2>
<p>This section describes the steps necessary to upgrade an existing <span style="font-style: italic;"><i>GroundWork</i></span> server with a previous version of <span style="font-style: italic;"><i>GDMA</i></span> configured to be a <span style="font-style: italic;"><i>Target</i></span> server for <span style="font-style: italic;"><i>GDMA</i></span> agents.&#160;If this is a new installation, see <span style="font-weight: bold;"><b>Target GroundWork Monitor Server: New Installation</b></span> above.</p>
<h3><a name="MiniTOCBookMark7" id="MiniTOCBookMark7"></a>Prerequisites</h3>
<p>The following prerequisites exist for upgrading a <span style="font-style: italic;"><i>GDMA Target</i></span> server:</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">An existing <span style="font-style: italic;"><i>GroundWork</i></span> server version 6.0.1 or higher, configured and running with <span style="font-style: italic;"><i>GDMA</i></span> 1.x or 2.0 or later.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">Familiarity with <span style="font-style: italic;"><i>GroundWork Monitor</i></span> and <span style="font-style: italic;"><i>Linux</i></span> system administration</p>
</li>
</ul>
<h3><a name="MiniTOCBookMark8" id="MiniTOCBookMark8"></a>NSCA Communication Setup</h3>
<p><span><font color="#FF0000"><b style="font-weight: bold;">Note to Administrators:</b></font></span> It is important to have target systems and the <span style="font-style: italic;"><i>GroundWork</i></span> server in sync with respect to time when setting up <span style="font-style: italic;"><i>GDMA</i></span>. If servers are not in sync, then <span style="font-style: italic;"><i>NSCA</i></span> messages submitted from the <span style="font-style: italic;"><i>GDMA</i></span> agents to the <span style="font-style: italic;"><i>GroundWork</i></span> server will be dropped by the <span style="font-style: italic;"><i>Bronx</i></span> event broker. In default logging levels for <span style="font-style: italic;"><i>Bronx</i></span> these drops are not recorded.</p>
<p>As covered in the <i style="font-style: normal; font-weight: bold;">Target GroundWork Monitor New Installation</i> section above, verify that all the parameters in <span class="CodeInline">/usr/local/groundwork/config/bronx.cfg</span> are correct.</p>
<p><span style="font-style: italic;"><i>GroundWork Monitor</i></span> 6.0 and above uses a <span style="font-style: italic;"><i>Nagios Event Broker</i></span> (<span style="font-style: italic;"><i>NEB</i></span>) to process passive check results. The <span style="font-style: italic;"><i>NEB</i></span> is called <span style="font-style: italic;"><i>Bronx</i></span>. <span style="font-style: italic;"><i>GDMA</i></span> supports a feature called spooling which will handle network interruptions between <span style="font-style: italic;"><i>GDMA</i></span> hosts and the <span style="font-style: italic;"><i>GroundWork</i></span> server.</p>
<p>When that interruption ceases, results are sent back with correct timestamps. To support these timestamps, the <span style="font-style: italic;"><i>Bronx</i></span> configuration file, <span class="CodeInline">/usr/local/groundwork/config/bronx.cfg</span>, <span class="CodeInline">listener_max_packet_age</span> parameter needs to be updated. Set this value to 900 seconds to allow for 15 minutes of <span style="font-style: italic;"><i>GDMA</i></span> spooling. Longer durations are possible, but may result in transient overload conditions on the <span style="font-style: italic;"><i>GroundWork</i></span> server while large data volumes are processed.</p>
<p>Similarly, packets will be dropped by <span style="font-style: italic;"><i>Bronx</i></span> if they contain a future timestamp. This can be an issue in environments where perfect time synchronization is not possible. Setting the <span class="CodeInline">listener_max_packet_imminence</span> parameter will compensate for a small amount of <span style="font-style: italic;"><i>future</i></span> time variance between the monitored node and the <span style="font-style: italic;"><i>Target</i></span> server. We suggest leaving the default of 1 second unless this is determined to be a problem in the environment.</p>
<p>Finally, the <span class="CodeInline">use_client_timestamp</span> parameter should be left at the default of 1, to allow the timestamp from the monitored node to be used. This is useful in collecting the performance data and graphing it in time series graphs in the interface. If this parameter is set to 0, the server timestamp will be used, and graphing may not be accurate.</p>
<p>The following settings are from the <span style="font-style: italic;"><i>Bronx</i></span> configuration file: <span class="CodeInline">/usr/local/groundwork/config/bronx.cfg</span></p>
<p class="CodeGroup"># LISTENER MAX PACKET AGE</p>
<p class="CodeGroup"># The max allowed age, in seconds, of the passive check result received.</p>
<p class="CodeGroup"># Any older results are dropped to the floor.</p>
<p class="CodeGroup"># The maximum allowed value is "900" seconds.</p>
<p class="CodeGroup"># Set the value to "0" to accept passive checks with older timestamps.</p>
<p class="CodeGroup"># If not specified, the value will be "30" seconds.</p>
<p class="CodeGroup">listener_max_packet_age=900</p>
<p class="CodeGroup">&#160;</p>
<p class="CodeGroup"># LISTENER MAX PACKET IMMINENCE</p>
<p class="CodeGroup"># The max allowed "future age", in seconds, of the passive check result received.</p>
<p class="CodeGroup"># Any newer results are dropped to the floor.</p>
<p class="CodeGroup"># The maximum allowed value is "900" seconds.</p>
<p class="CodeGroup"># Set the value to "0" to disallow passive checks with newer timestamps.</p>
<p class="CodeGroup"># If not specified, the value will be "1" second, which should be just</p>
<p class="CodeGroup"># enough to allow for possible slight discrepancies which can arise even</p>
<p class="CodeGroup"># between time-synchronized client and server machines. &#160;In general, we</p>
<p class="CodeGroup"># highly recommend that the site use NTP or similar time-synchronization</p>
<p class="CodeGroup"># software to tie together the software clocks on disparate machines to</p>
<p class="CodeGroup"># high accuracy, to prevent misunderstandings about when events actually</p>
<p class="CodeGroup"># occur. &#160;Note that time synchronization for a VM guest machine can be</p>
<p class="CodeGroup"># problematic; see your vendor's documentation on this topic.</p>
<p class="CodeGroup">#listener_max_packet_imminence=1</p>
<p class="CodeGroup">&#160;</p>
<p class="CodeGroup"># USE CLIENT TIMESTAMP</p>
<p class="CodeGroup"># This parameter, if set to a positive value, configures the listener thread</p>
<p class="CodeGroup"># to use the timestamp in the passive check result received for processing,</p>
<p class="CodeGroup"># rather than the time on the server when the check result is processed.</p>
<p class="CodeGroup"># To prevent confusion in handling data from clients which are not</p>
<p class="CodeGroup"># time-synchronized to the server, such a check result timestamp will be</p>
<p class="CodeGroup"># automatically overridden and replaced with the server timestamp if the</p>
<p class="CodeGroup"># passive check result timestamp is found by the server to be in the future.</p>
<p class="CodeGroup"># If not specified, the value will be "1".</p>
<p class="CodeGroup">#use_client_timestamp=0</p>
<p>If any changes to the <span class="CodeInline">bronx.cfg</span> file are needed, <span style="font-style: italic;"><i>Nagios</i></span> must be restarted to put them into effect:</p>
<p class="CodeGroup">/etc/init.d/groundwork restart nagios</p>
<h3><a name="MiniTOCBookMark9" id="MiniTOCBookMark9"></a>Create GDMA Build Directory</h3>
<p>This is the location that will be used for building and distribution of <span style="font-style: italic;"><i>GDMA</i></span> host configurations.</p>
<p>As user <span class="CodeInline">root</span> create the directory and change ownership to user <span style="font-style: italic;"><i>Nagios</i></span>.</p>
<p class="CodeGroup">#mkdir /usr/local/groundwork/apache2/htdocs/gdma</p>
<p class="CodeGroup">#chown nagios.nagios /usr/local/groundwork/apache2/htdocs/gdma</p>
<p>All other steps are contained in the relevant upgrade sections. Please proceed to the sections <span style="font-weight: bold;"><b>Windows GDMA Setup</b></span> or <span style="font-weight: bold;"><b>Linux GDMA Setup</b></span>. You may wish to take advantage of the Auto-Configuration features of <span style="font-style: italic;"><i>GDMA</i></span>. If so, see <span style="font-weight: bold;"><b>Auto Configuration Setup</b></span> below before proceeding.</p>
<h2><a name="MiniTOCBookMark10" id="MiniTOCBookMark10"></a>Auto Configuration Setup</h2>
<h3><a name="MiniTOCBookMark11" id="MiniTOCBookMark11"></a>Theory of Operations</h3>
<p>The <span style="font-style: italic;"><i>Auto Configuration</i></span> feature of <span style="font-style: italic;"><i>GDMA</i></span> enables <span style="font-style: italic;"><i>GDMA</i></span> agents to be deployed to target systems without needing to provide a host specific configuration at installation time. When <span style="font-style: italic;"><i>GDMA</i></span> is first installed and started without a configuration it will operate in <span style="font-style: italic;"><i>Auto Configuration</i></span> mode. While in <span style="font-style: italic;"><i>Auto Configuration</i></span> mode the agent will periodically perform a basic discovery of the monitored host system and transmit the discovery information to a pre-defined <span style="font-style: italic;"><i>Parent</i></span> system. The pre-defined host name must be added to DNS, so that the monitored hosts will resolve it as the <span style="font-style: italic;"><i>GroundWork</i> Target</span> server. This information can then be used by the <span style="font-style: italic;"><i>GroundWork Monitor</i></span> administrator to configure a host-specific configuration for the new monitored host. When the host-specific configuration is available, it will be retrieved by the agent and the agent will self-configure and switch to normal operation.</p>
<h3><a name="MiniTOCBookMark12" id="MiniTOCBookMark12"></a>Auto Configuration Operations</h3>
<p>The following is a description of the sequence of operations that occur when a new <span style="font-style: italic;"><i>GDMA</i></span> is deployed in <span style="font-style: italic;"><i>Auto Configuration</i></span> mode. It is useful to understand this process, so that the messages received and displayed on the <span style="font-style: italic;"><i>GroundWork Monitor</i></span> user interface can be understood.</p>
<p>When the agent is first started both the poller and spooler engines are started.</p>
<h4><a name="MiniTOCBookMark13" id="MiniTOCBookMark13"></a>Basic Poller Operation in Auto Configuration Mode</h4>
<ol>
<li>
<p class="Numbering">Poller reads: <span class="CodeInline">gdma_auto.conf</span></p>
</li>
<li>
<p class="Numbering">Poller checks for the presence of a local host configuration file.</p>
</li>
<li>
<p class="Numbering">Poller attempts to retrieve a host configuration file from the location defined by: <span class="CodeInline">gdma_auto.conf</span></p>
</li>
<li>
<p class="Numbering">If it fails to download a host configuration file it sleeps until <span class="CodeInline">Poller_Proc_Interval</span> has expired and starts at step 1.</p>
</li>
</ol>
<h4><a name="MiniTOCBookMark14" id="MiniTOCBookMark14"></a>Basic Spooler Operation in Auto Configuration Mode</h4>
<ol>
<li>
<p class="Numbering">Spooler reads: <span class="CodeInline">gdma_auto.conf</span></p>
</li>
<li>
<p class="Numbering">Spooler checks for the presence of a local host configuration file.</p>
</li>
<li>
<p class="Numbering">If the host configuration file is not present the spooler transmits an auto configuration message.</p>
</li>
<li>
<p class="Numbering">Spooler sleeps until <span class="CodeInline">Spooler_Proc_Interval</span> has expired and restarts starts at step 1.</p>
<p>The &#160;message is sent via <span style="font-style: italic;"><i>NSCA</i></span> as a service check result.</p>
</li>
</ol>
<p style="margin-left: 40px;">The message is sent to the <span style="font-style: italic;"><i>Target</i></span> server as coming from the host defined by the <span style="font-style: italic;"><i>GDMA_Auto_Host</i></span> parameter (default is <span class="CodeInline">gdma-autohost</span>) and the service defined by <span style="font-style: italic;"><i>GDMA_Auto_Service</i></span> (default is <span class="CodeInline">gdma_auto</span>).</p>
<p>The message payload contains the hostname, ip address and operating system information.</p>
<p style="margin-left: 40px; font-size: 8pt;">Example:</p>
<p class="Figure" style="margin-left: 41px;"><img src="Assets/gdma_autoconfigurationsetup1.gif" alt="gdma_autoconfigurationsetup1.gif" style="border: none;" width="700" height="85" border="0" /></p>
<h4><a name="MiniTOCBookMark15" id="MiniTOCBookMark15"></a>Create DNS Entry for gdma-autohost that points to the GroundWork Server</h4>
<p>The <span style="font-style: italic;"><i>GDMA</i></span> agent relies on DNS to resolve the pre-configured hostname <span style="font-style: italic;"><i>gdma-autohost</i></span> to the <span style="font-style: italic;"><i>Target</i></span> server where it will submit its check results, and attempt to pick up its configuration file. Using whatever DNS system is available on your network, ensure that the system to be monitored with <span style="font-style: italic;"><i>GDMA</i></span> can resolve the name <span style="font-style: italic;"><i>gdma-autohost</i></span> to the <span style="font-style: italic;"><i>GroundWork</i></span> server.</p>
<h4><a name="MiniTOCBookMark16" id="MiniTOCBookMark16"></a>Import GDMA Auto Configuration Profile</h4>
<p>The <span style="font-style: italic;"><i>GDMA Auto Configuration</i></span> profile provides a template for the auto-configuration virtual host. In order to properly process the messages from the <span style="font-style: italic;"><i>GDMA</i></span> hosts in <span style="font-style: italic;"><i>Auto Configuration</i></span> mode, this profile must be loaded, using the following procedure.</p>
<p style="font-weight: normal; font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a2" style="font-size: 8pt;" name="a2"><img src="../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" />Show/Hide</a></p>
<div class="droptext" id="POPUP410430818" style="display: none;">
<p><img src="Assets/gdma_autoconfiguration2.gif" alt="gdma_autoconfiguration2.gif" style="border: none;" width="700" height="306" border="0" /></p>
</div>
<ol>
<li>
<p class="Numbering"><span>In <span style="font-weight: bold;"><b>Configuration</b></span>, select <span style="font-weight: bold;"><b>Profiles</b></span>.</span></p>
</li>
<li>
<p class="Numbering"><span>Select <span style="font-weight: bold;"><b>Profile importer</b></span>.</span></p>
</li>
<li>
<p class="Numbering"><span>Toggle the checkbox to select <span style="font-style: italic;"><i>gdma-autohost.xml</i></span>.</span></p>
</li>
<li>
<p class="Numbering"><span>Select <span style="font-weight: bold;"><b>Import</b></span> at the bottom of the screen.</span></p>
</li>
</ol>
<h4><a name="MiniTOCBookMark17" id="MiniTOCBookMark17"></a><span>Create GDMA Auto-configuration Virtual Host</span></h4>
<p>This virtual host serves as a collection point for notifications and alerts from unconfigured <span style="font-style: italic;"><i>GDMA</i></span> agents.</p>
<p style="font-weight: normal; font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a3" style="font-size: 8pt;" name="a3"><img src="../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" />Show/Hide</a></p>
<div class="droptext" id="POPUP403379324" style="display: none;">
<p><img src="Assets/gdma_autoconfiguration2.gif" alt="gdma_autoconfiguration2.gif" style="border: none;" width="700" height="306" border="0" /></p>
<p><img src="Assets/gdma_howtogdmamaster4.gif" alt="gdma_howtogdmamaster4.gif" style="border: none;" width="700" height="277" border="0" /></p>
<p><img src="Assets/gdma_howtogdmamaster5.gif" alt="gdma_howtogdmamaster5.gif" style="border: none;" width="700" height="363" border="0" /></p>
</div>
<ol>
<li>
<p class="Numbering"><span>In <span style="font-weight: bold;"><b>Configuration</b></span>, select <span style="font-weight: bold;"><b>Hosts</b></span>.</span></p>
</li>
<li>
<p class="Numbering"><span>Select <span style="font-weight: bold;"><b>Host Wizard</b></span>.</span></p>
</li>
<li>
<p class="Numbering">Fill in the <b>Host Name</b> as <i>gdma-autohost</i>. <font color="#FF0000"><b>Note:</b></font> This name is controlled by the <span class="Code">GDMA_Auto_Host</span> configuration parameter. Do not modify this path without also modifying all the requisite <i>GDMA</i> agent configurations.</p>
</li>
<li>
<p class="Numbering"><span>Fill in Alias as <span style="font-style: italic;"><i>gdma-autohost</i></span>.</span></p>
</li>
<li>
<p class="Numbering">Fill in Address as <i>127.0.0.2</i>. <font color="#FF0000"><b>Note:</b></font> <i>Nagios</i> and <span style="font-style: italic;"><i>GroundWork</i></span> require that all IP addresses for configured hosts be unique. Ensure that the address used here is unique in the configuration.</p>
</li>
<li>
<p class="Numbering"><span>Select <span style="font-style: italic;"><i>gdma-autohost</i></span> as the <span style="font-weight: bold;"><b>Host profile</b></span>.</span></p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Next</b></span> (4x), then select <span style="font-weight: bold;"><b>Continue</b></span>.&#160;<span style="font-weight: bold;"><b><font color="#FF0000"><b>Note:</b></font></b></span> If you are using clone host or another method for creating this host, please ensure it has no externals associated, or you may see an error when running externals related to the distribution directory. The <span style="font-style: italic;"><i>gdma-autohost</i></span> and its services should have no externals.</p>
</li>
<li>
<p class="Numbering"><b style="font-weight: bold;">Commit</b> changes to activate. The system is now configured to receive auto configuration messages from <span style="font-style: italic;"><i>GDMA</i></span> targets. <span style="font-weight: bold;"><b><font color="#FF0000"><b>Note:</b></font></b></span> You may optionally place the <span class="Code">gdma-autohost</span> in a hostgroup and configure notification options.</p>
</li>
</ol>
<p style="margin-left: 0px;"><font color="#FF0000"><b style="font-weight: bold;">Note:</b></font> Your choice of host profile and configuration group in later steps may be matched to operating system in the <span class="Code">gdma_auto.pl</span> script. The mapping is controlled by the following structure:</p>
<p class="GroupCode2" style="margin-left: 24px;"><span>"linux;gdma-21-linux-host;unix-gdma-2.1",</span></p>
<p class="GroupCode2" style="margin-left: 24px;"><span>"MSWin32;gdma-21-windows-host;windows-gdma-2.1",</span></p>
<p class="GroupCode2" style="margin-left: 24px;"><span>"linux 2.6.9-42.0.3.elsmp;gdma-21-linux-host;unix-gdma-2.1",</span></p>
<p class="GroupCode2" style="margin-left: 24px;"><span>"MSWin32 5.00;gdma-21-windows-host;windows-gdma-2.1"</span></p>
<p style="margin-left: 0px;"><span>You may change these defaults, or add matches to the list, by editing the script, as long as you maintain the quoted, comma-delimited string of:</span></p>
<p class="GroupCode2" style="margin-left: 24px;"><span>os string;host_profile;monarch_group</span></p>
<p style="margin-left: 0px;"><span><span><font color="#FF0000"><b style="font-weight: bold;">Note:</b></font></span> The last encountered match is what will be used, so you should place general matches first, and more specific matches later in the list.</span></p>
<p style="margin-left: 0px;"><i style="font-style: italic;">GDMA Target</i> server configuration for auto-configuration is now complete. You should periodically check your configuration for new hosts as you deploy the <span style="font-style: italic;"><i>GDMA</i></span> in your organization. These hosts should be placed in hostgroups and the configuration committed.</p>
<h2><a name="MiniTOCBookMark18" id="MiniTOCBookMark18"></a><span>W</span>indows GDMA Setup: New Installation</h2>
<p>The <span style="font-style: italic;"><i>Windows GDMA</i></span> installation requires several new profiles to be present on the <span style="font-style: italic;"><i>Target GroundWork</i></span> server. These profiles must be loaded on the system and applied to the <span style="font-style: italic;"><i>GDMA</i></span> monitored node hosts. <span style="font-style: italic;"><i>Windows GDMA</i></span> hosts must be additionally organized into configuration groups. Configuration groups (aka <span style="font-style: italic;"><i>Monarch Groups</i></span>) are used to control the creation of external (see Bookshelf: <span style="font-style: italic;"><i>Using Applications&gt;Configuration&gt;Configuration Scenarios&gt;Configuring Externals</i></span>) definitions used by <span style="font-style: italic;"><i>GDMA</i></span> agents. This section covers setting up these parameters in a new installation of <span style="font-style: italic;"><i>GDMA</i></span>.</p>
<h3><a name="MiniTOCBookMark19" id="MiniTOCBookMark19"></a>Prerequisites</h3>
<p class="Bullet1">The following prerequisites exist for configuring <span style="font-style: italic;"><i>Windows GDMA</i></span> agents:</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1"><i style="font-style: italic;"><span style="font-style: italic;"><i>GroundWork Monitor</i></span> <span>6.1</span></i> or later correctly installed.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><i style="font-style: italic;"><span style="font-style: italic;"><i>GroundWork</i></span> <span>Target</span></i> server configuration complete.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">Administrative access to <span style="font-style: italic;"><i>GroundWork Monitor</i></span> and monitored systems and familiarity with the administration of <span style="font-style: italic;"><i>Linux</i></span>, <span style="font-style: italic;"><i>GroundWork</i></span>, and <span style="font-style: italic;"><i>Windows</i></span> systems.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">Taking a backup of the monarch database is highly recommended before beginning this operation See Bookshelf <a href="../System_Maintenance/systemmaintenance_backupandrestore.htm">System Maintenance&gt;Backup and Restore</a> for details.</p>
</li>
</ul>
<h3><a name="MiniTOCBookMark20" id="MiniTOCBookMark20"></a>GroundWork Monitor Target Server Setup</h3>
<p>The following steps need to be performed on the <span style="font-style: italic;"><i>GroundWork</i></span> server designated as the <span style="font-style: italic;"><i>Target</i></span> server for the <span style="font-style: italic;"><i>Windows GDMA</i></span> monitored hosts.</p>
<h4><a name="MiniTOCBookMark21" id="MiniTOCBookMark21"></a>Import GDMA Windows Base OS Host and Service Profile</h4>
<p>The <span style="font-style: italic;"><i>Windows Base OS</i></span> profile configuration parameters for the creation of <span style="font-style: italic;"><i>Windows</i></span> monitored nodes.</p>
<p style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a10" style="font-size: 8pt;" name="a10"><img src="../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" />Show/Hide</a></p>
<div class="droptext" id="POPUP410997058" style="display: none;">
<p><img src="Assets/gdma_windowsgdmasetup1.gif" alt="gdma_windowsgdmasetup1.gif" style="border: none;" width="700" height="271" border="0" /></p>
</div>
<ol>
<li>
<p class="Numbering">In <span style="font-weight: bold;"><b>Configuration</b></span>, select <span style="font-weight: bold;"><b>Profiles</b></span>.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Profile importer</b></span>.</p>
</li>
<li>
<p class="Numbering">Toggle the checkbox to select <span style="font-style: italic;"><i>gdma-21-windows-host.xml</i></span>.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Import</b></span> at the bottom of the screen.</p>
</li>
</ol>
<h4><a name="MiniTOCBookMark22" id="MiniTOCBookMark22"></a>Review and Modify gdma-21-windows Host Externals Properties</h4>
<p style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a11" style="font-size: 8pt;" name="a11"><img src="../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" />Show/Hide</a></p>
<div class="droptext" id="POPUP403396560" style="display: none;">
<p><img src="Assets/gdma_windowsgdmasetup2.gif" alt="gdma_windowsgdmasetup2.gif" style="border: none;" width="700" height="407" border="0" /></p>
</div>
<ol>
<li>
<p class="Numbering">In <span style="font-weight: bold;"><b>Configuration</b></span>, select <span style="font-weight: bold;"><b>Hosts</b></span>, Host Externals.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Modify</b></span>.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>gdma-21-windows</b></span>.</p>
</li>
<li>
<p class="Numbering">Here you can modify the <span style="font-style: italic;"><i>Target_Server</i></span> parameter. This parameter controls where <span style="font-style: italic;"><i>GDMA</i></span> agents will download their configurations from and where they will send check results. The parameter must be in the form of a URL. This parameter is normally set to the hostname or IP address of the <span style="font-style: italic;"><i>Master</i></span> system. For details on this and other configuration parameters see <a href="gdma_configurationreference.htm" target="_blank">GDMA Configuration Reference</a>. If you are using <span style="font-style: italic;"><i>Auto-configuration</i></span>, you may set this to <span class="CodeInline">http://gdma-autohost</span>.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Save</b></span>.</p>
</li>
</ol>
<h4><a name="MiniTOCBookMark23" id="MiniTOCBookMark23"></a>Configure a GDMA Windows Host</h4>
<p>If you are using Auto-configuration, you may skip this step.</p>
<p style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a12" style="font-size: 8pt;" name="a12"><img src="../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" />Show/Hide</a></p>
<div class="droptext" id="POPUP405263593" style="display: none;">
<p><img src="Assets/gdma_windowsgdmasetup4.gif" alt="gdma_windowsgdmasetup4.gif" style="border: none;" width="700" height="274" border="0" /></p>
</div>
<ol>
<li>
<p class="Numbering">In <span style="font-weight: bold;"><b>Configuration</b></span>, <span style="font-weight: bold;"><b>Hosts</b></span>.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Host Wizard</b></span>.</p>
</li>
<li>
<p class="Numbering">Fill in <span style="font-weight: bold;"><b>Host Name</b></span> (e.g.<span style="font-style: italic;"><i>2000pro</i></span>).</p>
</li>
<li>
<p class="Numbering">Fill in Alias (e.g. <span style="font-style: italic;"><i>2000pro</i></span>).</p>
</li>
<li>
<p class="Numbering">Fill in Address (e.g. <span style="font-style: italic;"><i>196.168.11.72</i></span>).</p>
</li>
<li>
<p class="Numbering">Select <span style="font-style: italic;"><i>gdma-21-windows-host</i></span> as the <span style="font-weight: bold;"><b>Host profile</b></span>.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Next</b></span> (4x), then select <span style="font-weight: bold;"><b>Continue</b></span>.You may optionally place the host in a hostgroup and configure additional host, service and notification options.</p>
</li>
</ol>
<h4><a name="MiniTOCBookMark24" id="MiniTOCBookMark24"></a>Add a New Host to a Monarch Group</h4>
<p>If you are using Auto-configuration, you may skip this step.</p>
<p style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a13" style="font-size: 8pt;" name="a13"><img src="../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" />Show/Hide</a></p>
<div class="droptext" id="POPUP407187683" style="display: none;">
<p><img src="Assets/gdma_windowsgdmasetup5.gif" alt="gdma_windowsgdmasetup5.gif" style="border: none;" width="700" height="604" border="0" /></p>
</div>
<ol>
<li>
<p class="Numbering">In <span style="font-weight: bold;"><b>Configuration</b></span>, select <span style="font-weight: bold;"><b>Groups</b></span>.</p>
</li>
<li>
<p class="Numbering">Expand <span style="font-weight: bold;"><b>Groups</b></span>.</p>
</li>
<li>
<p class="Numbering">Expand <span style="font-style: italic;"><i>windows-gdma-21</i></span>.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Detail</b></span>.</p>
</li>
<li>
<p class="Numbering">Select the <span style="font-weight: bold;"><b>Hosts</b></span> tab.</p>
</li>
<li>
<p class="Numbering">Toggle <span style="font-weight: bold;"><b>checkbox</b></span> for a host (e.g. <span style="font-style: italic;"><i>2000pro</i></span>).</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Add Hosts</b></span>. The host will appear in the upper field as an assigned host.</p>
</li>
</ol>
<h4><a name="MiniTOCBookMark25" id="MiniTOCBookMark25"></a>Commit changes and Build Externals</h4>
<p class="Bullet1">Commit changes to <span style="font-style: italic;"><i>GroundWork Monitor</i></span> and create a GDMA configuration file.</p>
<ol>
<li>
<p class="Numbering">In <span style="font-weight: bold;"><b>Configuration</b></span>, select <span style="font-weight: bold;"><b>Control</b></span>.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Commit</b></span>, <span style="font-weight: bold;"><b>Backup</b></span>, <span style="font-weight: bold;"><b>Commit</b></span>.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Run externals</b></span>.</p>
</li>
<li>
<p class="Numbering">The configuration file will be created in <span class="CodeInline">/usr/local/groundwork/apache2/htdocs/gdma</span> as defined in the <span style="font-style: italic;"><i>windows-gdma</i></span> monarch group. The filename will be <span class="CodeInline">gwmon_$hostname.cfg</span> in this example <span class="CodeInline">gwmon_2000pro.cfg</span></p>
</li>
</ol>
<p class="GroupCode2">#ls -al /usr/local/groundwork/apache2/htdocs/gdma/gwmon_2000pro.cfg</p>
<p class="GroupCode2">-rw-r--r-- 1 nagios nagios /usr/local/groundwork/apache2/htdocs/gdma/gwmon_2000pro.cfg</p>
<p class="GroupCode2">#</p>
<h4><a name="MiniTOCBookMark26" id="MiniTOCBookMark26"></a>Client Install/Upgrade for Windows GDMA</h4>
<p>Use this procedure to install the <span style="font-style: italic;"><i>Windows GDMA</i></span> on <span style="font-style: italic;"><i>Windows</i></span> hosts. If upgrading, you must first uninstall the legacy <span style="font-style: italic;"><i>GDMA</i></span> client.</p>
<h5><a name="MiniTOCBookMark27" id="MiniTOCBookMark27"></a>To uninstall a legacy client:</h5>
<ol>
<li>
<p class="Numbering">Access the <span style="font-style: italic;"><i>Windows</i></span> client user interface.</p>
</li>
<li>
<p class="Numbering">Start a command window.</p>
</li>
<li>
<p class="Numbering">Stop the <span style="font-style: italic;"><i>GDMA</i></span> service with the command:</p>
</li>
</ol>
<p class="GroupCode2">net stop gdma</p>
<ol start="4" type="1">
<li>
<p class="Numbering">Remove the <span style="font-style: italic;"><i>GDMA</i></span> service with the command:</p>
</li>
</ol>
<p class="GroupCode2">sc delete gdma</p>
<ol start="5" type="1">
<li>
<p class="Numbering">Backup any custom plugins you may have added to the <span style="font-style: italic;"><i>GDMA</i></span> in the <span class="CodeInline">c:\groundwork</span> directory structure. You will need to move these to the new location.</p>
</li>
<li>
<p class="Numbering">(Optional) Delete the directory <span class="CodeInline">c:\groundwork</span> and all subdirectories.</p>
</li>
</ol>
<h5><a name="MiniTOCBookMark28" id="MiniTOCBookMark28"></a>To install a Windows GDMA 2.2.3 client:</h5>
<ol>
<li>
<p class="Numbering">Access the <span style="font-style: italic;"><i>Windows</i></span> client user interface.</p>
</li>
<li>
<p class="Numbering">Transfer the binary installer file to a temporary location on the local disk.</p>
</li>
<li>
<p class="Numbering">Start a command window.</p>
</li>
<li>
<p class="Numbering">Change to the temporary directory.</p>
</li>
<li>
<p class="Numbering">Type the name of the binary installer.</p>
</li>
</ol>
<p style="margin-left: 40px;"><img src="Assets/gdma_windowsgdmasetup7.gif" alt="gdma_windowsgdmasetup7.gif" style="border: none;" width="538" height="270" border="0" /></p>
<p>Follow the prompts on the screen. If you are using the <span style="font-style: italic;"><i>Auto-configuration</i></span> feature, you should leave the <span style="font-style: italic;"><i>Target</i></span> server as <span class="CodeInline">gdma-autohost</span>. If not, you should fill in the <span style="font-style: italic;"><i>Target</i></span> server hostname or IP address.</p>
<p>If you wish to install the <span style="font-style: italic;"><i>GDMA</i></span> via a scripted method, such as a software distribution package or a batch script, you may wish to take advantage of the unattended mode option. Type the name of the binary installer followed by <span class="CodeInline">--help</span> for a list of available options.</p>
<h2><a name="MiniTOCBookMark29" id="MiniTOCBookMark29"></a>Linux GDMA Setup</h2>
<p>This section describes the steps necessary to configure <span style="font-style: italic;"><i>GDMA</i></span> agents for <span style="font-style: italic;"><i>Linux</i></span> systems including a basic installation.</p>
<h3><a name="MiniTOCBookMark30" id="MiniTOCBookMark30"></a>Prerequisites</h3>
<p class="Bullet1">The following prerequisites exist for configuring <span style="font-style: italic;"><i>Linux GDMA</i></span> agents</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1"><i style="font-style: italic;"><span style="font-style: italic;"><i>GroundWork Monitor</i></span> <span style="font-style: normal;">6.1</span></i> or later correctly installed.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><i style="font-style: italic;"><span style="font-style: italic;"><i>GroundWork</i></span> <span>Target</span></i> server configuration complete.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">Administrative access to <span style="font-style: italic;"><i>GroundWork Monitor</i></span> and monitored systems and familiarity with the administration of <span style="font-style: italic;"><i>Linux</i></span>, <span style="font-style: italic;"><i>GroundWork</i></span>, and <span style="font-style: italic;"><i>Windows</i></span> systems.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">Taking a backup of the monarch database is highly recommended before beginning this operation See Bookshelf <a href="../System_Maintenance/systemmaintenance_backupandrestore.htm">System Maintenance&gt;Backup and Restore</a> for details.</p>
</li>
</ul>
<h3><a name="MiniTOCBookMark31" id="MiniTOCBookMark31"></a>GroundWork Monitor Setup</h3>
<h4><a name="MiniTOCBookMark32" id="MiniTOCBookMark32"></a>Import GDMA Linux Base OS Host and Service Profile</h4>
<p>The <span style="font-style: italic;"><i>Linux Base OS</i></span> profile provides configuration parameters for the creation of <span style="font-style: italic;"><i>Linux</i></span> targets.</p>
<p style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a14" style="font-size: 8pt;" name="a14"><img src="../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" />Show/Hide</a></p>
<div class="droptext" id="POPUP405017184" style="display: none;">
<p><img src="Assets/gdma_linuxgdmasetup1.gif" alt="gdma_linuxgdmasetup1.gif" style="border: none;" width="700" height="255" border="0" /></p>
</div>
<ol>
<li>
<p class="Numbering">In <span style="font-weight: bold;"><b>Configuration</b></span>, select <span style="font-weight: bold;"><b>Profiles</b></span>.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Profile importer</b></span>.</p>
</li>
<li>
<p class="Numbering">Toggle the checkbox to select <span style="font-style: italic;"><i>gdma-21-linux-host.xml</i></span>.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Import</b></span> at the bottom of the screen.</p>
</li>
</ol>
<h4><a name="MiniTOCBookMark33" id="MiniTOCBookMark33"></a>Review and Modify gdma-21-linux Host Externals Properties</h4>
<p style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a15" style="font-size: 8pt;" name="a15"><img src="../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" />Show/Hide</a></p>
<div class="droptext" id="POPUP410467061" style="display: none;">
<p><img src="Assets/gdma_linuxgdmasetup3.gif" alt="gdma_linuxgdmasetup3.gif" style="border: none;" width="700" height="407" border="0" /></p>
</div>
<ol>
<li>
<p class="Numbering">In <span style="font-weight: bold;"><b>Configuration</b></span>, select <span style="font-weight: bold;"><b>Hosts</b></span>, Host Externals.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Modify</b></span>.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>gdma-21-linux</b></span>.</p>
</li>
<li>
<p class="Numbering">Here you can modify the <span style="font-style: italic;"><i>Target_Server</i></span> parameter. This parameter controls where <span style="font-style: italic;"><i>GDMA</i></span> agents will download their configurations from and where they will send check results. The parameter must be in the form of a URL. This parameter is normally set to the hostname or IP address of the <span style="font-style: italic;"><i>Master</i></span> system. For details on this and other configuration parameters see <a href="gdma_configurationreference.htm" target="_blank">GDMA Configuration Reference</a>.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Save</b></span>.</p>
</li>
</ol>
<h4><a name="MiniTOCBookMark34" id="MiniTOCBookMark34"></a>Configure a GDMA Linux Host</h4>
<p style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a16" style="font-size: 8pt;" name="a16"><img src="../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" />Show/Hide</a></p>
<div class="droptext" id="POPUP405014155" style="display: none;">
<p><img src="Assets/gdma_linuxgdmasetup4.gif" alt="gdma_linuxgdmasetup4.gif" style="border: none;" width="700" height="275" border="0" /></p>
</div>
<ol>
<li>
<p class="Numbering">In <span style="font-weight: bold;"><b>Configuration</b></span>, <span style="font-weight: bold;"><b>Hosts</b></span>.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Host Wizard</b></span>.</p>
</li>
<li>
<p class="Numbering">Fill in <span style="font-weight: bold;"><b>Host Name</b></span> (e.g.<span style="font-style: italic;"><i>linux_gdma</i></span>).</p>
</li>
<li>
<p class="Numbering">Fill in Alias (e.g. <span style="font-style: italic;"><i>linux_gdma</i></span>).</p>
</li>
<li>
<p class="Numbering">Fill in Address (e.g. <span style="font-style: italic;"><i>196.168.11.220</i></span>).</p>
</li>
<li>
<p class="Numbering">Select <span style="font-style: italic;"><i>gdma-21-linux-host</i></span> as the <span style="font-weight: bold;"><b>Host profile</b></span>.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Next</b></span> (4x), then select <span style="font-weight: bold;"><b>Continue</b></span>. You may optionally place the host in a hostgroup and configure additional host, service and notification options.</p>
</li>
</ol>
<h4><a name="MiniTOCBookMark35" id="MiniTOCBookMark35"></a>Add a New Host to a Monarch Group</h4>
<p style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a17" style="font-size: 8pt;" name="a17"><img src="../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" />Show/Hide</a></p>
<div class="droptext" id="POPUP405067366" style="display: none;">
<p><img src="Assets/gdma_linuxgdmasetup6.gif" alt="gdma_linuxgdmasetup6.gif" style="border: none;" width="700" height="605" border="0" /></p>
</div>
<ol>
<li>
<p class="Numbering">In <span style="font-weight: bold;"><b>Configuration</b></span>, select <span style="font-weight: bold;"><b>Groups</b></span>.</p>
</li>
<li>
<p class="Numbering">Expand <span style="font-weight: bold;"><b>Groups</b></span>.</p>
</li>
<li>
<p class="Numbering">Expand <span style="font-style: italic;"><i>unix-gdma-2.1</i></span>.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Detail</b></span>.</p>
</li>
<li>
<p class="Numbering">Select the <span style="font-weight: bold;"><b>Hosts</b></span> tab.</p>
</li>
<li>
<p class="Numbering">Toggle <span style="font-weight: bold;"><b>checkbox</b></span> for a host (e.g. <span style="font-style: italic;"><i>linux-gdma</i></span>).</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Add Hosts</b></span>. The host will appear in the upper field as an assigned host.</p>
</li>
</ol>
<h4><a name="MiniTOCBookMark36" id="MiniTOCBookMark36"></a>Commit Changes and Build Externals</h4>
<p class="Bullet1">Commit changes to <span style="font-style: italic;"><i>GroundWork Monitor</i></span> and create a <span style="font-style: italic;"><i>GDMA</i></span> configuration file.</p>
<ol>
<li>
<p class="Numbering">In <span style="font-weight: bold;"><b>Configuration</b></span>, select <span style="font-weight: bold;"><b>Control</b></span>.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Commit</b></span>, <span style="font-weight: bold;"><b>Commit</b></span>.</p>
</li>
<li>
<p class="Numbering">Select <span style="font-weight: bold;"><b>Run externals</b></span>.</p>
</li>
<li>
<p class="Numbering">The configuration file will be created in <span class="CodeInline">/usr/local/groundwork/apache2/htdocs/gdma</span> as defined in the unix-gdma-2.1 monarch group. The filename will be <span class="CodeInline">gwmon_$hostname.cfg</span> in this example <span class="CodeInline">gwmon_linux-gdma.cfg</span></p>
</li>
</ol>
<p class="GroupCode2">#ls -al /usr/local/groundwork/apache2/htdocs/gdma/gwmon_linux-gdma.cfg</p>
<p class="GroupCode2">-rw-r--r-- 1 nagios nagios /usr/local/groundwork/apache2/htdocs/gdma/gwmon_linux-gdma.cfg</p>
<p class="GroupCode2">#</p>
<h4><a name="MiniTOCBookMark37" id="MiniTOCBookMark37"></a>Client Install/Upgrade for Linux GDMA</h4>
<p>Use this procedure to install the <span style="font-style: italic;"><i>Linux GDMA</i></span> on <span style="font-style: italic;"><i>Linux</i></span> hosts. If upgrading, you must first uninstall the legacy <span style="font-style: italic;"><i>GDMA</i></span> client.</p>
<h5><a name="MiniTOCBookMark38" id="MiniTOCBookMark38"></a>To uninstall a legacy client:</h5>
<ol>
<li>
<p class="Numbering">Access the client command line interface.</p>
</li>
<li>
<p class="Numbering">Backup any custom plugins you may have added to the <span style="font-style: italic;"><i>GDMA</i></span> in the <span class="CodeInline">/usr/local/groundowrk</span> directory structure. You will need to move these to the new location.</p>
</li>
<li>
<p class="Numbering">Delete the directory <span class="CodeInline">/usr/local/groundwork</span> and all subdirectories.</p>
</li>
<li>
<p class="Numbering">Type: <span class="CodeInline">chkconfig gdma off</span></p>
</li>
<li>
<p class="Numbering">Type: <span class="CodeInline">/etc/init.d/gdma stop</span></p>
</li>
<li>
<p class="Numbering">Remove the file <span class="CodeInline">/etc/init.d/gdma</span> file with the command: <span class="CodeInline">rm /etc/init.d/gdma</span></p>
</li>
<li>
<p class="Numbering">Remove the entire <span class="CodeInline">/usr/local/groundwork</span> directory with the command: <span class="CodeInline">rm -Rf /usr/local/groundwork</span></p>
</li>
</ol>
<p class="Numbering" style="margin-left: 40px;"><span><font color="#FF0000"><b style="font-weight: bold;">Note:</b></font></span> <span style="font-style: italic;"><i>Linux GDMA 2.1</i></span> can be uninstalled with the script: <span class="CodeInline">/usr/local/groundwork/uninstall</span></p>
<h5><a name="MiniTOCBookMark39" id="MiniTOCBookMark39"></a>To install a Linux GDMA 2.2.3 client:</h5>
<ol>
<li>
<p class="Numbering">Access the client command line interface.</p>
</li>
<li>
<p class="Numbering">Transfer the binary installer file to a temporary location on the local disk.</p>
</li>
<li>
<p class="Numbering">Change to the temporary directory.</p>
</li>
<li>
<p class="Numbering">Type: <span class="CodeInline">chmod +x groundworkagent-2.1-14-linux-32-installer.bin</span>, to make the installer executable. Substitute the name of your installer.</p>
</li>
</ol>
<p class="Numbering" style="margin-left: 40px;"><span><font color="#FF0000"><b style="font-weight: bold;">Note:</b></font></span> <span style="font-style: italic;"><i>Linux GDMA</i></span> has a 32 and a 64 bit version. Please select the correct one for your architecture.</p>
<p>Follow the prompts on the screen. If you are using the <span style="font-style: italic;"><i>Auto-configuration</i></span> feature, you should leave the <span style="font-style: italic;"><i>Target</i></span> server as <span class="CodeInline">gdma-autohost</span>. If not, you should fill in the <span style="font-style: italic;"><i>Target</i></span> server hostname or IP address.</p>
<p>If you wish to install the <span style="font-style: italic;"><i>GDMA</i></span> via a scripted method, such as a software distribution package or a batch script, you may wish to take advantage of the unattended mode option. Type the name of the binary installer followed by <span class="CodeInline">--help</span> for a list of available options.</p>
<div style="width: 100%; position: relative;" id="footer">
<p class="Footer" style="font-size: 7pt; line-height: Normal; margin-top: 6pt; margin-bottom: 4pt;">GroundWork, Inc. ©2011</p>
</div>
<script type="text/javascript" language="JavaScript1.2">
//<![CDATA[
        if( typeof( TextPopupInit ) != 'function' ) TextPopupInit = new Function();
        TextPopupInit('a5','POPUP403610077');
        TextPopupInit('a2','POPUP410430818');
        TextPopupInit('a3','POPUP403379324');
        TextPopupInit('a10','POPUP410997058');
        TextPopupInit('a11','POPUP403396560');
        TextPopupInit('a12','POPUP405263593');
        TextPopupInit('a13','POPUP407187683');
        TextPopupInit('a14','POPUP405017184');
        TextPopupInit('a15','POPUP410467061');
        TextPopupInit('a16','POPUP405014155');
        TextPopupInit('a17','POPUP405067366');
//]]>
</script><script type="text/javascript" language="javascript1.2">
//<![CDATA[
<!--
if (window.writeIntopicBar)
        writeIntopicBar(0);


highlightSearch();
//-->
//]]>
</script>
</body>
</html>
