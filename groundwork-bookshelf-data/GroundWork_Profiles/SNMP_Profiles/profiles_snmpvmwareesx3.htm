<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0014)about:internet -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Adobe RoboHelp 8" />
<title>SNMP VMware ESX3</title>
<link rel="StyleSheet" href="../../Bookshelf.css" type="text/css" />
<script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
        origWidth = innerWidth;
        origHeight = innerHeight;
        onresize = reDo;
}
onerror = null; 
//]]>
</script>
<style type="text/css">
/*<![CDATA[*/
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
-->
/*]]>*/
</style>

<script type="text/javascript" language="javascript1.2" src="../../whmsg.js">
</script>
<script type="text/javascript" language="javascript" src="../../whver.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../../whproxy.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../../whutils.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../../whlang.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../../whtopic.js">
</script>
</head>
<body>
<script type="text/javascript" language="javascript1.2">
//<![CDATA[
<!--
if (window.gbWhTopic)
{
        var strUrl = document.location.href;
        var bc = 0;
        var n = strUrl.toLowerCase().indexOf("bc-");
        if(n != -1)
        {
                document.location.href = strUrl.substring(0, n);
                bc = strUrl.substring(n+3);
        }

        if (window.addTocInfo)
        {
        addTocInfo("GROUNDWORK PROFILES\nSNMP Profiles\nSNMP VMWare ESX3");
addButton("show",BTN_TEXT,"Show Table of Contents","","","","",0,0,"","","");

        }
        if (window.writeBtnStyle)
                writeBtnStyle();

        if (window.writeIntopicBar)
                writeIntopicBar(1);

        
        

        if (window.setRelStartPage)
        {
        setRelStartPage("../../Bookshelf.htm");

                autoSync(0);
                sendSyncInfo();
                sendAveInfoOut();
        }
}
else
        if (window.gbIE4)
                document.location.reload();

//-->
//]]>
</script><script type="text/javascript" language="JavaScript1.2" src="../../ehlpdhtm.js">
</script><script type="text/javascript" language="javascript">
//<![CDATA[
document.write("<p  style=\"text-align:right;color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;\">");
AddMasterBreadcrumbs("../../Bookshelf.htm", "color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;", "&gt;", "Home", "../../Welcome_to_GroundWork_Monitor/index.htm");
document.write("<a style=\"color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;\" href=\"../profiles_aboutprofiles.htm\">GROUNDWORK PROFILES<\/a> &gt; <a style=\"color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;\" href=\"profiles_snmpaix.htm\">SNMP Profiles<\/a> &gt; SNMP VMWare ESX3<\/p>");
//]]>
</script>
<p>&#160;</p>
<h1><a name="MiniTOCBookMark1" id="MiniTOCBookMark1"></a><img src="../../Shared_Images/square.gif" alt="square.gif" style="border: none;" width="15" height="15" border="0" /> GroundWork Profiles</h1>
<h3 align="right"><a href="../profiles_aboutprofiles.htm"><img src="../../Shared_Images/homeicon.gif" alt="homeicon.gif" style="border: none;" width="33" height="27" border="0" /></a> <img src="../../Shared_Images/printicon.gif" onclick="window.print()" alt="Print Page" title="Print Page" style="border: none;" width="31" height="27" border="0" /> <a href="mailto:support@groundworkopensource.com?subject=SNMP VMware ESX3 Profile" title="Send Comments"><img src="../../Shared_Images/commentsicon.gif" alt="commentsicon.gif" style="border: none;" width="33" height="27" border="0" /></a></h3>
<h2><a name="MiniTOCBookMark2" id="MiniTOCBookMark2"></a>VMware ESX3 SERVER PROFILE</h2>
<p style="font-size: 10pt;"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>Note:</b></font></span> <span style="font-weight: bold;"><b>This VMWare ESX3 Server Profile has been deprecated. Please go to:</b></span> <a href="../Remote_Service_Profiles/profiles_vmwareesxvsphere.htm" style="font-size: 10pt;">VMware ESX vSphere</a></p>
<p align="left">Table&#160;of&#160;Contents:&#160;<a class="dropspot" href="javascript:TextPopup(this)" id="MTHotSpot42760" name="MTHotSpot42760"><span class="MTText">Show</span><span class="MTText" style="display: none;">Hide</span></a></p>
<script type="text/javascript" language="JavaScript1.2">
//<![CDATA[
TextPopupInit('MTHotSpot42760', 'MTPOPUP42760');
//]]>
</script>
<div align="left" class="droptext" id="MTPOPUP42760" style="display: none;">
<ul style="text-align:left; list-style-type: circle;">
<li><a href="#MiniTOCBookMark3">Services Configuration</a></li>
<li><a href="#MiniTOCBookMark4">Profile Package</a></li>
<li><a href="#MiniTOCBookMark5">Installation</a></li>
<li><a href="#MiniTOCBookMark6">Implementation</a></li>
</ul>
</div>
<p>This profile monitors an instance of the VMWare ESX 3 virtualization software. It can also be configured to monitor the guest operating systems underneath the installed instance. Please see <span style="font-weight: bold;"><b>Implementation Notes</b></span> below.</p>
<p><span style="font-weight: bold;"><b>Example</b></span>: Check disk with check_esx3_gs.pl</p>
<p>running ./check_esx3_gw.pl -h to specify thresholds for disk:</p>
<p>*DISK is megabytes/sec over the sampling interval. Thresholds are raw megabytes/sec.*</p>
<p>*e.g.: -l DISK -w 45 -c 99 &#160;will return a warning when thrashing at &gt; 45 megabytes/sec.*</p>
<h3><a name="MiniTOCBookMark3" id="MiniTOCBookMark3"></a>Services Configuration</h3>
<ul style="list-style: url('../../Shared_Images/bullet01.gif');">
<li class="p-Bullet1">
<p class="Bullet1"><span style="font-weight: bold;"><b>SERVICE</b></span> - Definitions in Monarch are stored under this name.</p>
</li>
<li class="p-Bullet1">
<p class="Bullet1"><span style="font-weight: bold;"><b>COMMAND LINE</b></span> - Service command name with arguments to be passed to the plugin.</p>
</li>
<li class="p-Bullet1">
<p class="Bullet1"><span style="font-weight: bold;"><b>PLUGIN COMMAND LINE</b></span> - Plugin script called by Nagios for this Service.</p>
</li>
<li class="p-Bullet1">
<p class="Bullet1"><span style="font-weight: bold;"><b>EXTENDED INFO</b></span> - The Extended Service Info definition, typically used for generating graphs.</p>
</li>
</ul>
<p><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>Note:</b></font></span> Command lines displayed below are intended to be single line commands.</p>
<table cellspacing="0" width="700">
<col style="width: 20%;" />
<col style="width: 36%;" />
<col style="width: 30%;" />
<col style="width: 14%;" />
<tr style="vertical-align: top;">
<td style="border: Solid 2px #ffffff; width: 20%; padding-right: 10px; padding-left: 10px;" bgcolor="#1B3A83">
<p class="NormalTableBoldCenter">Service</p>
</td>
<td style="border-top: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 36%; padding-right: 10px; padding-left: 10px;" bgcolor="#1B3A83">
<p class="NormalTableBoldCenter">Command Line</p>
</td>
<td style="border-top: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 30%; padding-right: 10px; padding-left: 10px;" bgcolor="#1B3A83">
<p class="NormalTableBoldCenter">Plugin Command Line</p>
</td>
<td style="border-top: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 15%; padding-right: 10px; padding-left: 10px;" bgcolor="#1B3A83">
<p class="NormalTableBoldCenter">Extended Info</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 20%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">snmp_esx3_instance_list</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 36%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">check_esx_gw_vm_instance_list!10%!5%</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 30%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">$USER1$/check_esx3_gw.pl -H $HOSTADDRESS$ -C $USER7$ -l LIST -w $ARG1$ -c $ARG2$</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 14%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">&#160;</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 20%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">snmp_esx3_memory_available</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 36%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">check_snmp_esx3_available_mem</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 30%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">$USER1$/check_snmp -H $HOSTADDRESS$ -o ".1.3.6.1.4.1.6876.3.2.3.0" -l "Available Mem" &#160;-C '$USER7$'</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 14%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">&#160;</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 20%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">snmp_esx3_memory_console</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 36%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">snmp_esx3_memory_console</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 30%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">$USER1$/check_snmp -H $HOSTADDRESS$ -o ".1.3.6.1.4.1.6876.3.2.2.0" -l "Console Used Mem" &#160;-C '$USER7$'</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 14%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">&#160;</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 20%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">snmp_esx3_memory_total</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 36%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">check_snmp_esx3_total_mem</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 30%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">$USER1$/check_snmp -H $HOSTADDRESS$ -o ".1.3.6.1.4.1.6876.3.2.1.0" -l "Total_server_memory" &#160;-C '$USER7$'</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 14%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">&#160;</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 20%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">snmp_esx3_num_system_processes</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 36%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">check_snmp_esx3_num_system_processes</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 30%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">$USER1$/check_snmp -H $HOSTADDRESS$ -o ".1.3.6.1.2.1.25.1.6.0" -l "number_processes" &#160;-C '$USER7$'</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 14%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">&#160;</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 20%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">snmp_esx3_num_users</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 36%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">check_snmp_esx3_num_users</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 30%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">$USER1$/check_snmp -H $HOSTADDRESS$ -o ".1.3.6.1.2.1.25.1.5.0" -l "Number of Users" &#160;-C '$USER7$'</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 14%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">&#160;</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 20%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">snmp_esx3_server_cpu</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 36%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">check_esx_gw_server_cpu!85!95</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 30%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">$USER1$/check_esx3_gw.pl -H $HOSTADDRESS$ -C $USER7$ -l CPU -w $ARG1$ -c $ARG2$</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 14%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">&#160;</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 20%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">snmp_esx3_server_mem</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 36%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">check_esx_gw_server_mem!5000!2000</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 30%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">$USER1$/check_esx3_gw.pl -H $HOSTADDRESS$ -C $USER7$ -l MEM -w $ARG1$ -c $ARG2$</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 14%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">&#160;</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 20%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">snmp_esx3_server_net</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 36%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">check_esx_gw_server_net!120!150</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 30%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">$USER1$/check_esx3_gw.pl -H $HOSTADDRESS$ -C $USER7$ -l NET -w $ARG1$ -c $ARG2$</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 14%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">&#160;</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 20%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">snmp_esx3_uptime</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 36%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">check_snmp_esx3_uptime</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 30%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">$USER1$/check_snmp -H $HOSTADDRESS$ -o ".1.3.6.1.2.1.25.1.1.0" -r "Timeticks" &#160;-C '$USER7$'</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 14%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">&#160;</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 20%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">snmp_esx3_vm_cpu_Despina_1</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 36%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">check_esx_gw_vm_instance_cpu!</p>
<p class="CourierTable">Despina_1!80!90</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 30%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">$USER1$/check_esx3_gw.pl -H $HOSTADDRESS$ -C $USER7$ -l CPU -V $ARG1$ -w $ARG2$ -c $ARG3$</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 14%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">&#160;</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 20%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">snmp_esx3_vm_mem_Despina_1</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 36%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">check_esx_gw_vm_instance_mem!</p>
<p class="CourierTable">Despina_1!80!90</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 30%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">$USER1$/check_esx3_gw.pl -H $HOSTADDRESS$ -C $USER7$ -l MEM -V $ARG1$ -w $ARG2$ -c $ARG3$</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 14%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">&#160;</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 20%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">snmp_esx3_vm_net_Despina_1</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 36%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">check_esx_gw_vm_instance_net!</p>
<p class="CourierTable">Despina_1!80!90</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 30%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">$USER1$/check_esx3_gw.pl -H $HOSTADDRESS$ -C $USER7$ -l NET -V $ARG1$ -w $ARG2$ -c $ARG3$</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 14%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">&#160;</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 20%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">icmp_ping_alive</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 36%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">check_alive</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 30%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">$USER1$/check_icmp -H $HOSTADDRESS$ -w 3000.0,80% -c 5000.0,100% -n 1</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 14%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">number_graph</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 20%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">tcp_ssh</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 36%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">check_ssh</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 30%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">$USER1$/check_ssh -H $HOSTADDRESS$ -t 60</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; width: 14%; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">number_graph</p>
</td>
</tr>
</table>
<h3><a name="MiniTOCBookMark4" id="MiniTOCBookMark4"></a>Profile Package</h3>
<p>This package includes the following files:</p>
<p>Profile Definitions</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">service-profile-snmp-vmware-esx3.xml</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">perfconfig-snmp-vmware-esx3.xml</p>
</li>
</ul>
<p>Plugins Scripts (installed with the GroundWork Monitor product)</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">check_esx3_gw.pl</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">check_ssh</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">check_icmp</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">check_check_snmp</p>
</li>
</ul>
<p>Files and Scripts for installation on VMWare ESX 3 server</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">defesxtop.cfg</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">snmpd.conf</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">vmware-statgen-gw</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">vmware_statsgen.conf</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">vmware-stats-gw</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">esxtop3rc</p>
</li>
</ul>
<p>Performance Graphing Programs</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">number_graph.cgi</p>
</li>
</ul>
<h3><a name="MiniTOCBookMark5" id="MiniTOCBookMark5"></a>Installation</h3>
<p>GroundWork Monitor includes many monitoring profiles for a variety of devices, systems and applications. Profiles already imported on a new GroundWork installation include Service Ping, SNMP Network, and SSH UNIX. The GroundWork Monitor Configuration tool is used to import updated Profiles and Profiles that require additional setup; the Profile XML file and its companion Performance Configuration definition file. Services can also be imported in addition to Service Profiles in the Profile Importer. The import process is documented under <span style="font-weight: bold;"><b>GROUNDWORK PROFILES &gt; <a href="../profiles_importingprofiles.htm" style="font-weight: bold;">Importing Profiles</a></b></span>.</p>
<p>In addition this profile requires files and scripts (identified above in the Profile Package section) to be installed and configured on the VMWare ESX3 server. &#160;Refer to the Implementation Notes section below.</p>
<h3><a name="MiniTOCBookMark6" id="MiniTOCBookMark6"></a><b style="font-weight: bold;">Implementation</b></h3>
<p>This section contains detail settings used by this Profile. These parameters can be altered with the Configuration tool.</p>
<h4><a name="MiniTOCBookMark7" id="MiniTOCBookMark7"></a>Command Parameters</h4>
<p>Command parameters are in the Configuration Services section with the following names and default values. Any <span style="font-weight: bold; color: #ff0000;"><font color="red"><b>bolded</b></font></span> arguments MUST be set before this Service Profile will work properly.</p>
<p>snmp_esx3_instance_list</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Returns a list of VMWare guest instances installed on the VMWare ESX 3 server.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$USER7$</b></font></span> - SNMP community string. &#160;This has no default but must be set in order for the profile to function. &#160;The community string must match one of those configured in the snmpd.conf file on the VMWare ESX 3 server.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">$ARG1$ - Default is 10%. &#160;This is the warning threshold for the number of guests that need to be up as a percentage of the total number.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">$ARG2$ - Default is 5%. &#160;This is the critical threshold for the number of guests that need to be up as a percentage of the total number.</p>
</li>
</ul>
<p>snmp_esx3_memory_available</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Returns the available memory to VMWare guests in bytes.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$USER7$</b></font></span> - SNMP community string. &#160;This has no default but must be set in order for the profile to function. &#160;The community string must match one of those configured in the snmpd.conf file on the VMWare ESX 3 server.</p>
</li>
</ul>
<p>snmp_esx3_memory_console</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Returns the memory used by the ESX console in bytes.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$USER7$</b></font></span> - SNMP community string. &#160;This has no default but must be set in order for the profile to function. &#160;The community string must match one of those configured in the snmpd.conf file on the VMWare ESX 3 server.</p>
</li>
</ul>
<p>snmp_esx3_memory_total</p>
<ul style="list-style: url('../../Shared_Images/bullet01.gif');">
<li class="P-Bullet1" style="display: inline;">
<p class="Bullet1">Returns the total amount of memory on the server in bytes. &#160;This should be equal to the available memory plus the memory used by the ESX console.</p>
</li>
<li class="P-Bullet1" style="display: inline;">
<p class="Bullet1"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$USER7$</b></font></span> - SNMP community string. &#160;This has no default but must be set in order for the profile to function. &#160;The community string must match one of those configured in the snmpd.conf file on the VMWare ESX 3 server.</p>
</li>
</ul>
<p>snmp_esx3_num_system_processes</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Returns the number of processes running in the ESX console.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$USER7$</b></font></span> - SNMP community string. &#160;This has no default but must be set in order for the profile to function. &#160;The community string must match one of those configured in the snmpd.conf file on the VMWare ESX 3 server.</p>
</li>
</ul>
<p>snmp_esx3_num_users</p>
<ul style="list-style: url('../../Shared_Images/bullet01.gif');">
<li class="P-Bullet1">
<p class="Bullet1">Returns the number of users logged in to the ESX console.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$USER7$</b></font></span> - SNMP community string. &#160;This has no default but must be set in order for the profile to function. &#160;The community string must match one of those configured in the snmpd.conf file on the VMWare ESX 3 server.</p>
</li>
</ul>
<p>snmp_esx3_server_cpu</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Returns the CPU utilization of the ESX server as a percentage.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$USER7$</b></font></span> - SNMP community string. &#160;This has no default but must be set in order for the profile to function. &#160;The community string must match one of those configured in the snmpd.conf file on the VMWare ESX 3 server.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">$ARG1$ - Default is 85. &#160;This is the warning threshold for the percentage of CPU utilization.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">$ARG2$ - Default is 95. &#160;This is the warning threshold for the percentage of CPU utilization.</p>
</li>
</ul>
<p>snmp_esx3_server_mem</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Returns the available memory of the ESX server in megabytes, and of the ESX console as a percentage used.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$USER7$</b></font></span> - SNMP community string. &#160;This has no default but must be set in order for the profile to function. &#160;The community string must match one of those configured in the snmpd.conf file on the VMWare ESX 3 server.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">$ARG1$ - Default is 5000. &#160;This is the warning threshold in megabytes of available memory below which an alarm will be generated. &#160;This value should be adjusted appropriately based on the amount of memory your server has.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">$ARG2$ - Default is 2000. &#160;This is the critical threshold in megabytes of available memory below which an alarm will be generated. &#160;This value should be adjusted appropriately based on the amount of memory your server has.</p>
</li>
</ul>
<p>snmp_esx3_server_net</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Returns the total network I/O in megabits per second.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$USER7$</b></font></span> - SNMP community string. &#160;This has no default but must be set in order for the profile to function. &#160;The community string must match one of those configured in the snmpd.conf file on the VMWare ESX 3 server.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">$ARG1$ - Default is 120. &#160;This is the warning threshold in megabits per second above which an alarm will be generated.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">$ARG2$ - Default is 150. &#160;This is the warning threshold in megabits per second above which an alarm will be generated.</p>
</li>
</ul>
<p>snmp_esx3_uptime</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Returns the number of seconds that the ESX server has been up.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$USER7$</b></font></span> - SNMP community string. &#160;This has no default but must be set in order for the profile to function. &#160;The community string must match one of those configured in the snmpd.conf file on the VMWare ESX 3 server.</p>
</li>
</ul>
<p>snmp_esx3_vm_cpu_Despina_1</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Returns the CPU utilization of the guest instance ‘Despina_1’ as a percentage.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$USER7$</b></font></span> - SNMP community string. &#160;This has no default but must be set in order for the profile to function. &#160;The community string must match one of those configured in the snmpd.conf file on the VMWare ESX 3 server.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">$ARG1$ - Default is ‘Despina_1’. &#160;This is the name of the guest instance. &#160;You will want to change this argument to match the guest instance you wish to monitor. &#160;You will also want to make a corresponding change to the service name to reflect the guest instance name.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">$ARG2$ - Default is 85. &#160;This is the warning threshold for the percentage of CPU utilization.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">$ARG3$ - Default is 95. &#160;This is the warning threshold for the percentage of CPU utilization.</p>
</li>
</ul>
<p>snmp_esx3_vm_mem_Despina_1</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Returns the memory utilization of the guest instance ‘Despina_1’ as a percentage.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$USER7$</b></font></span> - SNMP community string. &#160;This has no default but must be set in order for the profile to function. &#160;The community string must match one of those configured in the snmpd.conf file on the VMWare ESX 3 server.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">$ARG1$ - Default is ‘Despina_1’. &#160;This is the name of the guest instance. &#160;You will want to change this argument to match the guest instance you wish to monitor. &#160;You will also want to make a corresponding change to the service name to reflect the guest instance name.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">$ARG2$ - Default is 80. &#160;This is the warning threshold for the percentage of memory used.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">$ARG3$ - Default is 90. &#160;This is the critical threshold for the percentage of memory used.</p>
</li>
</ul>
<p>snmp_esx3_vm_net_Despina_1</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Returns the total network I/O in megabits per second for the guest instance ‘Despina_1’.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$USER7$</b></font></span> - SNMP community string. &#160;This has no default but must be set in order for the profile to function. &#160;The community string must match one of those configured in the snmpd.conf file on the VMWare ESX 3 server.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">$ARG1$ - Default is ‘Despina_1’. &#160;This is the name of the guest instance. &#160;You will want to change this argument to match the guest instance you wish to monitor. &#160;You will also want to make a corresponding change to the service name to reflect the guest instance name.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">$ARG2$ - Default is 80. &#160;This is the warning threshold in megabits per second above which an alarm will be generated.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">$ARG3$ - Default is 90. &#160;This is the warning threshold in megabits per second above which an alarm will be generated.</p>
</li>
</ul>
<p>icmp_ping_alive</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Returns the round trip time and packet loss for an ICMP ping check against the VMWare ESX 3 host address.</p>
</li>
</ul>
<p>tcp_ssh</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Returns the success or failure of an attempt to connect to the SSH port on the VMWare ESX 3 host address.</p>
</li>
</ul>
<h4><a name="MiniTOCBookMark8" id="MiniTOCBookMark8"></a>Performance Graphing Parameters</h4>
<p>The following parameters are used to generate performance charts. These parameters are set using the Configuration&gt;Performance tool in GroundWork Monitor.</p>
<p>snmp_esx3_server_cpu</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Graphs the CPU utilization of the ESX server as a percentage.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">The Nagios service description must match the string "snmp_esx3_server_cpu".</p>
</li>
</ul>
<p>snmp_esx3_server_mem</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Graphs all performance parameters returned by the service check. By default these are sys_mem_free_mb, sys_ballon_mem_mb, and sys_console_mem_pc.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">The Nagios service description must match the string "snmp_esx3_server_mem".</p>
</li>
</ul>
<p>snmp_esx3_server_net</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Graphs all performance parameters returned by the service check. By default these are sys_net_mbps, sys_net_mbps_in and sys_net_mbps_out.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">The Nagios service description must match the string "snmp_esx3_server_net".</p>
</li>
</ul>
<p>snmp_esx3_vm_cpu</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Graphs all performance parameters returned by the service check. By default these are vhost_cpu_used_pc and vhost_cpu_ready_pc.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">The Nagios service description must contain the string "snmp_esx3_vm_cpu".</p>
</li>
</ul>
<p>snmp_esx3_vm_mem</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Graphs all performance parameters returned by the service check. By default these are vhost_mem_active_pc and vhost_mem_ave_pc.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">The Nagios service description must contain the string "snmp_esx3_vm_mem".</p>
</li>
</ul>
<p>snmp_esx3_vm_net</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">Graphs all performance parameters returned by the service check. By default these are vhost_net_mbps, vhost_net_mbps_in and vhost_net_mbps_out.</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">The Nagios service description must contain the string "snmp_esx3_vm_net".</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">The performance graphing of the tcp_ssh and icmp_ping_alive service checks are provided by performance configuration definitions contained within base product.</p>
</li>
</ul>
<h4><a name="MiniTOCBookMark9" id="MiniTOCBookMark9"></a>Implementation Notes</h4>
<p>The following setup instructions need to be followed on the VMWare ESX 3 target server(s). <span style="color: #ff0000; font-weight: bold;"><font color="red"><b>Note:</b></font></span> You will need to access <a href="http://www.groundworkconnect.com" target="_blank">GroundWork Connect</a> for the snmp-vmware-esx3.zip file. Search for <span style="font-style: italic; font-weight: bold;"><i><b>ESX3 Profile</b></i></span> in GroundWork Connect and select the ESX3 Profile folder result.</p>
<ol>
<li class="p-Numbering">
<p class="Numbering">Copy the following files to the /etc/snmp directory on the ESX server to be monitored:</p>
</li>
</ol>
<p style="margin-left: 40px;">a. vmware-statgen-gw</p>
<p style="margin-left: 40px;">b. vmware_statsgen.conf</p>
<p style="margin-left: 40px;">c. vmware-stats-gw</p>
<p style="margin-left: 40px;">d. defesxtop.cfg</p>
<p style="margin-left: 40px;">(Note: &#160;If you are using ESX 3.0.0 copy the file .esxtop3rc to the /root directory)</p>
<ol start="2" type="1">
<li class="p-Numbering">
<p class="Numbering">Make sure the vmware-statgen-gw and vmware-stats-gw are executable by root:</p>
</li>
</ol>
<p style="margin-left: 40px;">a. # chmod +x vmware-statgen-gw</p>
<p style="margin-left: 40px;">b. # chmod +x vmware-stats-gw</p>
<ol start="3" type="1">
<li class="p-Numbering">
<p class="Numbering">Add the following lines to snmpd.conf:</p>
</li>
</ol>
<p style="margin-left: 40px;">a. # For Nagios/MRTG monitoring agent</p>
<p style="margin-left: 40px;">b. exec 1.3.6.1.4.1.2021.1000.10 vmware /etc/snmp/vmware-stats-gw</p>
<p style="margin-left: 40px;">c. # VMWare MIB modules. &#160;To enable/disable VMWare MIB items</p>
<p style="margin-left: 40px;">d. # add/remove the following entries</p>
<p style="margin-left: 40px;">e. dlmod SNMPESX &#160;&#160;&#160;&#160;/usr/lib/vmware/snmp/libSNMPESX.so</p>
<ol start="4" type="1">
<li class="p-Numbering">
<p class="Numbering">Set up SNMP to run automatically (if it is not already):</p>
</li>
</ol>
<p style="margin-left: 40px;">a. # chkconfig snmpd on</p>
<p style="margin-left: 40px;">b. # service snmpd start</p>
<ol start="5" type="1">
<li class="p-Numbering">
<p class="Numbering">Enable SNMP through the firewall:</p>
</li>
</ol>
<p style="margin-left: 40px;">a. # esxcfg-firewall –e snmpd</p>
<ol start="6" type="1">
<li class="p-Numbering">
<p class="Numbering">Add the following lines to /etc/crontab:</p>
</li>
</ol>
<p style="margin-left: 40px;">a. # generate performance stats every 5 minutes</p>
<p style="margin-left: 40px;">b. */5 * * * * root /etc/snmp/vmware-statgen-gw</p>
<div style="width: 100%; position: relative;" id="footer">
<p class="Footer" style="font-size: 7pt; line-height: Normal; margin-top: 6pt; margin-bottom: 4pt;">GroundWork, Inc. ©2011</p>
</div>
<script type="text/javascript" language="javascript1.2">
//<![CDATA[
<!--
if (window.writeIntopicBar)
        writeIntopicBar(0);


highlightSearch();
//-->
//]]>
</script>
</body>
</html>
