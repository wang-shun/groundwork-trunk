<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0014)about:internet -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Adobe RoboHelp 8" />
<title>VMware ESX vSphere</title>
<link rel="StyleSheet" href="../../Bookshelf.css" type="text/css" />
<script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
        origWidth = innerWidth;
        origHeight = innerHeight;
        onresize = reDo;
}
onerror = null; 
//]]>
</script>
<style type="text/css">
/*<![CDATA[*/
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
-->
/*]]>*/
</style>

<script type="text/javascript" language="javascript1.2" src="../../whmsg.js">
</script>
<script type="text/javascript" language="javascript" src="../../whver.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../../whproxy.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../../whutils.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../../whlang.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../../whtopic.js">
</script>
</head>
<body>
<script type="text/javascript" language="javascript1.2">
//<![CDATA[
<!--
if (window.gbWhTopic)
{
        var strUrl = document.location.href;
        var bc = 0;
        var n = strUrl.toLowerCase().indexOf("bc-");
        if(n != -1)
        {
                document.location.href = strUrl.substring(0, n);
                bc = strUrl.substring(n+3);
        }

        if (window.addTocInfo)
        {
        addTocInfo("GROUNDWORK PROFILES\nSNMP Profiles\nVMware ESX vSphere");

        }
        if (window.writeBtnStyle)
                writeBtnStyle();

        if (window.writeIntopicBar)
                writeIntopicBar(0);

        
        

        if (window.setRelStartPage)
        {
        setRelStartPage("../../Bookshelf.htm");

                autoSync(0);
                sendSyncInfo();
                sendAveInfoOut();
        }
}
else
        if (window.gbIE4)
                document.location.reload();

//-->
//]]>
</script><script type="text/javascript" language="JavaScript1.2" src="../../ehlpdhtm.js">
</script><script type="text/javascript" language="javascript">
//<![CDATA[
document.write("<p  style=\"text-align:right;color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;\">");
AddMasterBreadcrumbs("../../Bookshelf.htm", "color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;", "&gt;", "Home", "../../Welcome_to_GroundWork_Monitor/index.htm");
document.write("<a style=\"color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;\" href=\"../profiles_aboutprofiles.htm\">GROUNDWORK PROFILES<\/a> &gt; <a style=\"color:#0000ff;font-family:Arial;font-size:7pt;font-weight: normal;font-style: normal;text-decoration: none;\" href=\"profiles_snmpaix.htm\">SNMP Profiles<\/a> &gt; VMware ESX vSphere<\/p>");
//]]>
</script>
<p>&#160;</p>
<h1><a name="MiniTOCBookMark1" id="MiniTOCBookMark1"></a><img src="../../Shared_Images/square.gif" alt="square.gif" style="border: none;" width="15" height="15" border="0" /> GroundWork Profiles</h1>
<h3 align="right"><a href="../profiles_aboutprofiles.htm"><img src="../../Shared_Images/homeicon.gif" alt="homeicon.gif" style="border: none;" width="33" height="27" border="0" /></a> <img src="../../Shared_Images/printicon.gif" onclick="window.print()" alt="Print Page" title="Print Page" style="border: none;" width="31" height="27" border="0" /> <a href="mailto:support@groundworkopensource.com?subject=VMware ESX Server Profile (API)" title="Send Comments"><img src="../../Shared_Images/commentsicon.gif" alt="commentsicon.gif" style="border: none;" width="33" height="27" border="0" /></a></h3>
<h2><a name="MiniTOCBookMark2" id="MiniTOCBookMark2"></a>VMware ESX Server Profile (API)</h2>
<p style="font-size: 8pt;">[Enterprise only]</p>
<p align="left">Table&#160;of&#160;Contents:&#160;<a class="dropspot" href="javascript:TextPopup(this)" id="MTHotSpot40279" name="MTHotSpot40279"><span class="MTText">Show</span><span class="MTText" style="display: none;">Hide</span></a></p>
<script type="text/javascript" language="JavaScript1.2">
//<![CDATA[
TextPopupInit('MTHotSpot40279', 'MTPOPUP40279');
//]]>
</script>
<div align="left" class="droptext" id="MTPOPUP40279" style="display: none;">
<ul style="text-align:left; list-style-type: circle;">
<li><a href="#MiniTOCBookMark3">Services Configuration</a></li>
<li><a href="#MiniTOCBookMark4">Profile Package</a></li>
<li><a href="#MiniTOCBookMark5">Installation</a></li>
<li><a href="#MiniTOCBookMark6">Implementation</a></li>
</ul>
</div>
<p>This profile monitors an instance of the <span style="font-style: italic;"><i>VMware ESX</i></span> 3 or 4 virtualization software using the <span style="font-style: italic;"><i>VMware vSphere API</i></span>. The profile has been tested with version 4.0 of the API and ESX 3.5 and 4.0 hosts, and <span style="font-style: italic;"><i>vCenter</i></span> 4.0. The profile requires download and installation of the <span style="font-style: italic;"><i>VMware SDK</i></span> for <span style="font-style: italic;"><i>Perl</i></span> from <span style="font-style: italic;"><i>VMware</i></span> directly and then configuration of one or more users with at least read-level access to the metrics being polled. The <span style="font-weight: bold;"><b>Installation and Implementation Notes</b></span> sections of this document describe these steps in more detail.</p>
<h3><a name="MiniTOCBookMark3" id="MiniTOCBookMark3"></a>Services Configuration</h3>
<ul style="list-style: url('../../Shared_Images/bullet01.gif');">
<li class="p-Bullet1">
<p class="Bullet1"><span style="font-weight: bold;"><b>SERVICE</b></span> - Definitions in Monarch are stored under this name.</p>
</li>
<li class="p-Bullet1">
<p class="Bullet1"><span style="font-weight: bold;"><b>COMMAND LINE</b></span> - Service command name with arguments to be passed to the plugin.</p>
</li>
<li class="p-Bullet1">
<p class="Bullet1"><span style="font-weight: bold;"><b>PLUGIN COMMAND LINE</b></span> - Plugin script called by Nagios for this Service.</p>
</li>
<li class="p-Bullet1">
<p class="Bullet1"><span style="font-weight: bold;"><b>EXTENDED INFO</b></span> - The Extended Service Info definition, typically used for generating graphs.</p>
</li>
</ul>
<p><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>Note:</b></font></span> Command lines displayed below are intended to be single line commands.</p>
<table cellspacing="0" width="700">
<col style="width: 23.256%;" />
<col style="width: 41.86%;" />
<col style="width: 34.884%;" />
<tr style="vertical-align: top;">
<td style="border: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#1B3A83">
<p class="NormalTableBoldCenter">Service</p>
</td>
<td style="border-top: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#1B3A83">
<p class="NormalTableBoldCenter">Command Line</p>
</td>
<td style="border-top: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#1B3A83">
<p class="NormalTableBoldCenter">Plugin Command Line</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">api_vsphere_cpu</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">check_vsphere_cpu!50!80</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">/usr/local/groundwork/users/nagios/vmware-vsphere-cli-distrib/apps/groundwork/check_vsphere_cpu.pl --credstore ~nagios/.vmware/credstore/vicredentials.xml --server $HOSTNAME$ --warning $ARG1$ --critical $ARG2$</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">api_vsphere_datastore</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">check_vsphere_datastore!10:99!5:100</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">/usr/local/groundwork/users/nagios/vmware-vsphere-cli-distrib/apps/groundwork/check_vsphere_datastore.pl --credstore ~nagios/.vmware/credstore/vicredentials.xml --server $HOSTNAME$ --warning $ARG1$ --critical $ARG2$</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">api_vsphere_memory</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">check_vsphere_memory!75!90</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">/usr/local/groundwork/users/nagios/vmware-vsphere-cli-distrib/apps/groundwork/check_vsphere_memory.pl --server $HOSTNAME$ --credstore ~nagios/.vmware/credstore/vicredentials.xml --warning $ARG1$ --critical $ARG2$</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">api_vsphere_net</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">check_vsphere_net!400000!600000</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">/usr/local/groundwork/users/nagios/vmware-vsphere-cli-distrib/apps/groundwork/check_vsphere_net.pl --server $HOSTNAME$ --credstore ~nagios/.vmware/credstore/vicredentials.xml --warning $ARG1$ --critical $ARG2$</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="border-left: Solid 2px #ffffff; border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">api_vsphere_vms</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">check_vsphere_vms!50!80</p>
</td>
<td style="border-right: Solid 2px #ffffff; border-bottom: Solid 2px #ffffff; padding-right: 10px; padding-left: 10px;" bgcolor="#C0C0C0">
<p class="CourierTable">/usr/local/groundwork/users/nagios/vmware-vsphere-cli-distrib/apps/groundwork/check_vsphere_vms.pl --server $HOSTNAME$ --credstore ~nagios/.vmware/credstore/vicredentials.xml --warning $ARG1$ --critical $ARG2$</p>
</td>
</tr>
</table>
<h3><a name="MiniTOCBookMark4" id="MiniTOCBookMark4"></a>Profile Package</h3>
<p>This package includes the following files:</p>
<p>Profile Definitions</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">service-profile-api-vsphere-esx.xml</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">perfconfig-api-vsphere-esx.xml</p>
</li>
</ul>
<p>Plugins Scripts (installed with the GroundWork Monitor product)</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">check_vsphere_cpu.pl</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">check_vsphere_datastore.pl</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">check_vsphere_memory.pl</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">check_vsphere_net.pl</p>
</li>
<li class="P-Bullet1">
<p class="Bullet1">check_vsphere_vms.pl</p>
</li>
</ul>
<h3><a name="MiniTOCBookMark5" id="MiniTOCBookMark5"></a>Installation</h3>
<p><span style="font-style: italic;"><i>GroundWork Monitor</i></span> includes many monitoring profiles for a variety of devices, systems and applications. Profiles already imported on a new <span style="font-style: italic;"><i>GroundWork</i></span> installation include Service Ping, SNMP Network, and SSH UNIX. The <span style="font-style: italic;"><i>GroundWork Monitor Configuration</i></span> tool is used to import updated profiles and profiles that require additional setup; the Profile XML file and its companion <span style="font-style: italic;"><i>Performance Configuration</i></span> definition file. Services can also be imported in addition to S<span style="font-style: italic;"><i>ervice Profiles</i></span> in the <span style="font-style: italic;"><i>Profile Importer</i></span>. The import process is documented under <span style="font-weight: bold;"><b>GROUNDWORK PROFILES &gt; <a href="../profiles_importingprofiles.htm" style="font-weight: bold;">Importing Profiles</a></b></span>.</p>
<p>However, if you separately received this document along with the <span style="font-style: italic;"><i>Profile Package</i></span> contents described above then please following the following steps before proceeding further:</p>
<ol>
<li>
<p class="Numbering">Download the VMware vSphere SDK for Perl 4.0 from <span style="font-style: italic;"><i>VMware</i></span>, and follow the install instructions for <span style="font-style: italic;"><i>Linux</i></span> such that you unpack the SDK into <span class="CodeInline">/usr/local/groundwork/users/nagios</span> on the <span style="font-style: italic;"><i>GroundWork Monitor</i></span> server. This will result in a directory called <span class="CodeInline">vmware-vsphere-cli-distrib</span> under that <span style="font-style: italic;"><i>Nagios</i></span> directory.</p>
</li>
<li>
<p class="Numbering">When you have completed the installation, recursively change the ownership of the <span class="CodeInline">vmware-vsphere-cli-distrib</span> directory with a <span class="CodeInline">‘chown –R nagios:nagios /usr/local/groundwork/users/nagios/vmware-vsphere-cli-distrib’</span> command.</p>
</li>
<li>
<p class="Numbering">Change to user <span class="CodeInline">nagios</span> and enter the directory <span class="CodeInline">/usr/local/groundwork/users/nagios/vmware-vsphere-cli-distrib/apps</span>. Make a directory called <span class="CodeInline">groundwork</span> and transfer the five <span style="font-style: italic;"><i>Plugin Scripts</i></span> from the <span style="font-style: italic;"><i>Profile Package</i></span> inside that directory. These scripts are included with <span style="font-style: italic;"><i>GroundWork Monitor</i></span> 6.2 in a tar archive at <span class="CodeInline">/usr/local/groundwork/core/profiles/vmware_esx4_plugins.tar</span>. Make sure those scripts are executable by user <span class="CodeInline">nagios</span> and have not been edited on a <span style="font-style: italic;"><i>Microsoft Windows</i></span> server. If the latter is true, after placing the scripts in the <span class="CodeInline">groundwork</span> directory please run a <span class="CodeInline">dos2unix *.pl</span> command from that <span class="CodeInline">groundwork</span> directory.</p>
</li>
</ol>
<p>There is an additional step of setting up credentials for using the plugins and the instructions for doing this are referenced in the Implementation <span style="font-weight: bold;"><b>Notes</b></span> section.</p>
<p>The <span style="font-style: italic;"><i>GroundWork Monitor Configuration</i></span> tool is used to import profile definitions, even those that come with the product. You must import the profile supplied with this package, called <span class="CodeInline">service-profile-api-vsphere-host.xml</span>.</p>
<p>If you received the plugin package from support, you must copy this file and the <span class="CodeInline">perfconfig-api-vsphere-host.xml</span> file into the profiles directory and change their ownership to the <span class="CodeInline">nagios</span> user, and then use the profile importer to import <span class="CodeInline">service-profile-api-vsphere-host.xml</span>.</p>
<h3><a name="MiniTOCBookMark6" id="MiniTOCBookMark6"></a><b style="font-weight: bold;">Implementation</b></h3>
<p>This section contains detail settings used by this profile. These parameters can be altered with the <span style="font-style: italic;"><i>Configuration</i></span> tool.</p>
<h4><a name="MiniTOCBookMark7" id="MiniTOCBookMark7"></a>Command Parameters</h4>
<p>Command parameters are in the Configuration Services section with the following names and default values. Any <span style="font-weight: bold; color: #ff0000;"><font color="red"><b>bolded</b></font></span> arguments MUST be set before this Service Profile will work properly.</p>
<ul>
<li class="P-Bullet1">api_vsphere_cpu</li>
<li style="list-style: none; display: inline">
<ul>
<li class="P-Bullet2">
<p class="Bullet2">Returns the CPU usage as a percentage of the total of all CPU cores available on the ESX server.</p>
</li>
</ul>
<ul>
<li class="P-Bullet2">
<p class="Bullet2"><span style="font-weight: bold; color: #ff0000;"><font color="red"><b>$ARG1$</b></font></span> - Default is 50. &#160;This is the warning threshold for the percentage of CPU core cycles used of the total available.</p>
</li>
</ul>
<ul>
<li class="P-Bullet2">
<p class="Bullet2"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$ARG2$</b></font></span> - Default is 80. &#160;This is the critical threshold for the percentage of CPU core cycles used of the total available.</p>
</li>
</ul>
</li>
<li class="P-Bullet1">
<p class="Bullet1">api_vsphere_datastore</p>
</li>
</ul>
<p class="Bullet1">&#160;Returns a list of VMware datastore extents on the VMware ESX server and checks the amount of free space against the total amount available.</p>
<p class="Bullet1">&#160;$ARG1$ - Default is 10:99. &#160;This is the warning threshold for the storage FREE across all attached data extents as a percentage of the total available. If the space used is between 10 and 99 percent no warning; if below 10% or above 99% then a warning alert.</p>
<p class="Bullet1">&#160;$ARG2$ - Default is 5:100. &#160;This is the critical threshold for the storage FREE across all attached data extents as a percentage of the total available. If the space used is between 5 and 100 percent no alert; if below 5% or above 100% then a critical alert.</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">api_vsphere_memory</p>
</li>
</ul>
<div style="margin-left: 2em">
<ul>
<li class="P-Bullet2">
<p class="Bullet2">Returns the memory usage as a percentage of the total available on the ESX server.</p>
</li>
<li class="P-Bullet2">
<p class="Bullet2"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$ARG1$</b></font></span> - Default is 75. &#160;This is the warning threshold for the amount of memory in use as a percentage of the maximum available.</p>
</li>
<li class="P-Bullet2">
<p class="Bullet2"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$ARG2$</b></font></span> - Default is 90. &#160;This is the critical threshold for the amount of memory in use as a percentage of the maximum available.</p>
</li>
</ul>
</div>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">api_vsphere_net</p>
</li>
</ul>
<div style="margin-left: 2em">
<ul>
<li class="P-Bullet2">
<p class="Bullet2">Returns the absolute kilobytes per second average network use across all network interfaces on the ESX server. Defaults are appropriate for &#160;Gigabit connection.</p>
</li>
<li class="P-Bullet2">
<p class="Bullet2"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$ARG1$</b></font></span> - Default is 400000. &#160;This is the warning threshold for the traffic in Kilobits per second.</p>
</li>
<li class="P-Bullet2">
<p class="Bullet2"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$ARG2$</b></font></span> - Default is 600000. &#160;This is the critical threshold for the traffic in Kilobits per second</p>
</li>
</ul>
</div>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">api_vsphere_vms</p>
</li>
</ul>
<div style="margin-left: 2em">
<ul>
<li class="P-Bullet2">
<p class="Bullet2">Returns a list of VMware guest instances installed on the VMware ESX server and checks the number running against the total number.</p>
</li>
<li class="P-Bullet2">
<p class="Bullet2"><span style="color: #ff0000; font-weight: bold;"><font color="red"><b>$ARG1$</b></font></span> - Default is 50. &#160;This is the warning threshold for the number of guests that need to be up as a percentage of the total number.</p>
</li>
<li class="P-Bullet2">
<p class="Bullet2"><span style="font-weight: bold; color: #ff0000;"><font color="red"><b>$ARG2$</b></font></span> - Default is 80. &#160;This is the critical threshold for the number of guests that need to be up as a percentage of the total number.</p>
</li>
</ul>
</div>
<h4><a name="MiniTOCBookMark8" id="MiniTOCBookMark8"></a>Performance Graphing Parameters</h4>
<p>The following parameters are used to generate performance charts. These parameters are set using the Configuration&gt;Performance tool in GroundWork Monitor.</p>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">api_vsphere_cpu</p>
</li>
</ul>
<div style="margin-left: 2em">
<ul>
<li class="P-Bullet2">
<p class="Bullet2">Graphs the CPU utilization of the ESX server as a percentage.</p>
</li>
<li class="P-Bullet2">
<p class="Bullet2">The <span style="font-style: italic;"><i>Nagios</i></span> service description must match the string "api_vsphere_cpu".</p>
</li>
</ul>
</div>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">api_vsphere_datastore</p>
</li>
</ul>
<div style="margin-left: 2em">
<ul>
<li class="P-Bullet2">
<p class="Bullet2">Graphs percentage free datastore space attached to the ESX server.</p>
</li>
<li class="P-Bullet2">
<p class="Bullet2">The <span style="font-style: italic;"><i>Nagios</i></span> service description must contain the string "api_vsphere_datastore".</p>
</li>
</ul>
</div>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">api_vsphere_memory</p>
</li>
</ul>
<div style="margin-left: 2em">
<ul>
<li class="P-Bullet2">
<p class="Bullet2">Graphs memory used percentage on the ESX server.</p>
</li>
<li class="P-Bullet2">
<p class="Bullet2">The <span style="font-style: italic;"><i>Nagios</i></span> service description must match the string "api_vsphere_memory".</p>
</li>
</ul>
</div>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">api_vsphere_net</p>
</li>
</ul>
<div style="margin-left: 2em">
<ul>
<li class="P-Bullet2">
<p class="Bullet2">Graphs all absolute KBps network usage average for all NICs on the server.</p>
</li>
<li class="P-Bullet2">
<p class="Bullet2">The <span style="font-style: italic;"><i>Nagios</i></span> service description must match the string "api_vsphere_net".</p>
</li>
</ul>
</div>
<ul>
<li class="P-Bullet1">
<p class="Bullet1">api_vsphere_vms</p>
</li>
</ul>
<div style="margin-left: 2em">
<ul>
<li class="P-Bullet2">
<p class="Bullet2">Graphs numbers of running, not running and total Guest VMs on the server</p>
</li>
<li class="P-Bullet2">
<p class="Bullet2">The <span style="font-style: italic;"><i>Nagios</i></span> service description must contain the string "api_vsphere_vms".</p>
</li>
</ul>
</div>
<h4><a name="MiniTOCBookMark9" id="MiniTOCBookMark9"></a>Implementation Notes</h4>
<p style="margin-left: 0px;">On the <span style="font-style: italic;"><i>GroundWork</i></span> server you must add credentials for the user that is authorized to access the ESX servers. User names and their passwords must be added to a credential store that the plugins have access to. The profile definitions are coded to locate this credential store in the standard location for a <span style="font-style: italic;"><i>UNIX</i></span> user on the <span style="font-style: italic;"><i>GroundWork</i></span> server (<span class="CodeInline">~/.vmware/credstore/vicredentials.xml</span>). You do not have to create this file. You manage it by running a credential administration tool that comes with the SDK.</p>
<p style="margin-left: 0px;">These are the commands you use:</p>
<p class="CodeGroup">~/vmware-vsphere-cli-distrib/apps/general/credstore_admin.pl add –server &lt;servername&gt; --username &lt;username&gt; --password &lt;password&gt;</p>
<p class="CodeGroup">&#160;</p>
<p class="CodeGroup">~/vmware-vsphere-cli-distrib/apps/general/credstore_admin.pl remove –server &lt;servername&gt; --username &lt;username&gt; --password &lt;password&gt;</p>
<p class="CodeGroup">&#160;</p>
<p class="CodeGroup">~/vmware-vsphere-cli-distrib/apps/general/credstore_admin.pl list</p>
<p style="margin-left: 0px;">One such entry must exist for each ESX server to be polled. The plugins will use the first username it finds for the specified ESX server.</p>
<p style="margin-left: 0px;">The provided plugins use the fully qualified domain name of the ESX server as supplied in the <span class="CodeInline">$HOSTADDRESS$</span> macro. &#160;This is successful across ESX and ESXi servers. Using the short name of the server may not retrieve all data points requested, in particular the Network data from ESX.</p>
<div style="width: 100%; position: relative;" id="footer">
<p class="Footer" style="font-size: 7pt; line-height: Normal; margin-top: 6pt; margin-bottom: 4pt;">GroundWork Open Source, Inc. ©2010</p>
</div>
<script type="text/javascript" language="javascript1.2">
//<![CDATA[
<!--
if (window.writeIntopicBar)
        writeIntopicBar(0);


highlightSearch();
//-->
//]]>
</script>
</body>
</html>
