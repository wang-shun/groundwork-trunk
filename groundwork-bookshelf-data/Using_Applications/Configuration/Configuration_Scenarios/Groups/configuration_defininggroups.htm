<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0014)about:internet -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Adobe RoboHelp 8" />
<title>Defining Groups</title>
<link rel="StyleSheet" href="../../../../Bookshelf.css" type="text/css" />
<script type="text/javascript" language="JavaScript">
//<![CDATA[
function ehlp_showtip(current,e,text)
{
  if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == 'Netscape'))
  {
    document.tooltip.document.write("<layer bgColor='yellow' style='border:1px solid black;font-size:12px;'>"+ text + "<\/layer>");
    document.tooltip.document.close();
    document.tooltip.left=e.pageX+5;
    document.tooltip.top=e.pageY+5;
    document.tooltip.visibility="show";
  }
}
function ehlp_hidetip()
{
  document.tooltip.visibility="hidden";
}
//]]>
</script>
<script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
        origWidth = innerWidth;
        origHeight = innerHeight;
        onresize = reDo;
}
onerror = null; 
//]]>
</script>
<style type="text/css">
/*<![CDATA[*/
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
-->
/*]]>*/
</style>

<script type="text/javascript" language="javascript1.2" src="../../../../whmsg.js">
</script>
<script type="text/javascript" language="javascript" src="../../../../whver.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../../../../whproxy.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../../../../whutils.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../../../../whlang.js">
</script>
<script type="text/javascript" language="javascript1.2" src="../../../../whtopic.js">
</script>
</head>
<body>
<script type="text/javascript" language="javascript1.2">
//<![CDATA[
<!--
if (window.gbWhTopic)
{
        var strUrl = document.location.href;
        var bc = 0;
        var n = strUrl.toLowerCase().indexOf("bc-");
        if(n != -1)
        {
                document.location.href = strUrl.substring(0, n);
                bc = strUrl.substring(n+3);
        }

        if (window.addTocInfo)
        {
        addButton("show",BTN_TEXT,"Show Table of Contents","","","","",0,0,"","","");

        }
        if (window.writeBtnStyle)
                writeBtnStyle();

        if (window.writeIntopicBar)
                writeIntopicBar(1);

        
        

        if (window.setRelStartPage)
        {
        setRelStartPage("../../../../Bookshelf.htm");

                autoSync(0);
                sendSyncInfo();
                sendAveInfoOut();
        }
}
else
        if (window.gbIE4)
                document.location.reload();

//-->
//]]>
</script>
<p style="margin-top: 0pt; color: #0000ff; font-size: 7pt;" align="right"><a href="../../../../Welcome_to_GroundWork_Monitor/index.htm" style="color: #0000ff; font-size: 7pt; text-decoration: none;">Home</a> &gt; <a href="../../../usingapplications_aboutusingapplications.htm" style="color: #0000ff; font-size: 7pt; text-decoration: none;">USING APPLICATIONS</a> &gt; <a href="../../configuration_aboutconfiguration.htm" style="color: #0000ff; font-size: 7pt; text-decoration: none;">Configuration</a> &gt; <a href="../configuration_configurationscenarios.htm" style="color: #0000ff; font-size: 7pt; text-decoration: none;">Configuration Scenarios</a>&#160;&gt;&#160;Defining Configuration Groups</p>
<p>&#160;</p>
<script src="../../../../ehlpdhtm.js" type="text/javascript" language="JavaScript1.2">
</script>
<h1><a name="MiniTOCBookMark1" id="MiniTOCBookMark1"></a><img src="../../../../Shared_Images/square.gif" alt="square.gif" style="border: none;" width="15" height="15" border="0" /> Configuration Scenarios</h1>
<h3 align="right"><a href="../configuration_configurationscenarios.htm" title="Topic Home" onmouseover="if ((parseInt(navigator.appVersion) == 4) &amp;&amp; (navigator.appName == 'Netscape')) ehlp_showtip(this,event,'Topic Home');" onmouseout="if ((parseInt(navigator.appVersion) == 4) &amp;&amp; (navigator.appName == 'Netscape')) ehlp_hidetip();"><img src="../../../../Shared_Images/homeicon.gif" alt="homeicon.gif" style="border: none;" width="33" height="27" border="0" /></a> <img src="../../../../Shared_Images/printicon.gif" onclick="window.print()" alt="Print Page" title="Print Page" style="border: none;" width="33" height="27" border="0" /> <a href="mailto:support@groundworkopensource.com?subject=Defining Groups" title="Send Comments"><img src="../../../../Shared_Images/commentsicon.gif" alt="Send Comments" title="Send Comments" style="border: none;" width="33" height="27" border="0" /></a></h3>
<h2><a name="MiniTOCBookMark2" id="MiniTOCBookMark2"></a>Defining Groups</h2>
<p align="left">Table&#160;of&#160;Contents:&#160;<a class="dropspot" href="javascript:TextPopup(this)" id="MTHotSpot41305" name="MTHotSpot41305"><span class="MTText">Show</span><span class="MTText" style="display: none;">Hide</span></a></p>
<script type="text/javascript" language="JavaScript1.2">
//<![CDATA[
TextPopupInit('MTHotSpot41305', 'MTPOPUP41305');
//]]>
</script>
<div align="left" class="droptext" id="MTPOPUP41305" style="display: none;">
<ul style="text-align:left; list-style-type: circle;">
<li><a href="#MiniTOCBookMark3">New Group</a></li>
<li><a href="#MiniTOCBookMark4">Manage Group - Detail</a></li>
<li><a href="#MiniTOCBookMark5">Manage Group - Host Assignment</a></li>
<li><a href="#MiniTOCBookMark6">Manage Groups - Sub Groups</a></li>
<li><a href="#MiniTOCBookMark7">Manage Groups - Macros</a></li>
</ul>
</div>
<p><span style="font-weight: bold;"><b>Groups</b></span> are very flexible and powerful. With great power comes great responsibility, so care should be considered in administering them. In the simplest form, groups can be used to split hosts into different <span style="font-style: italic;"><i>Nagios</i></span> configuration files, in their most complex implementation they extend the configuration to multiple instances of <span style="font-style: italic;"><i>Nagios</i></span>, and in between, groups can determine group macro values applied to service checks.</p>
<p>Apart from file management, and managing multiple instances of <span style="font-style: italic;"><i>Nagios</i></span>, the real advantage of groups to most users is to scale the number of services required to manage hosts. Properly implemented, group macros will help reduce the number of redundant services that were required in the past. As a novelty, you can use groups to run a pre-flight test against a host group or even a single host. Note that the <span style="font-style: italic;"><i>Test</i></span> will fail if its parents are not included in the group. Groups also provide an alternate way to assign contact groups to hosts and services.</p>
<h3><a name="MiniTOCBookMark3" id="MiniTOCBookMark3"></a>New Group</h3>
<p class="NormalIndent1" style="margin-left: 0px; font-size: 8pt;"><span><span><span style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a3" name="a3"><font size="1" style="font-size:8pt;"><img src="../../../../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" /><span style="font-size: 8pt;"><font size="1" style="font-size:8pt;">Show/Hide</font></span></font></a></span></span></span></p>
<div class="droptext" id="POPUP415541026" style="display: none;">
<p class="Caption">Figure: New Group</p>
<p class="Figure"><img src="Assets/configuration_newgroup.gif" alt="New Group" class="img_whs4" title="New Group" width="700" height="131" border="0" /></p>
<p class="Figure">&#160;</p>
</div>
<ol>
<li class="p-Numbering">
<p class="Numbering">Select <b>Groups</b> from the <span style="font-style: italic;"><i>Configuration</i></span> page.</p>
</li>
<li class="p-Numbering">
<p class="Numbering">Select <b>New</b>.</p>
</li>
<li class="p-Numbering">
<p class="Numbering">The <b>New Group</b> screen will be displayed.</p>
</li>
<li class="p-Numbering">
<p class="Numbering">Enter a group <b>Name</b>. As hosts are assigned to groups they will be found in files named <span class="Code">&lt;group_name&gt;_hosts.cfg</span> and their services will be found in <span class="Code">&lt;group_name&gt;_services.cfg</span>. Group names must therefore conform to file naming standards.</p>
</li>
<li class="p-Numbering">
<p class="Numbering">Select <b>Add</b> to go to the next screen, <b>Manage Group</b>.</p>
</li>
</ol>
<h3><a name="MiniTOCBookMark4" id="MiniTOCBookMark4"></a>Manage Group - Detail</h3>
<p class="NormalIndent1" style="margin-left: 0px; font-size: 8pt;"><span><span><span style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a1" name="a1"><font size="1" style="font-size:8pt;"><img src="../../../../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" /><span style="font-size: 8pt;"><font size="1" style="font-size:8pt;">Show/Hide</font></span></font></a></span></span></span></p>
<div class="droptext" id="POPUP412185035" style="display: none;">
<p class="Caption">Figure: Detail</p>
<p class="Figure"><img src="Assets/configuration_detailgroups.gif" alt="Detail" class="img_whs5" title="Detail" width="700" height="527" border="0" /></p>
</div>
<ol>
<li class="kadov-p">In the <b>Detail</b> tab, enter the properties, see the table below.</li>
<li class="kadov-p">Select <b>Save</b> to add the new Group. <b>Delete</b> will remove the Group. Select <b>Rename</b> to change the name of the current Group. The <b>Close</b> option exits the Manage Group screen without saving.</li>
</ol>
<p class="Caption" style="margin-left: 40px;">Table: Detail</p>
<table class="whs6" style="margin-left: 40px;" cellspacing="0" width="670">
<col class="whs7" />
<col class="whs8" />
<tr class="whs9" style="vertical-align: top;">
<td class="whs10" style="width: 30%;" bgcolor="#1B3A83">
<p class="NormalTableBold"><b style="font-weight: bold;">Monarch group name</b></p>
</td>
<td class="whs11" style="width: 70%;" bgcolor="#C0C0C0">
<p class="NormalTable">Group name (e.g. unix-gdma-2.3).</p>
</td>
</tr>
<tr class="whs9" style="vertical-align: top;">
<td class="whs12" style="width: 30%;" bgcolor="#1B3A83">
<p class="NormalTableBold"><b style="font-weight: bold;">Description</b></p>
</td>
<td class="whs13" style="width: 70%;" bgcolor="#C0C0C0">
<p class="NormalTable">[Optional] Store comments or instructions here.</p>
</td>
</tr>
<tr class="whs9" style="vertical-align: top;">
<td class="whs14" style="width: 30%;" bgcolor="#1B3A83">
<p class="NormalTableBold"><b style="font-weight: bold;">Contact groups</b></p>
</td>
<td class="whs15" style="width: 70%;" bgcolor="#C0C0C0">
<p class="NormalTable">Contact Groups assigned to Groups provide the default Contact Group for Hosts and Services where no Contact Group has been defined at the Host Group, Host, or Service levels. With Nagios, Contact Groups are assigned separately to Hosts and to Services or Host Groups. GroundWork still allows the Nagios 1.2 method of assigning Contact Groups to Host Groups. Even when they share the same Contact Group it still requires administration at two points. Setting the Contact Group on a Group eliminates this redundancy.</p>
<p class="NormalTable"><b style="font-weight: bold;">Note</b>: Contact Groups defined on a Group WILL OVERRIDE the Contact Groups defined on Host Templates and Service Templates. Also, Contact Groups assigned to Child Sub Groups will in turn override Contact Groups on a Parent Group.</p>
</td>
</tr>
<tr class="whs9" style="vertical-align: top;">
<td class="whs16" style="width: 30%;" bgcolor="#1B3A83">
<p class="NormalTableBold"><b style="font-weight: bold;">Group Status</b></p>
</td>
<td class="whs17" style="width: 70%;" bgcolor="#C0C0C0">
<p class="NormalTable">Setting the Group to inactive will remove the member Hosts and their Services from the Nagios GUI's and Status (GroundWork Monitor), while preserving their configurations. Hosts can be reinstated by simply removing them from the Group with the inactive setting, or removing the inactive setting for the Group. This capability can be useful for marking hosts whose configuration is to be established well before the hosts themselves are available in your infrastructure.</p>
</td>
</tr>
<tr class="whs9" style="vertical-align: top;">
<td class="whs14" style="width: 30%;" bgcolor="#1B3A83">
<p class="NormalTableBold"><b style="font-weight: bold;">Multiple Instances</b></p>
<p class="NormalTableBold"><b style="font-weight: bold;">Build Instance Properties:</b></p>
</td>
<td class="whs15" style="width: 70%;" bgcolor="#C0C0C0">
<p class="NormalTable">Multiple Instances - Groups provide the means to centrally administer Multiple instances of Nagios. Each instance is a Group and a Group can be a Parent to a Group of Child Sub Groups. Note that with each Group, the left tree navigation provides links to its own Nagios CGI configuration, its own main Nagios configuration and its own set of Nagios resource Macros. The Build Instance option will generate the appropriate set of files for the instance in the writable folder specified, and then call the deployment module MonarchDeploy.pm. There is also the option to simply export these files.</p>
<p class="NormalTable"><b style="font-weight: bold;">Tree Menu<span style="font-weight: normal;">:</span></b></p>
<p class="NormalTable"><b style="font-weight: bold;">Nagios cgi</b> - Use this option to configure this instance's Nagios CGI configuration.</p>
<p class="NormalTable"><b style="font-weight: bold;">Nagios cfg</b> - Use this option to configure this instance's main Nagios configuration.</p>
<p class="NormalTable"><b style="font-weight: bold;">Resource cfg</b> - Use this option to configure this instance's Nagios resource macros.</p>
<p class="NormalTable"><b style="font-weight: bold;">Pre flight test</b> - This option does a Nagios pre flight test (nagios -v) of the group or instance.</p>
<p class="NormalTable"><b style="font-weight: bold;">Build instance</b> - Use this option to generate the Nagios configuration files for this instance, and to call the Deployment module<span style="font-size: 8pt;"><font size="1" style="font-size:8pt;">. You will find the MonarchDeploy.pm module in the core/monarch/lib folder of your installation (Note: if you are using the stand alone version this is the installation path /lib). The module is called from the Build instance option under the group, and the GroundWork Enterprise version of this module will push the group configuration to a corresponding child server. This can be locally modified if need be, to implement alternate or specialized deployment actions.</font></span></p>
<p class="NormalTable"><b style="font-weight: bold;">Export</b> - This option generates a downloadable set of Nagios configuration files for the instance.</p>
<p class="NormalTable" style="font-weight: bold;">Build Instance Properties<span style="font-weight: normal;">:</span></p>
<p class="NormalTable">Outlined below, these properties are required only if you wish to use this group as part of a distributed Nagios environment. It is not necessary to set these values to perform a pre-flight check for this group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td style="width: 30%;" bgcolor="#1B3A83">
<p class="NormalTableBold">Build folder</p>
</td>
<td style="width: 70%;" bgcolor="#C0C0C0">
<p class="NormalTable">This build folder is usually /usr/local/groundwork/nagios/etc/{hostname} where you have replaced {hostname} with the actual standby or child server hostname used to name the group. In general, this may be any directory writeable by the 'nagios' user where you wish to store the configuration files. An incorrect entry or a directory with incorrect permissions will cause the build instance to fail.</p>
</td>
</tr>
<tr class="whs9" style="vertical-align: top;">
<td class="whs16" style="width: 30%;" bgcolor="#1B3A83">
<p class="NormalTableBold"><b style="font-weight: bold;">Nagios etc folder</b></p>
</td>
<td class="whs17" style="width: 70%;" bgcolor="#C0C0C0">
<p class="NormalTable">Enter the path of the Nagios configuration folder on the target host (usually /usr/local/groundwork/nagios/etc). The value will only be used to generate the nagios.cfg file, but it should reflect the actual location on the target host where the Nagios object configuration files will reside.</p>
</td>
</tr>
<tr class="whs9" style="vertical-align: top;">
<td class="whs14" style="width: 30%;" bgcolor="#1B3A83">
<p class="NormalTableBold"><b style="font-weight: bold;">Force hosts</b></p>
</td>
<td class="whs15" style="width: 70%;" bgcolor="#C0C0C0">
<p class="NormalTable">Select this option to dictate the list of Hosts to be included in this instance. This option will override the Sub Group Host lists while still applying the Macros from those Groups where common members reside.</p>
</td>
</tr>
<tr class="whs9" style="vertical-align: top;">
<td class="whs16" style="width: 30%;" bgcolor="#1B3A83">
<p class="NormalTableBold"><b style="font-weight: bold;">Host active checks enabled</b></p>
<p class="NormalTableBold"><b style="font-weight: bold;">Host passive checks enabled</b></p>
<p class="NormalTableBold"><b style="font-weight: bold;">Service active checks enabled</b></p>
<p class="NormalTableBold"><b style="font-weight: bold;">Service passive checks enabled</b></p>
</td>
<td class="whs17" style="width: 70%;" bgcolor="#C0C0C0">
<p class="NormalTable">Use these options to accept or modify the configuration of all host and service checks as established either in the Main configuration (for a top-level group) or in the parent group(s) (for a sub-group), for the hosts (and services on them) that are associated with this group. In general, settings in a sub-group will override any conflicting settings in a parent group. Typically, in a multi-instance Nagios implementation, the parent monitoring host runs with passive checks while the child monitoring hosts run with active checks.</p>
</td>
</tr>
</table>
<h3><a name="MiniTOCBookMark5" id="MiniTOCBookMark5"></a>Manage Group - Host Assignment</h3>
<p><span style="font-size: 8pt;"><font size="1" style="font-size:8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a2" style="font-size: 8pt;" name="a2"><img src="../../../../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" />Show/Hide</a></font></span> Hosts and services are written to <span style="font-style: italic;"><i>Nagios</i></span> configuration files based on group names. By default all hosts are written to <span class="Code">hosts.cfg</span> and all services are written to <span class="Code">services.cfg</span>. As previously mentioned, as hosts are assigned to groups they will be found in files named <span class="Code">&lt;group_name&gt;_hosts.cfg</span> and their services will be found in <span class="Code">&lt;group_name&gt;_services.cfg</span>. Group names must therefore conform to file naming standards.</p>
<div class="droptext" id="POPUP404938647" style="display: none;">
<p class="Caption">Figure: Host Assignment</p>
<p class="Figure"><img src="Assets/configuration_hostassignmentgroups.gif" alt="Host Assignment" class="img_whs18" title="Host Assignment" width="700" height="541" border="0" /></p>
</div>
<p>If you are using groups to distribute hosts and services into different <span style="font-style: italic;"><i>Nagios</i></span> configuration files, you will want to use host groups where host members don't overlap, or add hosts individually to each group. The drawback to the latter option is that with each new host you will need to assign it manually to a group, whereas host assignment with host groups is automatic (e.g. when the host is assigned to the host group). Where host membership overlaps one or many groups, the host is assigned to the file of the last group read. Groups are read in dictionary sorted order.</p>
<ol>
<li class="p-Numbering">
<p class="Numbering">In the <b>Hosts</b> tab, check a box for host assignment by <b>Hosts</b> individually or by <b>Host Group</b>. The preferred method is to assign host groups as new hosts will be included here when they are assigned to the host group.</p>
</li>
</ol>
<h3><a name="MiniTOCBookMark6" id="MiniTOCBookMark6"></a>Manage Groups - Sub Groups</h3>
<p class="NormalIndent1" style="margin-left: 0px; font-size: 8pt;"><span><span><span style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a4" name="a4"><font size="1" style="font-size:8pt;"><img src="../../../../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" /><span style="font-size: 8pt;"><font size="1" style="font-size:8pt;">Show/Hide</font></span></font></a></span></span></span></p>
<div class="droptext" id="POPUP415518669" style="display: none;">
<p class="Caption">Figure: Sub Groups</p>
<p class="Figure"><img src="Assets/configuration_subgroups.gif" alt="Sub Groups" class="img_whs19" title="Sub Groups" width="700" height="472" border="0" /></p>
</div>
<p><span style="font-weight: bold;"><b>Sub Groups</b></span> are useful only in special circumstances, in particular to build multiple instances of <span style="font-style: italic;"><i>Nagios</i></span>. Should one find the need for them bear in mind that hosts and services will be assigned to the file of last dictionary sorted child group in which they are found. Conversely, where macros overlap the value is taken from the first dictionary sorted parent group. In other words, once a match has been made and the macro replaced, it will no longer be recognized as a Macro when subsequent groups are processed.</p>
<ol>
<li class="p-Numbering">
<p class="Numbering">In the <b>Sub Groups</b> tab, select from the bottom list of existing groups and select <b>Add Group(s)</b> to assign groups. Select from the top list and select <b>Remove</b> to un-assign groups.</p>
</li>
</ol>
<h3><a name="MiniTOCBookMark7" id="MiniTOCBookMark7"></a>Manage Groups - Macros</h3>
<p>The following steps and figures will walk you through an example of a service check that is performed through multiple proxies (WMI proxies in our example).</p>
<h4><a name="MiniTOCBookMark8" id="MiniTOCBookMark8"></a>Step 1 - Commands</h4>
<p class="NormalIndent1" style="margin-left: 0px; font-size: 8pt;"><span><span><span style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a5" name="a5"><font size="1" style="font-size:8pt;"><img src="../../../../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" /><span style="font-size: 8pt;"><font size="1" style="font-size:8pt;">Show/Hide</font></span></font></a></span></span></span></p>
<div class="droptext" id="POPUP415354346" style="display: none;">
<p class="Caption">Figure: Command Properties</p>
<p class="Figure"><img src="Assets/configuration_step1commands.gif" alt="Step 1 Commands" class="img_whs18" title="Step 1 Commands" width="700" height="295" border="0" /></p>
</div>
<ol>
<li class="p-Numbering">
<p class="Numbering">Group macros extend the Nagios <span class="Code">$ARG#$</span> macros on service checks. The next two screens show how the macro <span class="Code">%PROXY%</span> extends the definitions from the command syntax through the service check.</p>
</li>
</ol>
<h4><a name="MiniTOCBookMark9" id="MiniTOCBookMark9"></a>Step 2 - Services</h4>
<p class="NormalIndent1" style="margin-left: 0px; font-size: 8pt;"><span><span><span style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a6" name="a6"><font size="1" style="font-size:8pt;"><img src="../../../../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" /><span style="font-size: 8pt;"><font size="1" style="font-size:8pt;">Show/Hide</font></span></font></a></span></span></span></p>
<div class="droptext" id="POPUP409502365" style="display: none;">
<p class="Caption">Figure: Service Check</p>
<p class="Figure"><img src="Assets/configuration_step2services.gif" alt="Step 2 Services" class="img_whs20" title="Step 2 Services" width="700" height="376" border="0" /></p>
</div>
<ol>
<li class="p-Numbering">
<p class="Numbering">By creating a service and using a macro in place of the proxy argument, you can apply the service to multiple hosts and each host will inherit the value from the group to which it is assigned. Normally you would assign real values to command arguments in service checks. Group macros allow you to set and manage these values at the group level.</p>
</li>
<li class="p-Numbering">
<p class="Numbering">Here we replace the previous command line with macros with the group macro <span class="Code"><b style="font-weight: normal;">%PROXY%</b></span>.</p>
</li>
<li class="p-Numbering">
<p class="Numbering">For our example, you will need to create host groups; <b>Windows HostGroup1</b> and <b>Windows HostGroup2</b> with Hosts <b>Windows1</b> and <b>Windows2</b> assigned, respectively.</p>
</li>
</ol>
<h4><a name="MiniTOCBookMark10" id="MiniTOCBookMark10"></a>Step 3 - Service to Host Assignment</h4>
<p style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a7" style="font-size: 8pt;" name="a7"><img src="../../../../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" />Show/Hide</a> <a class="dropspot" href="javascript:TextPopup(this)" id="a8" style="font-size: 8pt;" name="a8"><img src="../../../../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" />Show/Hide</a></p>
<div class="droptext" id="POPUP411874378" style="display: none;">
<p class="Caption">Figure: Service to Host Assignment</p>
<p class="Figure"><img src="Assets/configuration_step3servicetohost2.gif" alt="Step 3 Service to Host Assignment" class="img_whs22" title="Step 3 Service to Host Assignment" width="700" height="341" border="0" /></p>
</div>
<div class="droptext" id="POPUP419737307" style="display: none;">
<p class="Caption">Figure: Service to Host Assignment</p>
<p class="Figure"><img src="Assets/configuration_step3servicetohost1.gif" alt="Step 3 Service to Host Assignment" class="img_whs21" title="Step 3 Service to Host Assignment" width="700" height="353" border="0" /></p>
</div>
<ol>
<li class="p-Numbering">
<p class="Numbering">In the <span style="font-style: italic;"><i>Service</i></span> tab of <span style="font-style: italic;"><i>Manage Host</i></span> you can add, modify, and remove services for the current host. <b style="color: #ff0000;">Note</b>: Managing services from this page will in all likelihood put the host out of sync with its service profiles. After making changes, use caution when applying profiles to this host. Continuing with our proxy example we add the service <span class="Code"><b style="font-weight: normal;">wmi_exchange_mailbox_sendq</b></span> to the hosts <b>Windows1</b> and <b>Windows2</b>.</p>
</li>
</ol>
<h4><a name="MiniTOCBookMark11" id="MiniTOCBookMark11"></a>Step 4 - Add Macro</h4>
<p class="NormalIndent1" style="margin-left: 0px; font-size: 8pt;"><span><span><span style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a9" name="a9"><font size="1" style="font-size:8pt;"><img src="../../../../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" /><span style="font-size: 8pt;"><font size="1" style="font-size:8pt;">Show/Hide</font></span></font></a></span></span></span></p>
<div class="droptext" id="POPUP419764116" style="display: none;">
<p class="Caption">Figure: Add Macro</p>
<p class="Figure"><img src="Assets/configuration_step4addmacro.gif" alt="Add Macro" class="img_whs23" title="Add Macro" width="700" height="492" border="0" /></p>
</div>
<ol>
<li class="p-Numbering">
<p class="Numbering">Here we will create our group macro <b style="font-weight: normal;"><span class="Code">%PROXY%</span></b>. Enter a <b>Name</b>, <b>Description</b>, and <b>Value</b> for the macro, then select <b>Add New Macro</b>. <b><font color="#FF0000">Note</font></b>: Great care needs to be taken in macro names. Do not use any names from the list of <span style="font-style: italic;"><i>Nagios</i></span> macros for instance. Use names that are unique and not likely in the least to match some other part of the check command string. For example, a naming scheme that uses a special character such as % in the prefix and suffix of the name will likely maintain uniqueness, so a proxy macro might be named <span class="Code">%PROXY%</span>. It is not a good idea to use $ as that is the special character <span style="font-style: italic;"><i>Nagios</i></span> uses in macros.</p>
</li>
</ol>
<h4><a name="MiniTOCBookMark12" id="MiniTOCBookMark12"></a>Step 5 - New Group, Assign Host Group, Set Macros (Group 1: Windows_WMI_Proxy1)</h4>
<h5><a name="MiniTOCBookMark13" id="MiniTOCBookMark13"></a>New Group (Group 1: Windows_WMI_Proxy1)</h5>
<p class="NormalIndent1" style="margin-left: 0px; font-size: 8pt;"><span><span><span style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a10" name="a10"><font size="1" style="font-size:8pt;"><img src="../../../../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" /><span style="font-size: 8pt;"><font size="1" style="font-size:8pt;">Show/Hide</font></span></font></a></span></span></span></p>
<div class="droptext" id="POPUP418165326" style="display: none;">
<p class="Caption">Figure: New Group Windows_WMI_Proxy1</p>
<h4><img src="Assets/configuration_step5newgroup.gif" alt="New Group" class="img_whs24" title="New Group" width="700" height="130" border="0" /></h4>
</div>
<p>In the next set of steps we will create our new groups (<b>Windows_WMI_Proxy1</b> and <b>Windows_WMI_Proxy2</b>), assign a host group to our groups (<b>Windows1_HostGroup</b> and <b>Windows2_HostGroup</b>), and set the <b>%PROXY% Macro</b> to each group.</p>
<ol>
<li class="p-Numbering">
<p class="Numbering">Select <b>Groups</b> from the <span style="font-style: italic;"><i>Configuration</i></span> page.</p>
</li>
<li class="p-Numbering">
<p class="Numbering">Select <b>New</b>.</p>
</li>
<li class="p-Numbering">
<p class="Numbering">The <b>New Group</b> screen will be displayed.</p>
</li>
<li class="p-Numbering">
<p class="Numbering">Enter the group <b>Windows_WMI_Proxy1</b>.</p>
</li>
<li class="p-Numbering">
<p class="Numbering">Select <b>Add</b> to go to the next screen, <b>Manage Group</b>.</p>
</li>
</ol>
<h5><a name="MiniTOCBookMark14" id="MiniTOCBookMark14"></a>Assign Host Group (Host Group 1: Windows1_HostGroup)</h5>
<p class="NormalIndent1" style="margin-left: 0px; font-size: 8pt;"><span><span><span style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a11" name="a11"><font size="1" style="font-size:8pt;"><img src="../../../../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" /><span style="font-size: 8pt;"><font size="1" style="font-size:8pt;">Show/Hide</font></span></font></a></span></span></span></p>
<div class="droptext" id="POPUP419641224" style="display: none;">
<p class="Caption">Figure: Host Assignment</p>
<p class="Figure"><img src="Assets/configuration_step5newgroup2.gif" alt="Host Assignment" class="img_whs23" title="Host Assignment" width="700" height="557" border="0" /></p>
</div>
<ol>
<li class="p-Numbering">
<p class="Numbering">Select the <b>Hosts</b> tab.</p>
</li>
<li class="p-Numbering">
<p class="Numbering">Select <b>Windows1_HostGroup</b> from the list of host groups at the bottom of the screen.</p>
</li>
<li class="p-Numbering">
<p class="Numbering">Select <b>Add HostGroup(s)</b>, you will see the group now listed at the top of the screen.</p>
</li>
<li class="p-Numbering">
<p class="Numbering">Continue with <b>Set Macros</b> below.</p>
</li>
</ol>
<h5><a name="MiniTOCBookMark15" id="MiniTOCBookMark15"></a>Set Macros (Group 1: Windows_WMI_Proxy1)</h5>
<p class="NormalIndent1" style="margin-left: 0px; font-size: 8pt;"><span><span><span style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a12" name="a12"><font size="1" style="font-size:8pt;"><img src="../../../../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" /><span style="font-size: 8pt;"><font size="1" style="font-size:8pt;">Show/Hide</font></span></font></a></span></span></span></p>
<div class="droptext" id="POPUP410510532" style="display: none;">
<p class="Caption">Figure: Set Macro</p>
<p class="Figure"><img src="Assets/configuration_step5setmacros1.gif" alt="Step 5 Set Macros" class="img_whs25" title="Step 5 Set Macros" width="507" height="491" border="0" /></p>
</div>
<ol>
<li class="p-Numbering">
<p class="Numbering">Select the %PROXY% macro from the list at the bottom of the screen and click <b>Add Macro(s)</b> to assign it to the <span style="font-style: italic;"><i>Window_WMI_Proxy1</i></span> group.</p>
</li>
<li class="p-Numbering">
<p class="Numbering">Adjust the values as needed and select <b>Save</b> to apply it to the group. We'll keep the value <b style="font-weight: normal;"><span class="Code">172.28.113.201</span></b>.</p>
</li>
<li class="p-Numbering">
<p class="Numbering">To use the Label option you must select <b>Enable label</b> and enter a value, then click <b>Save</b> to apply it to the group. The value is appended to the service description on services where the macro is found, so we suggest using an underscore as the first character.</p>
</li>
</ol>
<p class="Numbering" style="margin-left: 40px;"><b style="font-weight: bold;"><span><font color="#FF0000">Note</font></span></b>: The <b>Enable Label</b> option can be useful where there is a need for redundant checks. To illustrate, using our proxy example, it may be beneficial to run the checks through a second proxy as a failover measure. Using this option eliminates the necessity of creating a second set of services. By assigning a host to two groups, each with the <span class="Code">%PROXY%</span> macro but assigned different values, enabling the label option and assigning a value will generate a second set of checks on services where the <span class="Code">%PROXY%</span> macro is found. The label is appended to the service description on the second set of checks, so we suggest using an underscore at the start of the label value.</p>
<ol start="4" type="1">
<li class="p-Numbering">
<p class="Numbering">Repeat the last three steps for the second group starting with <b>New Group (Group2: Windows_WMI_Proxy2)</b> below.</p>
</li>
</ol>
<h5><a name="MiniTOCBookMark16" id="MiniTOCBookMark16"></a>New Group (Group 2: Windows_WMI_Proxy2)</h5>
<p class="NormalIndent1" style="margin-left: 0px; font-size: 8pt;"><span><span><span style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a13" name="a13"><font size="1" style="font-size:8pt;"><img src="../../../../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" /><span style="font-size: 8pt;"><font size="1" style="font-size:8pt;">Show/Hide</font></span></font></a></span></span></span></p>
<div class="droptext" id="POPUP410722086" style="display: none;">
<p class="Caption">Figure: New Group Windows_WMI_Proxy2</p>
<p class="Figure"><img src="Assets/configuration_step5setmacros2.gif" alt="Step 5 Set Macros" class="img_whs24" title="Step 5 Set Macros" width="700" height="128" border="0" /></p>
</div>
<ol>
<li class="p-Numbering">
<p class="Numbering">Create the group <b>Windows_WMI_Proxy2</b>.</p>
</li>
</ol>
<h5><a name="MiniTOCBookMark17" id="MiniTOCBookMark17"></a>Assign Host Group (Host Group 2: Windows2_HostGroup)</h5>
<p class="NormalIndent1" style="margin-left: 0px; font-size: 8pt;"><span><span><span style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a14" name="a14"><font size="1" style="font-size:8pt;"><img src="../../../../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" /><span style="font-size: 8pt;"><font size="1" style="font-size:8pt;">Show/Hide</font></span></font></a></span></span></span></p>
<div class="droptext" id="POPUP413077322" style="display: none;">
<p class="Caption">Figure: Host Assignment</p>
<p class="Figure"><img src="Assets/configuration_step5hostassignment.gif" alt="Step 5 Host Assignment" class="img_whs26" title="Step 5 Host Assignment" width="507" height="475" border="0" /></p>
</div>
<ol>
<li class="p-Numbering">
<p class="Numbering">Assign the host group <b>Windows1_HostGroup</b> to the group <b>Windows_WMI_Proxy2</b>.</p>
</li>
</ol>
<h5><a name="MiniTOCBookMark18" id="MiniTOCBookMark18"></a>Set Macros (Group 2: Windows_WMI_Proxy2)</h5>
<p class="NormalIndent1" style="margin-left: 0px; font-size: 8pt;"><span><span><span style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a15" name="a15"><font size="1" style="font-size:8pt;"><img src="../../../../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" /><span style="font-size: 8pt;"><font size="1" style="font-size:8pt;">Show/Hide</font></span></font></a></span></span></span></p>
<div class="droptext" id="POPUP410938670" style="display: none;">
<p class="Caption">Figure: Set Macros</p>
<p class="Figure"><img src="Assets/configuration_step5setmacros3.gif" alt="Step 5 Set Macros" class="img_whs27" title="Step 5 Set Macros" width="505" height="490" border="0" /></p>
</div>
<ol>
<li class="p-Numbering">
<p class="Numbering">Assign the <b>%PROXY%</b> Macro to the <b>Window_WMI_Proxy2</b> Group.</p>
</li>
<li class="p-Numbering">
<p class="Numbering">Adjust the values as needed and select <b>Save</b> to apply it to the group. Well change the value to <b>172.28.113.202</b>.</p>
</li>
</ol>
<h4><a name="MiniTOCBookMark19" id="MiniTOCBookMark19"></a>Step 6 - Export</h4>
<h5><a name="MiniTOCBookMark20" id="MiniTOCBookMark20"></a>Tools Export (Group 1: Windows_WMI_Proxy1_services.cfg)</h5>
<p class="NormalIndent1" style="margin-left: 0px; font-size: 8pt;"><span><a class="dropspot" href="javascript:TextPopup(this)" id="a16" style="font-size: 8pt;" name="a16"><img src="../../../../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" />Show/Hide</a></span></p>
<div class="droptext" id="POPUP405365325" style="display: none;">
<p class="Caption">Figure: Windows_WMI_Proxy1_services.cfg</p>
<p class="Figure"><img src="Assets/configuration_step6export1.gif" class="img_whs28" alt="" width="700" height="182" border="0" /></p>
</div>
<p>Macro values are substituted during a <span style="font-style: italic;"><i>Pre flight test</i></span>, <span style="font-style: italic;"><i>Commit</i></span>, and <span style="font-style: italic;"><i>Export</i></span>; in each case, <span style="font-style: italic;"><i>Nagios</i></span> reads them from the files that have been generated. Group macros are virtually unlimited but unlike <span style="font-style: italic;"><i>Nagios</i></span> macros, they can only be used on service checks and not in command definitions.</p>
<h5><a name="MiniTOCBookMark21" id="MiniTOCBookMark21"></a>Tools Export (Group 2: Windows_WMI_Proxy2_services.cfg)</h5>
<p style="font-size: 8pt;"><a class="dropspot" href="javascript:TextPopup(this)" id="a17" name="a17"><span style="font-size: 8pt;"><font size="1" style="font-size:8pt;"><img src="../../../../Shared_Images/screenshoticon.gif" title="View Screenshot" alt="screenshoticon.gif" style="border: none;" width="29" height="27" border="0" />Show/Hide</font></span></a></p>
<div class="droptext" id="POPUP417805142" style="display: none;">
<p class="Caption">Figure: Windows_WMI_Proxy2_services.cfg</p>
<p class="Figure"><img src="Assets/configuration_step6export2.gif" alt="Step 6 Export" class="img_whs29" title="Step 6 Export" width="700" height="183" border="0" /></p>
</div>
<div style="width: 100%; position: relative;" id="footer">
<p class="Footer" style="font-size: 7pt; line-height: Normal; margin-top: 6pt; margin-bottom: 4pt;">GroundWork, Inc. ©2011</p>
</div>
<script type="text/javascript" language="JavaScript1.2">
//<![CDATA[
        if( typeof( TextPopupInit ) != 'function' ) TextPopupInit = new Function();
        TextPopupInit('a3','POPUP415541026');
        TextPopupInit('a1','POPUP412185035');
        TextPopupInit('a2','POPUP404938647');
        TextPopupInit('a4','POPUP415518669');
        TextPopupInit('a5','POPUP415354346');
        TextPopupInit('a6','POPUP409502365');
        TextPopupInit('a7','POPUP419737307');
        TextPopupInit('a8','POPUP411874378');
        TextPopupInit('a9','POPUP419764116');
        TextPopupInit('a10','POPUP418165326');
        TextPopupInit('a11','POPUP419641224');
        TextPopupInit('a12','POPUP410510532');
        TextPopupInit('a13','POPUP410722086');
        TextPopupInit('a14','POPUP413077322');
        TextPopupInit('a15','POPUP410938670');
        TextPopupInit('a16','POPUP405365325');
        TextPopupInit('a17','POPUP417805142');
//]]>
</script><script type="text/javascript" language="JavaScript">
//<![CDATA[
 if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == 'Netscape'))
  document.write("<div id='tooltip' class='WebHelpPopupMenu'><\/div>");
//]]>
</script><script type="text/javascript" language="javascript1.2">
//<![CDATA[
<!--
if (window.writeIntopicBar)
        writeIntopicBar(0);


highlightSearch();
//-->
//]]>
</script>
</body>
</html>
