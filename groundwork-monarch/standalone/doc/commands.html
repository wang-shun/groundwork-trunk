<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en">
  <head>
<title>Defining Commands</title>
<link rel="stylesheet" type="text/css" href="/monarch/groundwork.css"/>
  </head>
  <body>
<!-- Start Main table-->
<table class="main" border="0" cellpadding="1" cellspacing="0">
  <tbody>
  <tr>
    <td valign="top"><h1 class="chapter"><img src="/monarch/doc/images/square.gif" border="0" alt="--- GW IMAGE NOT DISPLAYED ---" /> Defining Commands</h1>
    <h4>Copyright 2006 GroundWork Open Source, Inc. ("GroundWork").<br />
    All rights reserved. Use is subject to GroundWork commercial license.</h4>
<!-- Start Main Contents -->
<table class="window" cellpadding="5" cellspacing="1" width="100%">
  <tbody>
  <tr class="windowHeader">
    <td class="windowHeader">Contents</td>
  </tr>
  <tr>
    <td class="bookshelf_textBg">
<!-- TOC -->
    <ul class="level01">
        <li><a href="#s5chapter9a">How Do I Define a New Command?</a></li>
    </ul>
    </td>
  </tr>
</tbody>
</table>
    </td>
  </tr>
  <tr>
    <td>
<!-- Start Section 1 -->
<table class="window" cellpadding="5" cellspacing="1" width="100%">
<tbody>
  <tr class="windowHeader">
    <td class="windowHeader"><a name="section1"></a>Defining Commands</td>
  </tr>
  <tr>
    <td class="bookshelf_textBg">
<!-- How Do I Define a New Command -->
    <a name="s5chapter9a"></a><h1 class="chapter"><img src="/monarch/doc/images/square.gif" border="0" alt="--- GW IMAGE NOT DISPLAYED ---" /> How Do I Define a New Command?</h1>
<hr />
    <h2 class="smMargin">Step 1 - Select Resource</h2>
    <ol>
      <li>Select <b>Commands</b> from the Configuration menu options.</li>
      <li>Select <b>New</b>.</li>
      <li>In the <b>Select Resource</b> screen, check the resource macro to configure.</li>
      <li>The screen will change and the selected macro's options will appear at the top of the screen.</li>
      <li>Select a <b>Plugin</b> to associate with the resource macro from the drop-down list.</li>
      <li>At this point, the resource macro may be edited and comments added.</li>
      <li>Select <b>Next</b> to continue.
    <h4>Figure 5.9.1a. Select Resource</h4>
    <img src="/monarch/doc/images/OSPadm_s5chapter9_1a.gif" border="0" alt="--- GW IMAGE NOT DISPLAYED ---" />
      <h4>Table 5.9.1a. Select Resource</h4>
<table class="window" cellpadding="5" cellspacing="1" width="698">
<tbody>
  <tr>
    <td valign="top" width="30%" class="row1"><b>Select Resource</b></td>
    <td>This is used to specify an optional resource file that can contain $USERn$ macro definitions. $USERn$ macros are useful for storing usernames, passwords, and items commonly used in command definitions (like directory paths). User macros can be defined in one or more resource files. Nagios&#174; supports up to thirty-two user macros ($USER1$ through $USER32$).</td>
  </tr>
  <tr>
    <td valign="top" class="row1"><b>Plugin</b></td>
    <td>Selected plugin which will check local or remote resources or Services of some type. This is incorporated into the command line.</td>
  </tr>
  <tr>
    <td valign="top" width="30%" class="row1"><b>Comment</b></td>
    <td>Optional comment area for this macro.</td>
  </tr>
</tbody>
</table>
     </li>
    </ol>
    <h2 class="smMargin">Step 2 - New Command</h2>
    <ol>
      <li>In the <b>Command Wizard</b> screen, enter the properties (see <b>Table 5.9.1b.</b> below).</li>
      <li>Select <b>Add</b> to add the new Command. <b>Cancel</b> will exit the Command Wizard without saving.</li>
      <li>You will be prompted that the command has been saved. Select <b>Continue</b>.
    <h4>Figure 5.9.1b. New Command</h4>
    <img src="/monarch/doc/images/OSPadm_s5chapter9_1b.gif" border="0" alt="--- GW IMAGE NOT DISPLAYED ---" />
      <h4>Table 5.9.1b. New Command</h4>
<table class="window" cellpadding="5" cellspacing="1" width="698">
<tbody>
  <tr>
    <td valign="top" width="30%" class="row1"><b>Name</b></td>
    <td>Command name.</td>
  </tr>
  <tr>
    <td valign="top" class="row1"><b>Type</b></td>
    <td>Specify command type: <b>Check</b> = Service/Host Check Commands, Handlers; <b>Notify</b> = Notification Commands; <b>Other</b> = other commands (i.e. Performance Data Collectors).</td>
  </tr>
  <tr>
    <td valign="top" class="row1"><b>Command Line</b></td>
    <td>This directive is used to define what is actually executed by Nagios&#174; when the command is used for Service or Host checks, Notifications, or event handlers. An editable field, before the command line is executed, all valid macros are replaced with their respective values. See the documentation on macros for determining when you can use different macros. Note that the command line is not surrounded in quotes. Also, if you want to pass a dollar sign ($) on the command line, you have to escape it with another dollar sign.</td>
  </tr>
  <tr>
    <td valign="top" width="30%" class="row1"><b>Usage</b></td>
    <td>This shows how the command is defined on the Service.</td>
  </tr>
  <tr>
    <td valign="top" class="row1"><b>Test</b></td>
    <td>Enter a Host and arguments for the command line. When you click the "Test" button this parses through the command definition, performs the macro substitutions, inserts the hostname from the host box, puts the resulting command into a shell command line and executes, returning the results of the execution in the box to the right.</td>
  </tr>
</tbody>
</table> 
      </li>
    </ol>
    </td>
  </tr>
</tbody>
</table>
    </td>
  </tr>
<!-- End -->
</tbody>
</table>
  </body>
</html>