<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en">
  <head>
<title>Configuring Escalations</title>
<link rel="stylesheet" type="text/css" href="/monarch/groundwork.css"/>
  </head>
  <body>
<!-- Start Main table-->
<table class="main" border="0" cellpadding="1" cellspacing="0">
  <tbody>
  <tr>
    <td valign="top"><h1 class="chapter"><img src="/monarch/doc/images/square.gif" border="0" alt="--- GW IMAGE NOT DISPLAYED ---" /> Configuring Escalations</h1>
    <h4>Copyright 2006 GroundWork Open Source, Inc. ("GroundWork").<br />
    All rights reserved. Use is subject to GroundWork commercial license.</h4>
<!-- Start Main Contents -->
<table class="window" cellpadding="5" cellspacing="1" width="100%">
  <tbody>
  <tr class="windowHeader">
    <td class="windowHeader">Contents</td>
  </tr>
  <tr>
    <td class="bookshelf_textBg">
<!-- TOC -->
    <ul class="level01">
        <li><a href="#s5chapter8a">How Do I Configure a Host or Service Escalation?</a></li>
        <li><a href="#s5chapter8c">How Do I Define a Host or Service Escalation Tree?</a></li>
    </ul>
    </td>
  </tr>
</tbody>
</table>
    </td>
  </tr>
  <tr>
    <td>
<!-- Start Section 1 -->
<table class="window" cellpadding="5" cellspacing="1" width="100%">
<tbody>
  <tr class="windowHeader">
    <td class="windowHeader"><a name="section1"></a>Configuring Escalations</td>
  </tr>
  <tr>
    <td class="bookshelf_textBg">
<!-- How do I define a new Host or Service Escalation -->
    <a name="s5chapter8a"></a><h1 class="chapter"><img src="/monarch/doc/images/square.gif" border="0" alt="--- GW IMAGE NOT DISPLAYED ---" /> How Do I Configure a Host or Service Escalation?</h1>
<hr />
    <h2 class="smMargin">Step 1 - Configuring a Host or Service Escalation</h2>
    <p>This step shows how to add escalations in the configuration tool Monarch. 
    <ol>
      <li>Select <b>Escalations</b> from the Configuration menu options.</li>
      <li>Expand the <b>Escalations</b> drop-down menu.</li>
      <li>Expand the <b>Host (or Service)</b> drop-down menu.</li>
      <li>Select <b>New</b>.</li>
      <li>In the <b>Host (or Service) Escalation Properties</b> screen, enter the properties (see <b>Table 5.8.1a.</b> below).</li>
      <li>Select <b>Add</b> to add the new Host (or Service) Escalation.</li>
      <li>You will be prompted that the new Host (or Service) Escalation has been saved. Select <b>Continue</b>.
    <h4>Figure 5.8.1a. Host (or Service) Escalation Properties</h4>
    <img src="/monarch/doc/images/OSPadm_s5chapter8_1a.gif" border="0" alt="--- GW IMAGE NOT DISPLAYED ---" />
      <h4>Table 5.8.1a. Host (or Service) Escalation Properties</h4>
<table class="window" cellpadding="5" cellspacing="1" width="698">
<tbody>
  <tr>
    <td valign="top" width="30%" class="row1"><b>Name</b></td>
    <td>Host (or Service) Escalation name.</td>
  </tr>
  <tr>
    <td valign="top" class="row1"><b>First Notification</b></td>
    <td>[Required] Which Notification does this Escalation start with? This directive is a number that identifies the first Notification for which this escalation is effective. For instance, If you start with 1, the first Notification, this Escalation will control Notifications from the beginning Notification. Or, if you set this value to 3, this Escalation will only be used if the Host (is down or unreachable long enough for a third Notification to go out or if the Service is in a non-OK state long enough for a third Notification to go out.</td>
  </tr>
  <tr>
    <td valign="top" class="row1"><b>Last Notification</b></td>
    <td>[Required] This directive is a number that identifies the last Notification for which this Escalation is effective. For instance, if you set this value to 5, this Escalation will not be used if more than five Notifications are sent out for the Host or Service. Setting this value to 0 means this Escalation will control all Notifications sent.</td>
  </tr>
  <tr>
    <td valign="top" width="30%" class="row1"><b>Notification Interval</b></td>
    <td>[Required] When should Notifications be sent? This directive is used to determine the time interval, (unless you've changed the interval_length directive from the default value of 60, this number will mean minutes), at which Notifications should be made while this Escalation is valid. The average interval is 15 minutes. If you specify a value of 0 for the interval, Nagios&#174; will send the first Notification only, and will then prevent any more problem Notifications from being sent out for the Host. Specifying any other value will send continuous notifications at the time interval specified. Note: If multiple Escalation entries for a Host overlap for one or more Notification ranges, the smallest Notification interval from all Escalation entries is used.</td>
  </tr>
  <tr>
    <td valign="top" width="30%" class="row1"><b>Escalation Period</b></td>
    <td>[Optional] This directive is used to specify the name (e.g. Work Hours, 24x7 no limit) of the time period during which this Escalation is valid. If this directive is not specified, the Escalation is considered to be valid during all times.</td>
  </tr>
  <tr>
    <td valign="top" width="30%" class="row1"><b>Escalation Options</b></td>
    <td>[Optional] When should a Notifications be sent? This directive is used to define the criteria that determine when this Host (or Service) Escalation is used (e.g. Recovery, Down, Unreachable). The Escalation is used only if the Host (or Service) is in one of the states specified in this directive. If this directive is not specified in a Host (or Service) Escalation, the Escalation is considered to be valid during all Host (or Service) states. Valid options are a combination of one or more of the following: <b>Recovery</b> = escalate on an UP (recover) state, <b>Down</b> = escalate on a DOWN state, and <b>Unreachable</b> = escalate on an UNREACHABLE state. Example: If you specify Down in this field, the Escalation will only be used if the Host (or Service) is in a DOWN state.</td>
  </tr>
</tbody>
</table>
      </li>
    </ol>
    </td>
  </tr>
</tbody>
</table>
    </td>
  </tr>
  <tr>
    <td>
<!-- Start Section 2 -->
<table class="window" cellpadding="5" cellspacing="1" width="100%">
<tbody>
  <tr class="windowHeader">
    <td class="windowHeader"><a name="section1"></a>Configuring Escalations</td>
  </tr>
  <tr>
    <td class="bookshelf_textBg">
<!-- How Do I Define a Host (or Service) Escalation Tree -->
    <a name="s5chapter8c"></a><h1 class="chapter"><img src="/monarch/doc/images/square.gif" border="0" alt="--- GW IMAGE NOT DISPLAYED ---" /> How Do I Define a Host or Service Escalation Tree?</h1>
<hr />
    <h2 class="smMargin">Step 1 - Defining a Host or Service Escalation Tree</h2>
    <ol>
      <li>Select <b>Escalations</b> from the Configuration menu options.</li>
      <li>Expand the <b>Escalation Trees</b> drop-down menu.</li>
      <li>Expand the <b>Host (or Service)</b> drop-down menu.</li>
      <li>Select <b>New</b>.</li>
      <li>Enter a name for the Host (or Service) Escalation Tree.</li>
      <li>Select <b>Add</b> to create the new Host (or Service) Escalation Tree. The new Escalation Tree name will then be listed in the navigation tree. At this point the Escalation Tree will be added to the database but it will not yet have any particular escalation assigned to it. Continue with Step 2 - Modifying a Host (or Service) Escalation Tree.
    <h4>Figure 5.8.2a. Defining a Host (or Service) Escalation Tree</h4>
    <img src="/monarch/doc/images/OSPadm_s5chapter8_2a.gif" border="0" alt="--- GW IMAGE NOT DISPLAYED ---" />
      </li>
    </ol>
    <h2 class="smMargin">Step 2 - Modifying a Host Escalation Tree - Adding Escalations</h2>
    <p>By selecting <i>Modify</i> and selecting an Escalation Tree entry we can add Escalations to the tree where you can build up a number of Escalations to accomplish elaborate Notification schemes. For example, a Technical Contact Group could be assigned an Escalation that sends out the first through the last Notifications. Whereas a different Escalation might start with the 5th Notification and end with the 6th Notification and go to a Senior Manager that might want to be notified only when a alarm hasn't been acknowledged within the 4 previous Notifications. 
    <ol>
      <li>Expand the <b>Modify</b> drop-down menu and select an Escalation Tree name to add Escalations to.</li>
      <li>Here you will see a list of defined Escalations. Select an Escalation and click on the <b>Add Escalation</b> button. Continue with Step 3 - Adding One or More Contact Groups</li>
    <h4>Figure 5.8.2b. Modifying a Host Escalation Tree</h4>
    <img src="/monarch/doc/images/OSPadm_s5chapter8_2b.gif" border="0" alt="--- GW IMAGE NOT DISPLAYED ---" />
      </li>
    </ol>
    <h2 class="smMargin">Step 3 - Modifying a Host Escalation Tree - Adding One or More Contact Groups</h2>
    <p>Contact Groups that are selected will be notified when the Host Notification is escalated.</p>
    <ol>
      <li>Adding an Escalation takes you to the next screen where you need to add one or more Contact Groups.</li>
      <li>Select <b>Assign Contact Groups</b>.
    <h4>Figure 5.8.2c. Assigning Contact Groups</h4>
    <img src="/monarch/doc/images/OSPadm_s5chapter8_2c.gif" border="0" alt="--- GW IMAGE NOT DISPLAYED ---" />
      </li>
    </ol>
    <h2 class="smMargin">Step 4 - Modifying a Host Escalation Tree - Adding Additional Escalations (Escalation Templates)</h2>
    <p>Here we will add Host Groups and/or Hosts to the Escalation Tree.</p>
    <ol>
      <li>You will see the selected Escalation listed displaying the name, first notification, and assigned Contact Groups.</li>
      <li>Here you can also, for any Escalation, select <b>Modify Groups</b> to change the list of Contact Groups associated with the Escalation, or you can select <b>Remove</b> to delete an Escalation from the Escalation Tree. Continue with Step 5 - Assigning Host Groups.
    <h4>Figure 5.8.2d. Modifying a Host Escalation Tree</h4>
    <img src="/monarch/doc/images/OSPadm_s5chapter8_2d.gif" border="0" alt="--- GW IMAGE NOT DISPLAYED ---" />
      </li>
    </ol>
    <h2 class="smMargin">Step 5 - Modifying a Host Escalation Tree - Assigning Host Groups</h2>
    <p>Now you can optionally assign Host Groups which will set the default Host Escalation for all Hosts in a Host Group. You also have the option to set a Host Escalation for a Host.</li>
    <ol>
      <li>Select the <b>Assign Host Groups</b> tab.</li>
      <li>Select the Host Groups to assign to the Escalation Tree.</li>
      <li>Select <b>Save</b> and <b>Close</b>.
    <h4>Figure 5.8.2e. Assigning Host Groups</h4>
    <img src="/monarch/doc/images/OSPadm_s5chapter8_2e.gif" border="0" alt="--- GW IMAGE NOT DISPLAYED ---" />
      </li>
    </ol>
    <h2 class="smMargin">Note - Adding an Escalation to a Host Group via Host > Host Groups > Modify</h2>
    <ol>
      <li>Note that you could have also added this Escalation to the <b>Linux Server</b> Host Group by selecting <b>Hosts</b> > <b>Host Groups</b> > <b>Modify</b> and <i>Linux Servers</i>, then selecting from the <b>Host Escalation ID</b> drop-down list <i>Hostgroup Escalation Tree Example 1</i>.
    <h4>Figure 5.8.2f. Adding an Escalation to a Host Group via Host>Host Groups>Modify</h4>
    <img src="/monarch/doc/images/OSPadm_s5chapter8_2f.gif" border="0" alt="--- GW IMAGE NOT DISPLAYED ---" />
      </li>
      </ol>
    <h2 class="smMargin">Nagios&#174; Configuration Object Definitions</h2>
    <p>When the Escalation Tree is committed to the Nagios&#174; engine cfg files, the configurator creates the following Nagios&#174; configuration object definition:</p>
<pre class="bookshelfpre">
define hostescalation {
         use Hostgroup Escalation Example 1
         hostgroup_name Linux Servers
         contact_groups nagiosadmin
         }

define hostescalation {
         name                        Hostgroup Escalation Example 1
         first_notification          1
         last_notification           0
         notification_interval     15
         escalation_period        24x7
         escalation_options       d
         register                      0
}
</pre>

For more information about Host Escalation definitions see <a href="http://nagios.sourceforge.net/docs/2_0/xodtemplate.html#hostescalation">http://nagios.sourceforge.net/docs/2_0/xodtemplate.html#hostescalation</a>. 
      </li>
      </ol>
    </td>
  </tr>
</tbody>
</table>
    </td>
  </tr>
  <tr>
    <td>
<!-- End -->
</tbody>
</table>
  </body>
</html>