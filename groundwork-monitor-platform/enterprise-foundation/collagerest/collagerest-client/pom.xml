<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <parent>
        <artifactId>collagerest-pom</artifactId>
        <groupId>org.groundwork</groupId>
        <version>7.2.2-SNAPSHOT</version>
    </parent>

    <groupId>org.groundwork</groupId>
    <version>7.2.2-SNAPSHOT</version>
    <artifactId>collagerest-client</artifactId>
    <packaging>jar</packaging>

    <name>Collage Rest Client APIs</name>
    <description>Groundwork Collage Rest Client APIs</description>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <!-- Default Value, can override with -DGWOS_REST_API -->
        <GWOS_REST_API>http://localhost/api</GWOS_REST_API>
        <GWOS_REST_USER>RESTAPIACCESS</GWOS_REST_USER>
        <!--<GWOS_REST_PW>7UZZVvnLbuRNk12Yk5H33zeYdWQpnA7j9shir7QfJgwh</GWOS_REST_PW>-->
        <GWOS_REST_PW>RESTAPIACCESSPASSWORD</GWOS_REST_PW>

        <IND_GWOS_REST_API_BASE>http://ubuntu/api</IND_GWOS_REST_API_BASE>
        <IND_GWOS_REST_USER>RESTAPIACCESS</IND_GWOS_REST_USER>
        <IND_GWOS_REST_PW>7UZZVvnLbuRNk12Yk5H33zeYdWQpnA7j9shir7QfJgwh</IND_GWOS_REST_PW>
        <IND_GWOS_REST_APP>unittestapp</IND_GWOS_REST_APP>
        <IND_GWOS_REST_AUTHURI>/auth/login</IND_GWOS_REST_AUTHURI>
        <IND_GWOS_REST_HOSTURI>/hosts</IND_GWOS_REST_HOSTURI>
        <IND_GWOS_REST_HOSTS_TO_GENERATE>15</IND_GWOS_REST_HOSTS_TO_GENERATE>
        <IND_GWOS_REST_EVENTS_TO_GENERATE>15</IND_GWOS_REST_EVENTS_TO_GENERATE>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.groundwork</groupId>
            <artifactId>collagerest-common</artifactId>
        </dependency>
        <dependency>
            <groupId>org.jboss.resteasy</groupId>
            <artifactId>resteasy-jaxrs</artifactId>
        </dependency>
        <dependency>
            <groupId>org.jboss.resteasy</groupId>
            <artifactId>resteasy-jaxb-provider</artifactId>
        </dependency>
        <dependency>
            <groupId>org.jboss.resteasy</groupId>
            <artifactId>resteasy-jackson-provider</artifactId>
        </dependency>
        <dependency>
            <groupId>joda-time</groupId>
            <artifactId>joda-time</artifactId>
        </dependency>
        <dependency>
            <groupId>org.groundwork</groupId>
            <artifactId>collage-api</artifactId>
            <scope>provided</scope>
        </dependency>

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.yaml</groupId>
            <artifactId>snakeyaml</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-lang3</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.assertj</groupId>
            <artifactId>assertj-core</artifactId>
            <scope>test</scope>
        </dependency>


    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-source-plugin</artifactId>
                <executions>
                    <execution>
                        <id>attach-sources</id>
                        <goals>
                            <goal>jar</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <profiles>
        <profile>
            <id>default</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <!-- ADD Failsafe plugin for IJ IDE -->
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-failsafe-plugin</artifactId>
                        <configuration>
                            <skipTests>false</skipTests>
                            <systemPropertyVariables>
                                <GWOS_REST_API>${GWOS_REST_API}</GWOS_REST_API>
                                <GWOS_REST_USER>${GWOS_REST_USER}</GWOS_REST_USER>
                                <GWOS_REST_PW>${GWOS_REST_PW}</GWOS_REST_PW>
                            </systemPropertyVariables>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- 7.2.1 Integration Tests -->
        <profile>
            <id>integration</id>
            <activation>
                <activeByDefault>false</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-failsafe-plugin</artifactId>
                        <configuration>
                            <skipTests>false</skipTests>
                            <systemPropertyVariables>
                                <GWOS_REST_API>${GWOS_REST_API}</GWOS_REST_API>
                                <GWOS_REST_USER>${GWOS_REST_USER}</GWOS_REST_USER>
                                <GWOS_REST_PW>${GWOS_REST_PW}</GWOS_REST_PW>
                            </systemPropertyVariables>
                            <argLine>${failsafeArgLine}</argLine>
                        </configuration>
                        <executions>
                            <execution>
                                <goals>
                                    <goal>integration-test</goal>
                                    <goal>verify</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <groupId>org.jacoco</groupId>
                        <artifactId>jacoco-maven-plugin</artifactId>
                        <configuration>
                            <output>file</output>
                            <append>true</append>
                            <excludes>
                                <exclude>**/GenericType.*</exclude>
                            </excludes>
                        </configuration>
                        <executions>
                            <execution>
                                <id>pre-integration-test</id>
                                <phase>pre-integration-test</phase>
                                <goals>
                                    <goal>prepare-agent</goal>
                                </goals>
                                <configuration>
                                    <!-- Sets the path to the file which contains the execution data. -->
                                    <destFile>${project.build.directory}/coverage-reports/jacoco-it.exec</destFile>
                                    <!--
                                        Sets the name of the property containing the settings
                                        for JaCoCo runtime agent.
                                    -->
                                    <propertyName>failsafeArgLine</propertyName>
                                </configuration>
                            </execution>
                            <!--
                                Ensures that the code coverage report for integration tests after
                                integration tests have been run.
                            -->
                            <execution>
                                <id>post-integration-test</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>report</goal>
                                </goals>
                                <configuration>
                                    <!-- Sets the path to the file which contains the execution data. -->
                                    <dataFile>${project.build.directory}/coverage-reports/jacoco-it.exec</dataFile>
                                    <!-- Sets the output directory for the code coverage report. -->
                                    <outputDirectory>${project.reporting.outputDirectory}/jacoco-it</outputDirectory>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        
        <profile>
            <id>pre-integration</id>
            <activation>
                <activeByDefault>false</activeByDefault>
            </activation>
        </profile>

        <profile>
            <id>independent-rest-integration-test</id>
            <activation>
                <activeByDefault>false</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <runOrder>alphabetical</runOrder>
                            <skipTests>false</skipTests>
                            <groups>org.groundwork.rs.client.IndependentClientTestBase</groups>
                            <includes>
                                <include>**/org/groundwork/rs/client/IndependentClientTestBase.java</include>
                                <include>**/org/groundwork/rs/client/IndependentGeneralProperties.java</include>
                                <include>**/org/groundwork/rs/client/IndependentEventTest.java</include>
                                <include>**/org/groundwork/rs/client/independentHostTest.java</include>
                            </includes>
                            <systemPropertyVariables>
                                <IND_GWOS_REST_API_BASE>${IND_GWOS_REST_API_BASE}</IND_GWOS_REST_API_BASE>
                                <IND_GWOS_REST_USER>${IND_GWOS_REST_USER}</IND_GWOS_REST_USER>
                                <IND_GWOS_REST_PW>${IND_GWOS_REST_PW}</IND_GWOS_REST_PW>
                                <IND_GWOS_REST_APP>${IND_GWOS_REST_APP}</IND_GWOS_REST_APP>
                                <IND_GWOS_REST_AUTHURI>${IND_GWOS_REST_AUTHURI}</IND_GWOS_REST_AUTHURI>
                                <IND_GWOS_REST_HOSTS_TO_GENERATE>${IND_GWOS_REST_HOSTS_TO_GENERATE}</IND_GWOS_REST_HOSTS_TO_GENERATE>
                                <IND_GWOS_REST_HOSTURI>${IND_GWOS_REST_HOSTURI}</IND_GWOS_REST_HOSTURI>
                                <IND_GWOS_REST_EVENTS_TO_GENERATE>${IND_GWOS_REST_EVENTS_TO_GENERATE}</IND_GWOS_REST_EVENTS_TO_GENERATE>
                            </systemPropertyVariables>
                        </configuration>
                    </plugin>

                </plugins>
            </build>
        </profile>
        <profile>
            <id>integration-test</id>
            <activation>
                <activeByDefault>false</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <runOrder>alphabetical</runOrder>
                            <skipTests>${skipTests}</skipTests>
                            <excludes>
                                <exclude>**/org/groundwork/rs/client/HostGroupFilterTest.java</exclude>
                            </excludes>
                            <includes>
                                <include>**/org/groundwork/rs/client/AgentClientTest.java</include>
                                <include>**/org/groundwork/rs/client/ApplicationTypeClientTest.java</include>
                                <!--<include>**/org/groundwork/rs/client/AsyncHostClientTest.java</include>-->
                                <!--<include>**/org/groundwork/rs/client/AsyncServiceClientTest.java</include>-->
                                <include>**/org/groundwork/rs/client/AuditLogClientTest.java</include>
                                <include>**/org/groundwork/rs/client/AuthClientTest.java</include>

                                <include>**/org/groundwork/rs/client/BizClientTest.java</include>
                                <include>**/org/groundwork/rs/client/CategoryClientTest.java</include>
                                <include>**/org/groundwork/rs/client/CollectorConfigClientTest.java</include>
                                <include>**/org/groundwork/rs/client/ConsolidationClientTest.java</include>
                                <include>**/org/groundwork/rs/client/CustomGroupClientTest.java</include>
                                <include>**/org/groundwork/rs/client/DeviceClientTest.java</include>
                                <include>**/org/groundwork/rs/client/DeviceTemplateProfileClientTest.java</include>

                                <include>**/org/groundwork/rs/client/EntityTypeClientTest.java</include>
                                <include>**/org/groundwork/rs/client/EventClientTest.java</include>
                                <include>**/org/groundwork/rs/client/GraphClientTest.java</include>
                                <include>**/org/groundwork/rs/client/HostBlacklistClientTest.java</include>
                                <include>**/org/groundwork/rs/client/HostClientTest.java</include>
                                <include>**/org/groundwork/rs/client/HostGroupClientTest.java</include>
                                <include>**/org/groundwork/rs/client/HostIdentityClientTest.java</include>

                                <include>**/org/groundwork/rs/client/LicenseClientTest.java</include>
                                <include>**/org/groundwork/rs/client/NotificationClientTest.java</include>
                                <include>**/org/groundwork/rs/client/PerfDataClientTest.java</include>
                                <include>**/org/groundwork/rs/client/hubs/ProfileClientTest.java</include>
                                <include>**/org/groundwork/rs/client/PropertyTypeClientTest.java</include>

                                <include>**/org/groundwork/rs/client/RTMMClientPerformanceTest.java</include>
                                <include>**/org/groundwork/rs/client/RTMMClientTest.java</include>
                                <include>**/org/groundwork/rs/client/ServiceClientTest.java</include>
                                <include>**/org/groundwork/rs/client/ServiceGroupClientTest.java</include>

                                <!--<include>**/org/groundwork/rs/client/SettingsClientTest.java</include>-->
                                <include>**/org/groundwork/rs/client/StatisticsClientTest.java</include>
                                <include>**/org/groundwork/rs/client/SuggestionsClientTest.java</include>

                            </includes>
                            <systemPropertyVariables>
                                <GWOS_REST_API>${GWOS_REST_API}</GWOS_REST_API>
                                <GWOS_REST_USER>${GWOS_REST_USER}</GWOS_REST_USER>
                                <GWOS_REST_PW>${GWOS_REST_PW}</GWOS_REST_PW>
                            </systemPropertyVariables>
                        </configuration>
                    </plugin>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>exec-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>build-integration-test</id>
                                <phase>process-test-classes</phase>
                                <goals>
                                    <goal>java</goal>
                                </goals>
                                <configuration>
                                    <mainClass>org.groundwork.rs.integration.IntegrationDataTool</mainClass>
                                    <classpathScope>test</classpathScope>
                                    <arguments>
                                        <argument>-action</argument>
                                        <argument>importDatabase</argument>
                                    </arguments>
                                    <systemProperties>
                                        <systemProperty>
                                            <key>GWOS_REST_API</key>
                                            <value>${GWOS_REST_API}</value>
                                        </systemProperty>
                                    </systemProperties>
                                </configuration>
                            </execution>
                            <execution>
                                <id>post-integration-test</id>
                                <phase>post-integration-test</phase>
                                <goals>
                                    <goal>java</goal>
                                </goals>
                                <configuration>
                                    <mainClass>org.groundwork.rs.integration.IntegrationDataTool</mainClass>
                                    <classpathScope>test</classpathScope>
                                    <arguments>
                                        <argument>-action</argument>
                                        <argument>tearDown</argument>
                                    </arguments>
                                    <systemProperties>
                                        <systemProperty>
                                            <key>GWOS_REST_API</key>
                                            <value>${GWOS_REST_API}</value>
                                        </systemProperty>
                                    </systemProperties>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>integration-setup</id>
            <activation>
                <activeByDefault>false</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>exec-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>build-integration-test</id>
                                <phase>process-test-classes</phase>
                                <goals>
                                    <goal>java</goal>
                                </goals>
                                <configuration>
                                    <mainClass>org.groundwork.rs.integration.IntegrationDataTool</mainClass>
                                    <classpathScope>test</classpathScope>
                                    <arguments>
                                        <argument>-action</argument>
                                        <argument>importDatabase</argument>
                                    </arguments>
                                    <systemProperties>
                                        <systemProperty>
                                            <key>GWOS_REST_API</key>
                                            <value>${GWOS_REST_API}</value>
                                        </systemProperty>
                                    </systemProperties>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>integration-teardown</id>
            <activation>
                <activeByDefault>false</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>exec-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>post-integration-test</id>
                                <phase>post-integration-test</phase>
                                <goals>
                                    <goal>java</goal>
                                </goals>
                                <configuration>
                                    <mainClass>org.groundwork.rs.integration.IntegrationDataTool</mainClass>
                                    <classpathScope>test</classpathScope>
                                    <arguments>
                                        <argument>-action</argument>
                                        <argument>tearDown</argument>
                                    </arguments>
                                    <systemProperties>
                                        <systemProperty>
                                            <key>GWOS_REST_API</key>
                                            <value>${GWOS_REST_API}</value>
                                        </systemProperty>
                                    </systemProperties>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>integration-generate-data</id>
            <activation>
                <activeByDefault>false</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>exec-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>setup-integration-test</id>
                                <phase>integration-test</phase>
                                <goals>
                                    <goal>java</goal>
                                </goals>
                            </execution>
                        </executions>
                        <configuration>
                            <mainClass>org.groundwork.rs.integration.IntegrationDataTool</mainClass>
                            <classpathScope>test</classpathScope>
                            <arguments>
                                <argument>-action</argument>
                                <argument>createDataFiles</argument>
                            </arguments>
                            <systemProperties>
                                <systemProperty>
                                    <key>GWOS_REST_API</key>
                                    <value>${GWOS_REST_API}</value>
                                </systemProperty>
                            </systemProperties>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

    </profiles>
</project>
