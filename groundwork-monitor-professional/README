	Copyright (C) 2008 GroundWork Open Source, Inc. ("GroundWork")
	All rights reserved. Use is subject to GroundWork commercial license terms.

    
OVERVIEW

Current release: GroundWork Monitor Professional 4.5.3

Table of content
1 WHAT's NEW in 4.5.0
2 SUPPORTED OPERATING SYSTEMS
3 SOFTWARE PREREQUISITES
4 BROWSER RECOMMENDATIONS
5 HARDWARE RECOMMENDATIONS
6 INSTALLATION PREREQUISITES
7 NEW INSTALLATION
8 MIGRATING FROM PREVIOUS VERSIONS
9 UPDATE FROM PREVIOUS VERSION OF GROUNDWORK Professional 4.5
10 Installation verification
11 BUGFIXES
12 KNOWN ISSUES


1 WHAT's NEW in 4.5.0
-----------------------
* Enhanced install-ability
* Configurability
	- GroundWork Service Profiles Library
	- Enhanced Monarch
	- Enhanced navigation
	- Mass assignment of Profiles to Hosts
	- Assignment of multiple Service Profiles to a Host Profile
	- Service Dependencies, Escalations, and Service Templates improvements
	- Import Profiles support 
	- Import Configuration Data
	- CVS Spreadsheet
	- SNMP Discovery
	- genservices integration with SNMP Profile
	- Configuration EZ - Getting Started wizard 
* Documentation
    - Individual Operator, Administrator, and Developer user guides
* Nagios 2.0 Support
	- Faster performance
	- Support for new Nagios directives
	- Ease in the migration process from Nagios 1.2
* SNMP Syslog NG Integration
	- Syslog messages can now be monitored by GroundWork Monitor Professional with the integration of the Syslog NG project to centralize log files on the GroundWork Monitor Professional server
* Integrated Console View - Console is directly linked to Status Viewer and displays severity levels of events generated by monitoring applications such as SNMP and Syslog.
* Performance Monitoring Reporting
* SNMP TT Integration
	- SNMP traps can now be monitored by GroundWork Monitor Professional with the integration of SNMP-TT project.
	- Automated process to log traps into Foundation.
	- Nagios plugins showing traps related to each Host/IP address.
	- Use of Console to open a window showing traps for a specific Host.
* Non Portal Unified PHP Framework
* Foundation 1.1 Data Toolkit
	- Defining of object and events by application type
	- Added custom attributes for each application type
* Status Viewer
	- Tactical overview
	- NetView interface offers a side navigation tree, color coded status, and a more streamlined design
	- AJAX-based 
* Insight Report Enhancements/Updates

2 SUPPORTED OPERATING SYSTEMS
------------------------------
The GroundWork Monitor Professional 4.5 RPM-based installer enables all components to be installed together on standard versions of commercial Linux. These supported operating systems are recommended for stability and performance reasons.
* SuSE Linux Enterprise Server 9.x
* Red Hat Linux Enterprise WS 4
	- Default install but you may want to remove Office and Graphics tools.
	- Red Hat 4 includes, as a default, MySQL 4.1.10a which should be un-installed. The Red Hat default MySQL version is not supported so it must be de-installed and MySQL version 5.0.16 or higher installed.

3 SOFTWARE PREREQUISITES
------------------------
* MySQL version 5.0.16 or higher
* Java SDK version 1.5
* Linux Kernel version 2.6
* glibc lib version 2.3

4 BROWSER RECOMMENDATIONS
--------------------------
GroundWork recommends the following web browsers when using GroundWork Monitor Professional:
* Firefox 1.x
* Internet Explorer 6.x

5 HARDWARE RECOMMENDATIONS
--------------------------
The minimum hardware configuration for a single GroundWork Monitor server is as listed below. Assuming that the system is configured to monitor 100 Hosts that are polled at default intervals, and that standard Service Profiles are used, the minimum configuration will suffice. In extreme cases, more powerful hardware (increased CPU speed and quantity, and RAM) can be used to extend the system. At this time there is no support for 64-bit Linux kernels.

* Minimum Hardware Configuration
	- One Intel Pentium 4 CPU 2.8 GHz
	- 2 GB RAM
	- 60 GB hard disk
	- CD ROM drive

* Recommended Hardware Configuration (above 500 Hosts)
	- Two Intel Pentium 4 CPU 3.2 GHz or above
	- 4 GB RAM
	- 80 GB hard disk
	- CD ROM drive

6 INSTALLATION PREREQUISITES
-----------------------------
Step 1 - Java Installation
The typical Java Development Kit distribution comes as a bin file from Sun Microsystems.
1) Copy the file into a temporary folder on your hard disk.

2) Make the file executable with the command: chmod+x 

3) Execute the binary file (i.e. ./jdk-1_5_0_06-linux-i586-rpm.bin), which will extract the installable rpm file.

4) You will be prompted to accept the license.

5) Make sure you are root before installing the Java SDK by running the command: rpm -Uhv jdk-1_5_0_06-linux-i586.rpm.
	- The installer puts all files into: /usr/java

6) Set the environment variable: JAVA_HOME 
	- You will need to add the environment variable to: /etc/profile
	- And add Java to the path:
		export JAVA_HOME=/usr/java/jdk1.5.0_06
		export PATH=$PATH:$JAVA_HOME/bin:$PATH

7) In most Linux systems /usr/bin/java is a link to /etc/alternatives/java which is another link to the java executable. 
	- If this is the case you will need to update /etc/alternatives/java so that it points to your installation of the Java SDK command: ln -sf $JAVA_HOME$/bin/java /usr/bin/java

Step 2 - SE Linux Configuration
The SE Linux package interferes with MySQL installation and must be disabled. It can be re-enabled after installing MySQL.
1) Edit the /etc/selinux/config file so that it looks like:

		# This file controls the state of SELinux on the system.
		# SELINUX= can take one of these three values:
		# enforcing - SELinux security policy is enforced.
		# permissive - SELinux prints warnings instead of enforcing.
		# disabled - SELinux is fully disabled.

		SELINUX=disabled

		# SELINUXTYPE= type of policy in use. Possible values are:
		# targeted - Only targeted network daemons are protected.
		# strict - Full SELinux protection.
		#SELINUXTYPE=targeted

2) If you change these settings you may need to re-boot your system before installing MySQL.

Step 3 - The version of Perl-DBI-1.40-5.i386.rpm needs to be installed on Red Hat servers prior to MySQL.

Step 4 - MySQL Configuration

Package Install
GroundWork Monitor Professional requires the following packages (version 5.0.16 or higher) to be installed on the system. You must upgrade MySQL to the MySQL PRO Version.
- MySQL-client-pro-5.0.x-0.rhel4.i386.rpm 
- MySQL-devel-pro-5.0.x-0.rhel4.i386.rpm   
- MySQL-server-pro-5.0.x-0.rhel4.i386.rpm  run-logs 
- MySQL-shared-pro-5.0.x-0.rhel4.i386.rpm

If you are not sure if the correct version of the packages are installed, query the RPM database for each package using rpm -qa |grep MySQL.

You can install these packages by copying the appropriate MySQL rpm files for your operating system and issuing the command: rpm -Uvh MySQL*. This will install the MySQL packages in the correct order.

Database Access
The installer needs root access for creating new databases and setting the permissions. If your root password for MySQL is empty (not recommended but the default after installing MySQL) no further MySQL configuration is needed and you can proceed with the installation step. If a root password had been specified you can pass it to the installer by setting an environment variable.

IMPORTANT NOTE
The root password is only needed for installation. None of the GroundWork Monitor Professional applications require root access to MySQL. The database credentials are stored in  /usr/local/groundwork/config/db.properties.
1) Create an environment variable MYSQL_ROOT (all uppercase) with the password value (i.e. export MYSQL_ROOT=password).

2) Perform the installation as described below.

3) Exit the shell so that the variable is no longer visible.

Step 5 - Network Configuration
MySQL uses the localhost file on /etc/hosts. Make sure that the localhost entry looks like the example below. Also, make sure that localhost is first after the IP address followed by localhost.localdomain. Replace 192.168.2.100 with the IP address of the system, and groundworkserver with the real Host name.

127.0.0.1 localhost localhost.localdomain
192.168.2.100 groundworkserver (example: groundworkserver.groundworkopensource.com)

Also make sure TCP port 3306 is not blocked by your firewall rules. This port is for communication to MySQL server.

7 NEW INSTALLATION
------------------
The following installation instructions are updated for the current release of GroundWork Monitor Professional 4.5. This install package implements all GroundWork components in a single RPM.

Installation
For performing the installation you have to be root on the system. This installation places all files in the directory /usr/local/groundwork. GroundWork's version of Apache is installed with this package. If you are running Apache on your system, it will be stopped during the installation process, but not removed. Any content served will be served by the GroundWork version of Apache, but you should be aware that patches applied using the usual patch distribution systems will not be applied to the running version of Apache. The GroundWork Monitor Professional package should be installed on a standalone system to avoid this scenario.

1) To install the package, copy the file groundwork-monitor-pro-4.5-xx.i586.rpm to your system by entering the command:

	rpm -Uvh groundwork-monitor-pro-4.5-xx.i586.rpm. 
	IMPORTANT NOTE: The install from rpm -Uvh automatically places a default nagios.cfg in the config directory (overwriting whatever was there) and starts it. This means you lose several files, namely status.log and status.sav, RRD's, nagios.log, and apache error and access logs. You should perform a backup. It is good practice to do this whenever performing an upgrade. The minimum you want to keep in this case includes: 
		/usr/local/groundwork/nagios/etc
		/usr/local/groundwork/nagios/var
		/usr/local/groundwork/nagios/eventhandlers
		/usr/local/groundwork/nagios/libexec
		/usr/local/groundwork/apache2/log
		/usr/local/groundwork/apache2/cgi-bin
		/usr/local/groundwork/rrd

After removing groundwork-monitor, a directory has been created called /usr/local/groundwork/backup that creates backup tar-gzip files: 
		apache2-cgi.bin-backup.tar.gz
		apache2-log-backup.tar.gz
		etc-backup.tar.gz
		monarch-backup.tar.gz
		nagios-etc-backup.tar.gz
		nagios-eventhandlers-backup.tar.gz
		nagios-libexec-backup.tar.gz  rrd-backup.tar.gz

2) If you need to un-install the package, enter the command rpm -e groundwork-monitor-4.5x. To check which version you have installed, enter the command rpm -qa | grep groundwork-monitor. 
	IMPORTANT NOTE: rpm -e removes all traces of GroundWork Monitor, including any config files. You should back up all the RRDs, config files, and log files at a minimum if you want to keep these around. It is good practice to do this whenever performing a software install.

3) Check the output for error messages.

4) To access GroundWork Monitor Professional, go to the URL http://<hostaddress>/. 
	- The default administrator user ID and password is admin/admin. Use this ID to define users, roles, packages, configure packages and assign packages to roles. The administrator role also provides access to the Monarch configuration system, which allows you to configure the Nagios monitoring system.
	- An Operator role is already defined. The default user ID and password is joe/joe. This role will allow you to access GroundWork Monitor Professional Status, Reports and Bookshelf applications.

5) Nagios files are installed in the following directories: 
	- Binaries:		/usr/local/groundwork/nagios/bin
	- Configuration:	/usr/local/groundwork/nagios/etc
	- Eventhandlers:	/usr/local/groundwork/nagios/eventhandlers
	- Plugins:		/usr/local/groundwork/nagios/libexec
	- Share:		/usr/local/groundwork/nagios/share
	- Logs:			/usr/local/groundwork/nagios/var
	- Command:		/usr/local/groundwork/nagios/var/spool
	- CGIs:			/usr/local/groundwork/apache2/cgi-bin

8 MIGRATING FROM PREVIOUS VERSIONS
----------------------------------
This chapter will cover the various migration options for the GroundWork Monitor Professional system.

MIGRATING FROM GROUNDWORK MONITOR 4.0 TO GROUNDWORK MONITOR PROFESSIONAL 4.5
Major Changes
There are substantial differences between GroundWork Monitor 4.0 and GroundWork Monitor Professional. Because of these changes, GroundWork recommends that you test GroundWork Monitor Professional on a stand-alone system before migrating your current Groundwork Monitor 4.0 to GroundWork Monitor Professional. The major changes are:
	- No requirement for Tomcat. The Jetspeed portal framework has been replaced with a PHP based framework based on the Guava open source project. Because of this change, the GroundWork CGI programs run under Apache rather than Tomcat.
	- Nagios 2.0 is installed, rather than Nagios 1.2 which was in GroundWork Monitor 4.0. There are major changes in the configuration file formats between 1.2 and 2.0.

Migration Steps
1) Backup custom changes you may have made to your GroundWork Monitor 4.0 system:
	- Plugins in /usr/local/groundwork/nagios/libexec
	- CGI graphs in /usr/local/groundwork/apache2/cgi-bin/
	- Eventhandlers, for example performance eventhandlers in /usr/local/groundwork/nagios/eventhandlers

2) Backup your Nagios configuration files in /usr/local/groundwork/nagios/etc.

3) Backup your Monarch configuration database. Enter the command mysqldump monarch > monarch_backup.sql to create the backup file monarch_backup.sql.

4) Install GroundWork Monitor Professional on a new server.

5) Convert your old Monarch database to the new database. Execute the script /usr/local/groundwork/monarch/tools/monarch_update.pl.

6) Copy your custom plugins to the new system's plugin directory.

7) Copy your custom CGI to the new system's CGI directory: /usr/local/groundwork/apache2/cgi-bin/graph/. Use Monarch to change the references in the Host and Service extended info to URL /graphs/cgi-bin/<cgi_program>.

8) Copy your custom eventhandlers to the new system's eventhandler directory.

9) Confirm your configuration by executing a Pre Flight Test in Monarch.

10) Execute a Commit in Monarch to implement the configuration in the new Nagios system.
IMPORTANT NOTE: On upgrades from 4.0-10 to 4.5-Pro: Remember to remove the htpasswd.users file from the nagios/etc directory so that SSO works correctly. This is needed if you brought config files in as part of conversion and may not apply if you used the migration script. Also, also you should remove the .htaccess files rm -rf /usr/local/groundwork/apache2/cgi-bin/.htaccess and rm -rf /usr/local/groundwork/nagios/etc/htpasswd.users.

MIGRATING FROM GROUNDWORK MONITOR OPEN SOURCE TO GROUNDWORK MONITOR PROFESSIONAL 4.5
Migration Steps
Note: You must upgrade their MySQL to the MySQL PRO Version. See 6 INSTALLATION PREREQUISITES Step 4 - MySQL Configuration above.

1) Backup any custom changes you may have made to your GroundWork Monitor Open Source system: 
	- Plugins in /usr/local/groundwork/nagios/libexec.
	- CGI graphs in /usr/local/groundwork/apache2/cgi-bin/.
	- Eventhandlers, for example performance eventhandlers in /usr/local/groundwork/nagios/eventhandlers.

2) Backup your Nagios configuration files in /usr/local/groundwork/nagios/etc.

3) Backup your Monarch configuration database. Enter the command mysqldump monarch > monarch_backup.sql to create the backup file monarch_backup.sql.

4) Un-install GroundWork Monitor Open Source with the command rpm -e groundworkmonitor.

5) Install GroundWork Monitor Professional on a new server.

6) Load your old Monarch database to the new database with the following procedure: 
	- mysql
	- drop database monarch
	- create database monarch
	- exit
	- cat monarch_backup.sql | mysql monarch

7) Execute the script /usr/local/groundwork/monarch/tools/monarch_update.pl.

8) Copy your custom plugins to the new system's plugin directory.

9) Copy your custom CGI to the new system's CGI directory /usr/local/groundwork/apache2/cgi-bin/graph/. Use monarch to change the references in Host and Service extended info to URL /graphs/cgi-bin/<cgi_program>.

10) Copy your custom eventhandlers to the new system's eventhandler directory.

11) Confirm your configuration by executing a Pre Flight Test in Monarch.

12) Execute a Commit in Monarch to implement the configuration in the new Nagios system.

9 UPDATE FROM PREVIOUS VERSION OF GROUNDWORK Professional 4.5
-------------------------------------------------------------
To install the package, copy the file groundwork-monitor-pro-4.5-xx.i586.rpm to your system by entering the command:

	rpm -Uvh groundwork-monitor-professional-4.5-xx.i586.rpm. 
	
This will update the existing installation of GroundWork Monitor Professional


10 Installation verification
-----------------------------


11 BUGFIXES
-----------

12 KNOWN ISSUES
---------------
